var $=Object.defineProperty;var M=(e,a,t)=>a in e?$(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;var h=(e,a,t)=>M(e,typeof a!="symbol"?a+"":a,t);(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();class N extends HTMLElement{constructor(){super();h(this,"_messages",[]);h(this,"_visible",!0);h(this,"_endRef",null)}static get observedAttributes(){return["visible"]}get messages(){return this._messages}set messages(t){this._messages=t,this.render(),this.scrollToEnd()}get visible(){return this._visible}set visible(t){this._visible=t,this.render()}scrollToEnd(){this._endRef&&this._endRef.scrollIntoView({behavior:"smooth"})}attributeChangedCallback(t,i,s){t==="visible"&&(this.visible=s!=="false")}connectedCallback(){this.render()}render(){this.innerHTML=`
            <div class="console${this.visible?"":" fade-out"}">
                ${this._messages.map(t=>`<div class="console-line">${t.text}</div>`).join("")}
                <div id="end"></div>
            </div>
        `,this._endRef=this.querySelector("#end"),this.scrollToEnd()}}customElements.define("output-window",N);class O{constructor(a){h(this,"original");h(this,"addBuffer");h(this,"pieces");this.original=a,this.addBuffer="",this.pieces=[{buffer:"original",start:0,length:a.length}]}insert(a,t){if(t.length===0)return;const i=this.addBuffer.length;this.addBuffer+=t;let s=0,r=0;for(;r<this.pieces.length;r++){const c=this.pieces[r];if(s+c.length>=a)break;s+=c.length}if(r===this.pieces.length){this.pieces.push({buffer:"add",start:i,length:t.length});return}const n=this.pieces[r],o=a-s,l=[];o>0&&l.push({buffer:n.buffer,start:n.start,length:o}),l.push({buffer:"add",start:i,length:t.length}),o<n.length&&l.push({buffer:n.buffer,start:n.start+o,length:n.length-o}),this.pieces.splice(r,1,...l)}delete(a,t){let i=0,s=0;for(;s<this.pieces.length&&i+this.pieces[s].length<=a;)i+=this.pieces[s].length,s++;const r=s,n=a-i;let o=t;const l=[];for(;o>0&&s<this.pieces.length;){const c=this.pieces[s],d=s===r?n:0,u=c.length-d;Math.max(0,c.length-u),d>0&&l.push({buffer:c.buffer,start:c.start,length:d}),u<c.length&&l.push({buffer:c.buffer,start:c.start+d+o,length:c.length-(d+o)}),o-=u,s++}this.pieces.splice(r,s-r,...l)}getText(){let a="";for(const t of this.pieces){const i=t.buffer==="original"?this.original:this.addBuffer;a+=i.substr(t.start,t.length)}return a}}var v;(e=>{e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(v||(v={}));var w;(e=>{e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(w||(w={}));var T;(e=>{e.None=0,e.Full=1,e.Incremental=2})(T||(T={}));var x;(e=>{e.Text=1,e.Read=2,e.Write=3})(x||(x={}));var L;(e=>{e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(L||(L={}));var C;(e=>{e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(C||(C={}));function b(e){let a="";return e.childNodes.forEach((t,i,s)=>{t.nodeType===Node.TEXT_NODE?a+=t.data:t.tagName==="BR"?a+=`
`:t.tagName==="DIV"?(a+=b(t),i<s.length-1&&(a+=`
`)):t.nodeType===Node.ELEMENT_NODE&&(a+=b(t))}),a}function P(e){let a=0;const t=window.getSelection();if(t&&t.rangeCount>0){const i=t.getRangeAt(0),s=i.cloneRange();s.selectNodeContents(e),s.setEnd(i.endContainer,i.endOffset),a=s.toString().length}return a}function H(e,a){const t=window.getSelection();if(!t)return;let i=0,s=[e],r,n=!1;for(;s.length&&!n&&(r=s.pop(),!!r);)if(r.nodeType===Node.TEXT_NODE){const o=r.length;if(i+o>=a){const l=document.createRange();l.setStart(r,a-i),l.collapse(!0),t.removeAllRanges(),t.addRange(l),n=!0}else i+=o}else{let o=Array.from(r.childNodes);for(let l=o.length-1;l>=0;l--)s.push(o[l])}}class z extends HTMLElement{constructor(){super();h(this,"_pieceTable");h(this,"_consoleListener",null);h(this,"_inputRef",null);h(this,"_highlightRef",null);h(this,"_sourceUri","");h(this,"_lastText","");h(this,"_client",null);h(this,"_hasInitialized",!1);h(this,"_boundInputCallback",this.inputCallback.bind(this));h(this,"_boundScrollCallback",this.scrollCallback.bind(this));h(this,"_boundKeydownCallback",this.keydownCallback.bind(this));this._pieceTable=new O("function nvr main = () {}")}connectedCallback(){}disconnectedCallback(){var t;(t=this._client)==null||t.postMessage({type:"execute",method:"closeDocument",params:{uri:this._sourceUri}})}initialize(t,i,s){var r;this._hasInitialized=!0,this._consoleListener||(this._consoleListener=i),s&&(this._client=s,this._client.addEventListener("message",n=>{var o,l,c;n.data.type==="log"?(o=this._consoleListener)==null||o.notify(n.data.message):n.data.type==="error"?(l=this._consoleListener)==null||l.notify(n.data.message):n.data.type==="compileResult"&&((c=this._consoleListener)==null||c.notify(JSON.stringify(n.data.result)))}),this._client.addEventListener("messageerror",n=>{var o;(o=this._consoleListener)==null||o.notify(n.data)}),this._sourceUri=t),(r=this._client)==null||r.postMessage({type:"execute",method:"openDocument",params:{uri:this._sourceUri,sourceCode:this._pieceTable.getText()}}),this.render()}inputCallback(t){this.handleInputChange(t)}scrollCallback(t){this.syncScroll()}keydownCallback(t){this.handleKeyDown(t)}attachEventListeners(){var t,i,s;(t=this._inputRef)==null||t.addEventListener("input",this._boundInputCallback),(i=this._inputRef)==null||i.addEventListener("scroll",this._boundScrollCallback),(s=this._inputRef)==null||s.addEventListener("keydown",this._boundKeydownCallback)}detachEventListeners(){var t,i,s;(t=this._inputRef)==null||t.removeEventListener("input",this._boundInputCallback),(i=this._inputRef)==null||i.removeEventListener("scroll",this._boundScrollCallback),(s=this._inputRef)==null||s.removeEventListener("keydown",this._boundKeydownCallback)}handleInputChange(t){if(!this._inputRef)return;const i=b(this._inputRef),s=P(this._inputRef);let r=0;for(;r<this._lastText.length&&r<i.length&&this._lastText[r]===i[r];)r++;let n=this._lastText.length-1,o=i.length-1;for(;n>=r&&o>=r&&this._lastText[n]===i[o];)n--,o--;n>=r&&this._pieceTable.delete(r,n-r+1),o>=r&&this._pieceTable.insert(r,i.slice(r,o+1)),this._lastText=i,this.renderHighlight([]),H(this._inputRef,s)}handleKeyDown(t){t.key==="Tab"&&(t.preventDefault(),document.execCommand("insertText",!1,"    ")),t.key==="Enter"&&(t.preventDefault(),document.execCommand("insertLineBreak"))}renderHighlight(t){var i;this._highlightRef&&(this._pieceTable.getText(),(i=this._client)==null||i.postMessage({type:"execute",method:"recycle",params:{uri:this._sourceUri,deltas:t}}))}syncScroll(){this._inputRef&&this._highlightRef&&(this._highlightRef.scrollTop=this._inputRef.scrollTop,this._highlightRef.scrollLeft=this._inputRef.scrollLeft)}render(){if(!this._hasInitialized)throw new Error("call initialize() on SourceEditorElement before rendering.");const t=this._pieceTable.getText();this.innerHTML=`
            <div class="editor-shell">
                <pre class="highlight-layer"></pre>
                <div class="input-layer" contenteditable="true" spellcheck="false"></div>
            </div>
        `,this._highlightRef=this.querySelector(".highlight-layer"),this._inputRef=this.querySelector(".input-layer"),this._inputRef&&(this._inputRef.textContent=t,this._lastText=t),this.attachEventListeners(),this.renderHighlight([])}}customElements.define("source-editor",z);class S extends HTMLElement{constructor(){super(...arguments);h(this,"tabsContent");h(this,"pages",[])}connectedCallback(){this.render(),window.addEventListener("popstate",i=>{var r;const s=((r=i.state)==null?void 0:r.tab)??this.getTabIndexFromUrl();typeof s=="number"&&s>=0&&s<this.pages.length&&this.activatePage(s,!1)});const t=this.getTabIndexFromUrl();typeof t=="number"&&t>=0&&t<this.pages.length&&this.activatePage(t,!1)}getTabIndexFromUrl(){let t=window.location.pathname.replace(/^\//,"");t.startsWith("clarity/")&&(t=t.substring(8));const i=Array.from(this.querySelectorAll("my-tab"));for(let s=0;s<i.length;s++)if(i[s].getAttribute("route")===t)return s;return 0}activatePage(t,i=!0){if(this.pages.forEach((s,r)=>{const n=this.tabsContent.querySelectorAll("input"),o=r===t;s.classList.toggle("active",o),n[r]&&(n[r].checked=o)}),i){const r=Array.from(this.querySelectorAll("my-tab"))[t].getAttribute("route")||"",o=`${window.location.origin}/clarity/${r}`;history.pushState({tab:t},"",o)}}render(){const t=this.querySelector("my-header");if(t){const r=t.children[0];if(r){let n=document.createElement("div");n.className="tabs-bar",r.classList.add("tabs-header"),n.appendChild(r),this.prepend(n)}t.remove()}this.tabsContent=document.createElement("div"),this.tabsContent.className="tabs-content";const i=this.querySelector(".tabs-bar");i?i.append(this.tabsContent):this.prepend(this.tabsContent),Array.from(this.querySelectorAll("my-tab")).forEach((r,n)=>{const o=r.getAttribute("label")||`Tab ${n+1}`,l=`tab-${n}`,c=`tabpanel-${n}`,d=document.createElement("input");d.type="radio",d.id=l,d.checked=n===0,d.addEventListener("change",()=>this.activatePage(n,!0));const u=document.createElement("label");u.htmlFor=l,u.textContent=o;const f=document.createElement("span");f.className="tab-radio-wrapper",f.appendChild(d),f.appendChild(u),this.tabsContent.appendChild(f),r.classList.add("page"),r.setAttribute("id",c),n===0&&r.classList.add("active"),this.pages.push(r)})}}customElements.define("my-tabview",S);class B extends HTMLElement{}customElements.define("my-tab",B);class q extends HTMLElement{}customElements.define("my-header",q);class F extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){const a=document.createElement("div");a.className="article-list",this.querySelectorAll("my-article").forEach(t=>{const i=t.getAttribute("article-title")||"",s=t.getAttribute("article-route")||"#",r=t.getAttribute("article-description")||"",n=document.createElement("div");n.className="article-item",n.addEventListener("click",()=>{window.location.hash=s});const o=document.createElement("div"),l=document.createElement("h3");l.textContent=i,l.className="article-title";const c=document.createElement("p");c.textContent=r,c.className="article-desc",o.appendChild(l),o.appendChild(c);const d=this.querySelector("custom-icon");d&&n.prepend(d),n.appendChild(o),a.appendChild(n)}),this.innerHTML="",this.appendChild(a)}}class U extends HTMLElement{}customElements.define("my-articleselector",F);customElements.define("my-article",U);class W extends HTMLElement{connectedCallback(){this.render()}render(){const a=this.getAttribute("text")||"Hz",t=this.getAttribute("size")||"300",i=this.getAttribute("radius"),s=i?`border-radius: ${i};`:"",r=this.getAttribute("shadow-color")||"var(--haze-color-shadow)",n=this.getAttribute("foreground-top-color")||"var(--haze-color-foreground-top)",o=this.getAttribute("foreground-bottom-color")||"var(--haze-color-foreground-bottom)",l=this.getAttribute("background-top-color")||"var(--haze-color-background-top)",c=this.getAttribute("background-bottom-color")||"var(--haze-color-background-bottom)",d=(Math.random()+1).toString(36).substring(7),u=`bgGradient-${d}`,f=`highlight-${d}`,E=`textGradient-${d}`,_=`dropShadow-${d}`;this.innerHTML=`
            <svg class="custom-icon" style="${s}" width="${t}" height="${t}" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
            	<defs>
            		<linearGradient id="${u}" x1="0%" y1="0%" x2="0%" y2="100%">
            			<stop offset="0%" stop-color="${l}" />
            			<stop offset="100%" stop-color="${c}" />
            		</linearGradient>

            		<linearGradient id="${E}" x1="0%" y1="0%" x2="0%" y2="100%">
            			<stop offset="0%" stop-color="${n}" />
            			<stop offset="100%" stop-color="${o}" />
            		</linearGradient>

            		<linearGradient id="highlight" x1="0%" y1="0%" x2="100%" y2="100%">
            			<stop offset="0%" stop-color="white" stop-opacity="0" />
            			<stop offset="100%" stop-color="white" stop-opacity="0.4" />
            		</linearGradient>

            		<filter id="${_}" x="-20%" y="-20%" width="140%" height="140%">
            			<feDropShadow dx="5" dy="5" stdDeviation="10" flood-color="rgba(0,0,0,0.5)" />
            		</filter>
            	</defs>

            	<g>
            		<rect x="0" y="0" width="300" height="300" fill="url(#${u})" />
            		<rect x="0" y="0" width="300" height="300" fill="url(#${f})" />
            	</g>

            	<text x="155" y="170" text-anchor="middle" dominant-baseline="middle"
            		  font-size="180"
            		  fill="${r}" opacity="1.0">
            		${a}
            	</text>

            	<text x="150" y="165" text-anchor="middle" dominant-baseline="middle"
            		  font-size="180"
            		  fill="url(#${E})" filter="url(#${_})"
            		  stroke="rgba(255,255,255,0.3)" stroke-width="1">
            		${a}
            	</text>
            </svg>
        `}}customElements.define("custom-icon",W);const g=document.getElementById("output-window");g.messages=[];g.visible=!1;var p;const D=()=>{g.visible=!0,p&&clearTimeout(p.current),p=setTimeout(()=>g.visible=!1,1e4)},G={notify:e=>{console.log(e),g.messages=[...g.messages,{id:Date.now().toString(),text:e,visible:!0}],D()}},V=new Worker(new URL("/clarity/assets/language_server_worker-BOXhEwlU.js",import.meta.url),{type:"module"}),k=new Worker(new URL("/clarity/assets/language_client_worker-2arvf2PA.js",import.meta.url),{type:"module"}),R=new MessageChannel,m=R.port1,y=R.port2;V.postMessage({type:"connect",port:m},[m]);k.postMessage({type:"connect",port:y},[y]);m.start();y.start();const A=document.querySelector("#main-editor");A.attachEventListeners();A.initialize("file:///c:/Users/Connor/Desktop/clarity/src/index.ts",G,k);
