var Yo=Object.defineProperty;var lr=e=>{throw TypeError(e)};var Xo=(e,n,t)=>n in e?Yo(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var g=(e,n,t)=>Xo(e,typeof n!="symbol"?n+"":n,t),En=(e,n,t)=>n.has(e)||lr("Cannot "+t);var L=(e,n,t)=>(En(e,n,"read from private field"),t?t.call(e):n.get(e)),ne=(e,n,t)=>n.has(e)?lr("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),se=(e,n,t,r)=>(En(e,n,"write to private field"),r?r.call(e,t):n.set(e,t),t),It=(e,n,t)=>(En(e,n,"access private method"),t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();class Go{constructor(n){g(this,"original");g(this,"addBuffer");g(this,"pieces");this.original=n,this.addBuffer="",this.pieces=[{buffer:"original",start:0,length:n.length}]}insert(n,t){if(t.length===0)return;const r=this.addBuffer.length;this.addBuffer+=t;let o=0,s=0;for(;s<this.pieces.length;s++){const c=this.pieces[s];if(o+c.length>=n)break;o+=c.length}if(s===this.pieces.length){this.pieces.push({buffer:"add",start:r,length:t.length});return}const i=this.pieces[s],a=n-o,l=[];a>0&&l.push({buffer:i.buffer,start:i.start,length:a}),l.push({buffer:"add",start:r,length:t.length}),a<i.length&&l.push({buffer:i.buffer,start:i.start+a,length:i.length-a}),this.pieces.splice(s,1,...l)}delete(n,t){let r=0,o=0;for(;o<this.pieces.length&&r+this.pieces[o].length<=n;)r+=this.pieces[o].length,o++;const s=o,i=n-r;let a=t;const l=[];for(;a>0&&o<this.pieces.length;){const c=this.pieces[o],d=o===s?i:0,f=c.length-d;Math.max(0,c.length-f),d>0&&l.push({buffer:c.buffer,start:c.start,length:d}),f<c.length&&l.push({buffer:c.buffer,start:c.start+d+a,length:c.length-(d+a)}),a-=f,o++}this.pieces.splice(s,o-s,...l)}getText(){let n="";for(const t of this.pieces){const r=t.buffer==="original"?this.original:this.addBuffer;n+=r.substr(t.start,t.length)}return n}}var cr;(e=>{e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(cr||(cr={}));var dr;(e=>{e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(dr||(dr={}));var ur;(e=>{e.None=0,e.Full=1,e.Incremental=2})(ur||(ur={}));var fr;(e=>{e.Text=1,e.Read=2,e.Write=3})(fr||(fr={}));var hr;(e=>{e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(hr||(hr={}));var vr;(e=>{e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(vr||(vr={}));const Zo=`
    .editor-shell {
        position: relative;
        font-family: Consolas;
        height: 300px;
    }
    .highlight-layer, .input-layer {
        white-space: pre-wrap;
        word-break: break-word;
        padding: 8px;
        line-height: 1.5;
        height: 100%;
        min-height: 100%;
        box-sizing: border-box;
    }
    .highlight-layer {
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        pointer-events: none;
        z-index: 1;
        color: #ccc;
        margin: 0;
        padding: 0;
    }
    .input-layer {
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        margin: 0 0 0 2rem;
        padding: 0;
        background: transparent;
        caret-color: var(--accent);
        z-index: 2;
        outline: none;
        user-select: none;
    }
`,Ar=new CSSStyleSheet;Ar.replaceSync(Zo);const Jo=.2,Qo=3;function ln(e){let n="";return e.childNodes.forEach((t,r,o)=>{t.nodeType===Node.TEXT_NODE?n+=t.data:t.tagName==="BR"?n+=`
`:t.tagName==="DIV"?(n+=ln(t),r<o.length-1&&(n+=`
`)):t.nodeType===Node.ELEMENT_NODE&&(n+=ln(t))}),n}function pr(e){let n=0;const t=window.getSelection();if(t&&t.rangeCount>0){const r=t.getRangeAt(0),o=r.cloneRange();o.selectNodeContents(e),o.setEnd(r.endContainer,r.endOffset),n=o.toString().length}return n}function Ko(e,n){const t=window.getSelection();if(!t)return;let r=0,o=[e],s,i=!1;for(;o.length&&!i&&(s=o.pop(),!!s);)if(s.nodeType===Node.TEXT_NODE){const a=s.length;if(r+a>=n){const l=document.createRange();l.setStart(s,n-r),l.collapse(!0),t.removeAllRanges(),t.addRange(l),i=!0}else r+=a}else{let a=Array.from(s.childNodes);for(let l=a.length-1;l>=0;l--)o.push(a[l])}}class es extends HTMLElement{constructor(){super();g(this,"_pieceTable");g(this,"_consoleListener",null);g(this,"_inputRef",null);g(this,"_highlightRef",null);g(this,"_sourceUri","");g(this,"_lastText","");g(this,"_client",null);g(this,"_hasInitialized",!1);g(this,"_editorZoom",1);g(this,"_cursorLine",null);g(this,"_cursorColumn",null);g(this,"_lastCaretOffset",null);g(this,"_zoomPlugin");g(this,"_boundInputCallback",this.inputCallback.bind(this));g(this,"_boundScrollCallback",this.scrollCallback.bind(this));g(this,"_boundKeydownCallback",this.keydownCallback.bind(this));g(this,"_boundWheelCallback",this.wheelCallback.bind(this));this._pieceTable=new Go("function nvr main = () {}"),this.attachShadow({mode:"open"}),this.shadowRoot.adoptedStyleSheets=[Ar]}connectedCallback(){const t=this.getAttribute("data-plugin")||"";t&&(this._zoomPlugin=document.querySelector(`#${t}`))}disconnectedCallback(){var t;(t=this._client)==null||t.postMessage({type:"execute",method:"closeDocument",params:{uri:this._sourceUri}})}initialize(t,r,o){var s;this._hasInitialized=!0,this._consoleListener||(this._consoleListener=r),o&&(this._client=o,this._client.addEventListener("message",i=>{var a,l,c;i.data.type==="log"?(a=this._consoleListener)==null||a.notify(i.data.message):i.data.type==="error"?(l=this._consoleListener)==null||l.notify(i.data.message):i.data.type==="compileResult"&&((c=this._consoleListener)==null||c.notify(JSON.stringify(i.data.result)))}),this._client.addEventListener("messageerror",i=>{var a;(a=this._consoleListener)==null||a.notify(i.data)}),this._sourceUri=t),(s=this._client)==null||s.postMessage({type:"execute",method:"openDocument",params:{uri:this._sourceUri,sourceCode:this._pieceTable.getText()}}),this.render()}inputCallback(t){this.handleInputChange(t)}scrollCallback(t){this.syncScroll()}keydownCallback(t){this.handleKeyDown(t)}wheelCallback(t){if(t.shiftKey){t.preventDefault();const r=-t.deltaY*.001;let o=this._editorZoom+r;o=Math.max(Jo,Math.min(Qo,o)),this._editorZoom=o,this.updateEditorZoom()}}attachEventListeners(){var t,r,o,s,i,a,l,c;(t=this._inputRef)==null||t.addEventListener("input",this._boundInputCallback),(r=this._inputRef)==null||r.addEventListener("scroll",this._boundScrollCallback),(o=this._inputRef)==null||o.addEventListener("keydown",this._boundKeydownCallback),(s=this._inputRef)==null||s.addEventListener("wheel",this._boundWheelCallback,{passive:!1}),(i=this._inputRef)==null||i.addEventListener("keyup",()=>this.updateCursorPositionCache()),(a=this._inputRef)==null||a.addEventListener("mouseup",()=>this.updateCursorPositionCache()),(l=this._inputRef)==null||l.addEventListener("focus",()=>this.updateCursorPositionCache()),(c=this._inputRef)==null||c.addEventListener("blur",()=>this.updateCursorPositionCache()),document.addEventListener("selectionchange",()=>this.updateCursorPositionCache())}detachEventListeners(){var t,r,o,s,i,a,l,c;(t=this._inputRef)==null||t.removeEventListener("input",this._boundInputCallback),(r=this._inputRef)==null||r.removeEventListener("scroll",this._boundScrollCallback),(o=this._inputRef)==null||o.removeEventListener("keydown",this._boundKeydownCallback),(s=this._inputRef)==null||s.removeEventListener("wheel",this._boundWheelCallback),(i=this._inputRef)==null||i.removeEventListener("keyup",()=>this.updateCursorPositionCache()),(a=this._inputRef)==null||a.removeEventListener("mouseup",()=>this.updateCursorPositionCache()),(l=this._inputRef)==null||l.removeEventListener("focus",()=>this.updateCursorPositionCache()),(c=this._inputRef)==null||c.removeEventListener("blur",()=>this.updateCursorPositionCache()),document.removeEventListener("selectionchange",()=>this.updateCursorPositionCache())}updateCursorPositionCache(){if(!this._inputRef){this._cursorLine=null,this._cursorColumn=null,this._lastCaretOffset=null;return}const t=window.getSelection();if(!t||t.rangeCount===0||!t.isCollapsed){this._cursorLine=null,this._cursorColumn=null,this._lastCaretOffset=null;return}const r=pr(this._inputRef);if(r===this._lastCaretOffset)return;this._lastCaretOffset=r;const o=ln(this._inputRef);let s=0,i=0,a=0;for(;a<r;a++)o[a]===`
`?(s++,i=0):i++;this._cursorLine=s+1,this._cursorColumn=i+1,this.updateEditorZoom()}showCursorInfo(){return this._cursorLine!==null&&this._cursorColumn!==null?`LN:${this._cursorLine} COL:${this._cursorColumn} | `:""}updateEditorZoom(){const t=Math.floor(this._editorZoom*100);this.style.setProperty("--editor-zoom",`${t}%`),this.shadowRoot&&this.shadowRoot.host.style.setProperty("--editor-zoom",`${t}%`),this._inputRef&&(this._inputRef.style.fontSize=`${this._editorZoom}rem`),this._highlightRef&&(this._highlightRef.style.fontSize=`${this._editorZoom}rem`),this._zoomPlugin.setAttribute("dataPlugin",`${t}%`)}handleInputChange(t){if(!this._inputRef)return;const r=ln(this._inputRef),o=pr(this._inputRef);let s=0;for(;s<this._lastText.length&&s<r.length&&this._lastText[s]===r[s];)s++;let i=this._lastText.length-1,a=r.length-1;for(;i>=s&&a>=s&&this._lastText[i]===r[a];)i--,a--;i>=s&&this._pieceTable.delete(s,i-s+1),a>=s&&this._pieceTable.insert(s,r.slice(s,a+1)),this._lastText=r,this.renderHighlight([]),Ko(this._inputRef,o),this.updateCursorPositionCache()}handleKeyDown(t){t.key==="Tab"&&(t.preventDefault(),document.execCommand("insertText",!1,"    ")),t.key==="Enter"&&(t.preventDefault(),document.execCommand("insertLineBreak")),setTimeout(()=>this.updateCursorPositionCache(),0)}renderHighlight(t){var r;this._highlightRef&&(this._pieceTable.getText(),(r=this._client)==null||r.postMessage({type:"execute",method:"recycle",params:{uri:this._sourceUri,deltas:t}}))}syncScroll(){this._inputRef&&this._highlightRef&&(this._highlightRef.scrollTop=this._inputRef.scrollTop,this._highlightRef.scrollLeft=this._inputRef.scrollLeft)}render(){if(!this._hasInitialized)throw new Error("call initialize() on SourceEditorElement before rendering.");const t=this._pieceTable.getText();this.shadowRoot.innerHTML=`
            <div class="editor-shell">
                <pre class="highlight-layer"></pre>
                <div class="input-layer" contenteditable="true" spellcheck="false"></div>
            </div>
        `,this._highlightRef=this.shadowRoot.querySelector(".highlight-layer"),this._inputRef=this.shadowRoot.querySelector(".input-layer"),this._inputRef&&(this._inputRef.textContent=t,this._lastText=t),this.attachEventListeners(),this.updateEditorZoom(),this.renderHighlight([]),this.updateCursorPositionCache()}}customElements.define("source-editor",es);class ts{constructor(n=[],t=[]){g(this,"nodes",new Map);g(this,"connections",new Map);n.forEach(r=>this.nodes.set(r.id,r)),t.forEach(r=>this.connect(r.from,r.to))}static connectionKey(n,t){return[n.nodeId,n.clickspotId,t.nodeId,t.clickspotId].sort().join("|")}getNodes(){return Array.from(this.nodes.values())}getAllConnections(){return Array.from(this.connections.values()).flatMap(n=>Array.from(n))}getConnections(n){const t=new Set;for(const r of this.connections.values())for(const o of r)(o.from.nodeId===n||o.to.nodeId===n)&&t.add(o);return t}addNode(n){this.nodes.set(n.id,n)}removeNode(n){this.nodes.delete(n);for(const[t,r]of Array.from(this.connections.entries()))for(const o of r)(o.from.nodeId===t||o.to.nodeId===t)&&r.delete(o),r.size===0&&this.connections.delete(t)}updateNodePosition(n,t){const r=this.nodes.get(n);r&&(r.position=t)}setParent(n,t){const r=this.nodes.get(n);r&&(r.parentId=t)}connect(n,t){var a,l;if(n.nodeId===t.nodeId)return;let r=this.connections.get(n.nodeId);r||(r=new Set,this.connections.set(n.nodeId,r)),r.add({from:n,to:t});const o=document.querySelector("program-tree");o&&(o.setNodeConnected(n.nodeId,n.clickspotId,!0),o.setNodeConnected(t.nodeId,t.clickspotId,!0));var s=(a=this.nodes.get(n.nodeId))==null?void 0:a.clickspots.find(c=>c.id===n.clickspotId);s&&(s.isConnected=!0);var i=(l=this.nodes.get(t.nodeId))==null?void 0:l.clickspots.find(c=>c.id===t.clickspotId);i&&(i.isConnected=!0)}disconnect(n){var o,s;for(const[i,a]of this.connections.entries())for(const l of a)if(l.from.nodeId===n.nodeId&&l.from.clickspotId===n.clickspotId||l.to.nodeId===n.nodeId&&l.to.clickspotId===n.clickspotId){const c=document.querySelector("program-tree");c&&(c.setNodeConnected(l.from.nodeId,l.from.clickspotId,!1),c.setNodeConnected(l.to.nodeId,l.to.clickspotId,!1));var t=(o=this.nodes.get(l.from.nodeId))==null?void 0:o.clickspots.find(d=>d.id===l.from.clickspotId);t&&(t.isConnected=!1);var r=(s=this.nodes.get(l.to.nodeId))==null?void 0:s.clickspots.find(d=>d.id===l.to.clickspotId);r&&(r.isConnected=!1),a.delete(l),a.size===0&&this.connections.delete(i);break}}load(n,t){this.nodes.clear(),this.connections.clear(),n.forEach(r=>this.nodes.set(r.id,r)),t.forEach(r=>this.connect(r.from,r.to))}}const ns=`
    :host {
        position: absolute;
    }

    .node {
        margin: 1rem;
        height: 100px;
        width: 200px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        -webkit-user-select: none;
        user-select: none;
        background: none;
        border-radius: var(--corner-radius);
        will-change: transform;
    }

    .node-header {
        font-size: 8pt;
        width: 100%;
        border-radius: var(--corner-radius) var(--corner-radius) 0 0;
        border: 1px solid var(--node-border);
        background: var(--keyword);
        display: flex;
        flex-direction: row;
        align-items: center;
    }
        .node-header .node-icon {
            height: 15px;
            padding: 0 1px;
        }

    .node-body {
        border-radius: 0 0 var(--corner-radius) var(--corner-radius);
        border: 1px solid var(--node-border);
        border-top: none;
        background: var(--dark-background-e);
        flex: 1;
        width: 100%;
    }

    .node-clickspot-container {
        position: absolute;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: space-evenly;
    }
        .node-clickspot-container.left {
            left: 0;
            top: 0;
            transform: translateX(-50%);
        }
        .node-clickspot-container.right {
            right: 0;
            top: 0;
            transform: translateX(50%);
        }
        .node-clickspot-container.bottom {
            height: initial;
            width: 100%;
            flex-direction: row;
            bottom: 0;
            left: 0;
            transform: translateY(50%);
        }

    .node-clickspot {
        aspect-ratio: 1 / 1;
        width: var(--clickspot-width);
        background: var(--light-background-d);
        border: dashed 1px var(--light-background-ll);
        border-radius: 50%;
    }
        .node-clickspot.connected {
            background: var(--accent);
            border-color: var(--accent-hovered);
        }
        .node-clickspot:hover {
            background: var(--light-background);
        }
        .node-clickspot.connected:hover {
            background: var(--accent-hovered);
        }
`,Nr=new CSSStyleSheet;Nr.replaceSync(ns);class rs extends HTMLElement{constructor(){super();g(this,"onMove");g(this,"onConnectStart");g(this,"onConnectEnd");g(this,"onDisconnect");g(this,"onTempLine");g(this,"isClickspotConnected");g(this,"screenToWorld");g(this,"worldToScreen");g(this,"_areCallbacksSet",!1);g(this,"_contentRef");g(this,"_nodeId","");g(this,"_position",{x:0,y:0});g(this,"_clickspots",[]);g(this,"_isDragging",!1);g(this,"_dragOffset",{x:0,y:0});this.attachShadow({mode:"open"}),this.shadowRoot.adoptedStyleSheets=[Nr]}static get observedAttributes(){return["id","x","y"]}setCallbacks(t){Object.assign(this,t),this._areCallbacksSet=!0}connectedCallback(){this.render()}attributeChangedCallback(t,r,o){t==="node-id"&&o&&(this._nodeId=o),this.render()}set data(t){this._nodeId=t.nodeId,this._position=t.position,this._clickspots=t.clickspots,this._isDragging=!1,this._dragOffset={x:0,y:0},this.render()}elementFromPoint(t,r){const o=this.shadowRoot.elementFromPoint(t,r);return o||null}clickspotFromId(t){return this.shadowRoot.querySelector(`#${t}`)}getBoundingClientRect(){const t=this.shadowRoot.querySelector(`#${this._nodeId}`);return t?t.getBoundingClientRect():new DOMRect(0,0,0,0)}getRealNode(){return this.shadowRoot.querySelector(`#${this._nodeId}`)}updateTransform(t){this._position=t,this._contentRef&&(this._contentRef.style.transform=`translate3d(${this._position.x}px, ${this._position.y}px, 0)`)}setConnected(t,r){const o=this.clickspotFromId(t);o&&o.classList.toggle("connected",r)}attachEventListeners(){var t,r;(t=this.shadowRoot.querySelector(".node-header"))==null||t.addEventListener("mousedown",o=>{this.startNodeDrag(o)}),(r=this.shadowRoot.querySelectorAll(".node-clickspot"))==null||r.forEach(o=>{o.addEventListener("mousedown",s=>{this.handleClickspotMouseDown(o.getAttribute("id"),s)})})}getLocationByClassList(t){return t.contains("left")?"left":t.contains("right")?"right":t.contains("bottom")?"bottom":null}startNodeDrag(t){if(t.button!==0)return;this._isDragging=!0;const r=this.screenToWorld({x:t.clientX,y:t.clientY});this._dragOffset={x:r.x-this._position.x,y:r.y-this._position.y};const o=i=>{var l;if(!this._isDragging)return;const a=this.screenToWorld({x:i.clientX,y:i.clientY});(l=this.onMove)==null||l.call(this,{x:a.x-this._dragOffset.x,y:a.y-this._dragOffset.y})},s=()=>{this._isDragging=!1,document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",s)}handleClickspotMouseDown(t,r){if(r.button===0)if(this.isClickspotConnected({nodeId:this._nodeId,clickspotId:t,location:null}))this.onDisconnect({nodeId:this._nodeId,clickspotId:t,location:null});else{const o=r.target.closest(".node-clickspot");if(!o){this.onTempLine(null);return}this._isDragging=!0;const s=o.getBoundingClientRect(),i={x:s.left+s.width/2,y:s.top+s.height/2},a=this.screenToWorld(i),l=r.target.closest(".node");if(!l){this.onTempLine(null);return}const c=l.getAttribute("id");if(!c){this.onTempLine(null);return}const d=o.closest(".node-clickspot-container");if(!d){this.onTempLine(null);return}const f=this.getLocationByClassList(d.classList);this.onConnectStart({nodeId:c,clickspotId:t,location:f});const u=h=>{if(!this._isDragging){this.onTempLine(null);return}const v={x:h.clientX,y:h.clientY},_=this.screenToWorld(v);this.onTempLine([{start:{x:a.x,y:a.y},end:{x:_.x,y:_.y}},f])},p=h=>{this._isDragging=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",p);const v={x:h.clientX,y:h.clientY},_=Array.from(this.parentElement.querySelectorAll("tree-node"));let b=null,m=null;for(const $ of _){const O=$.getBoundingClientRect();if(v.x>=O.left&&v.x<=O.right&&v.y>=O.top&&v.y<=O.bottom){const Y=$.elementFromPoint(v.x,v.y);if(Y&&Y.classList.contains("node-clickspot")&&!Y.classList.contains("connected")){b=$.getRealNode(),m=Y;break}}}if(!b){this.onTempLine(null);return}if(!m||!m.classList.contains("node-clickspot")||m.classList.contains("connected")){this.onTempLine(null);return}const S=m.getAttribute("id"),E=b.getAttribute("id");if(!S||!E){this.onTempLine(null);return}const M=m.closest(".node-clickspot-container");if(!M){this.onTempLine(null);return}const w=this.getLocationByClassList(M.classList);E&&E!==c&&this.onConnectEnd({nodeId:c,clickspotId:t,location:f},{nodeId:E,clickspotId:S,location:w}),this.onTempLine(null)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",p)}}render(){this.shadowRoot.innerHTML=`
            <div
                id="${this._nodeId}"
                class="node shadowed"
            >
                <div class="node-header">
                    <img src="/res/expression.svg" class="node-icon" />
                    <span>Exponentiation Expression</span>
                </div>
                <div class="node-body">
                    ${["left","bottom","right"].map(t=>`
                        <div class="node-clickspot-container ${t}">
                            ${this._clickspots.filter(r=>r.location===t).map(r=>`
                                <button
                                    class="node-clickspot"
                                    id="${r.id}"
                                    class="${r.isConnected?"connected":""}"
                                ></button>
                            `).join("")}
                        </div>
                    `).join("")}
                    <div class="node-content">
                        <slot></slot>
                    </div>
                </div>
            </div>
        `,this._contentRef=this.shadowRoot.querySelector(`#${this._nodeId}`),this.updateTransform(this._position),this._areCallbacksSet&&this.attachEventListeners()}}customElements.define("tree-node",rs);const os=`
    .wrapper {
        transform: translate(calc(-1 * var(--transform-size) / 2), calc(-1 * var(--transform-size) / 2));
    }
    .container {
        position: absolute;
        width: var(--transform-size);
        height: var(--transform-size);
        user-select: none;
        overflow: hidden;
        will-change: transform, scale, zoom;
        transform-origin: 50% 50%;
    }
`,qr=new CSSStyleSheet;qr.replaceSync(os);const ht=class ht extends HTMLElement{constructor(){super();g(this,"_container");g(this,"_scale",1);g(this,"_scalePlugin");g(this,"_isPanning",!1);g(this,"_position",{x:0,y:0});g(this,"_lastPosition",{x:0,y:0});this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onWheel=this.onWheel.bind(this),this.attachShadow({mode:"open"}),this.shadowRoot.adoptedStyleSheets=[qr],this._scalePlugin=document.querySelector("#ast-zoom-plugin")}connectedCallback(){this.render(),this.updateTransform(),this._container.addEventListener("mousedown",this.onMouseDown),this._container.addEventListener("wheel",this.onWheel,{passive:!1})}disconnectedCallback(){this._container.removeEventListener("mousedown",this.onMouseDown),this._container.removeEventListener("wheel",this.onWheel),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)}screenToWorld(t){return{x:(t.x-this._position.x)/this._scale,y:(t.y-this._position.y)/this._scale}}worldToScreen(t){return{x:t.x*this._scale+this._position.x,y:t.y*this._scale+this._position.y}}getTransform(){return{scale:this._scale,position:{...this._position}}}updateTransform(){this._container.style.transform=`translate(${this._position.x}px, ${this._position.y}px) scale(${this._scale})`,this._scalePlugin.setAttribute("dataPlugin",`${Math.floor(parseFloat(this._scale.toFixed(2))*100)}%`)}onMouseDown(t){let r=t.target;for(;r;){if(r.nodeName.toLowerCase()==="tree-node")return;r=r.parentElement}this._isPanning=!0,this._lastPosition={x:t.clientX-this._position.x,y:t.clientY-this._position.y},window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),this._container.style.cursor="grabbing"}onMouseMove(t){this._isPanning&&(this._position.x=t.clientX-this._lastPosition.x,this._position.y=t.clientY-this._lastPosition.y,this.updateTransform())}onMouseUp(){this._isPanning=!1,window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),this._container.style.cursor="grab",setTimeout(()=>{this._isPanning||(this._container.style.cursor="default")},1e3)}onWheel(t){t.preventDefault();const r=-t.deltaY*.001,o=Math.min(ht.maxScale,Math.max(ht.minScale,this._scale+r)),s=this.getBoundingClientRect(),i=t.clientX-s.left,a=t.clientY-s.top,l=i-this._position.x,c=a-this._position.y,d=o/this._scale;this._position.x=i-l*d,this._position.y=a-c*d,this._scale=o,this.updateTransform()}render(){this.shadowRoot.innerHTML=`
            <div class="wrapper">
                <div class="container">
                    <slot name="transformed-view-slot"></slot>
                </div>
            </div>
        `,this._container=this.shadowRoot.querySelector(".container")}};g(ht,"minScale",.2),g(ht,"maxScale",3);let Ln=ht;customElements.define("transformed-view",Ln);const ss=`
    transformed-view {
        display: block;
        width: 100%;
        height: 100%;
    }
    #connections-canvas {
        position:absolute;
        top:0;
        left:0;
        width: var(--transform-size);
        height: var(--transform-size);
        pointer-events:none;
    }
    #transform-content {
        position: absolute;
        top: 0;
        left: 0;
        width: var(--transform-size);
        height: var(--transform-size);
        transform: translate(50%, 50%);
    }
`,zr=new CSSStyleSheet;zr.replaceSync(ss);class Or extends HTMLElement{constructor(){super();g(this,"_nodeManager");g(this,"_transformedViewRef");g(this,"_contentRef");g(this,"_connectionsCanvas");g(this,"_canvasRef");this._nodeManager=new ts([{id:"node1",label:"Hello, 123123",position:{x:100,y:100},clickspots:[{id:"clickspot-a",location:"left"},{id:"clickspot-b",location:"right"},{id:"clickspot-e",location:"bottom"}]},{id:"node2",label:"This is a new test node",position:{x:400,y:200},clickspots:[{id:"clickspot-c",location:"left"},{id:"clickspot-d",location:"bottom"}]},{id:"node3",label:"Testing testing testing",position:{x:550,y:400},clickspots:[{id:"clickspot-f",location:"left"},{id:"clickspot-g",location:"left"}]}]),this.attachShadow({mode:"open"}),this.shadowRoot.adoptedStyleSheets=[zr]}connectedCallback(){this.render()}attributeChangedCallback(t,r,o){}setNodeConnected(t,r,o){const s=this.shadowRoot.querySelector(`tree-node[data-node-id="${t}"]`);s&&s.setConnected(r,o)}getClickspotCenterScreen(t,r){const o=this.shadowRoot.querySelector(`tree-node[data-node-id="${t}"]`);if(!o||!this._connectionsCanvas)return null;const s=o.clickspotFromId(r);if(!s)return null;const i=s.getBoundingClientRect(),a=this._connectionsCanvas.getBoundingClientRect();return{x:i.left+i.width/2-a.left,y:i.top+i.height/2-a.top}}isClickspotConnected(t){const r=this._nodeManager.getConnections(t.nodeId);for(const o of r)if(o.from.clickspotId===t.clickspotId||o.to.clickspotId===t.clickspotId)return!0;return!1}handleConnectStart(t){}handleConnectEnd(t,r){t&&(t.nodeId!==r.nodeId||t.clickspotId!==r.clickspotId)&&(this._nodeManager.connect(t,r),this.handleTempLine(null)),this.renderLines()}handleRemoveLines(t){this._nodeManager.disconnect(t),!(!this._connectionsCanvas||!this._canvasRef)&&this.renderLines()}handleNodeMove(t,r){this._nodeManager.updateNodePosition(t,r);const o=this.shadowRoot.querySelector(`tree-node[data-node-id="${t}"]`);o&&o.updateTransform(r),this.renderLines()}clearLines(){!this._connectionsCanvas||!this._canvasRef||this._canvasRef.clearRect(0,0,this._connectionsCanvas.width,this._connectionsCanvas.height)}renderLines(){if(!this._connectionsCanvas||!this._canvasRef||!this._transformedViewRef)return;this.clearLines();const t=this._nodeManager.getAllConnections();for(const r of t){const o=this.getClickspotCenterScreen(r.from.nodeId,r.from.clickspotId),s=this.getClickspotCenterScreen(r.to.nodeId,r.to.clickspotId);!o||!s||!r.from.location||this.drawBezierPathScreen(o,s,r.from.location,r.to.location,"rgb(143, 132, 213)",2,!1)}}handleTempLine(t){var d;if(this.renderLines(),!t||!this._canvasRef)return;const{start:r,end:o}=t[0],s=t[1],i=this.getBoundingClientRect()||{left:0,top:0},a=(d=this._transformedViewRef)==null?void 0:d.getTransform();a&&(r.x*=a.scale,r.y*=a.scale,o.x*=a.scale,o.y*=a.scale);const l={x:r.x-i.left,y:r.y-i.top},c={x:o.x-i.left,y:o.y-i.top};this.drawBezierPathScreen(l,c,s,null,"rgb(171, 167, 200)",2,!0)}getBezierPath(t,r,o){const{start:s,end:i}=t,a=100;let l=o;if(!o&&r){const p=i.x-s.x,h=i.y-s.y,v=Math.atan2(h,p)*180/Math.PI;r==="left"?v>-45&&v<45?l="left":v>=45&&v<=135?l="bottom":l=null:r==="right"?v>135||v<-135?l="right":v>=-135&&v<=-45?l="bottom":l=null:r==="bottom"&&(v>135||v<-135?l="right":v>-45&&v<45?l="left":v>=45&&v<=135&&(l="bottom"))}let c=s.x,d=s.y;r==="left"?c-=a:r==="right"?c+=a:r==="bottom"&&(d+=a);let f=i.x,u=i.y;return l==="left"?f-=a:l==="right"?f+=a:l==="bottom"&&(u+=a),[s.x,s.y,c,d,f,u,i.x,i.y]}drawBezierPathScreen(t,r,o,s,i,a,l){var v;if(!this._canvasRef)return;const c=(v=this._transformedViewRef)==null?void 0:v.getTransform();c&&(t.x/=c.scale,t.y/=c.scale,r.x/=c.scale,r.y/=c.scale);const d=100;let f=t.x,u=t.y;o==="left"?f-=d:o==="right"?f+=d:o==="bottom"&&(u+=d);let p=r.x,h=r.y;s==="left"?p-=d:s==="right"?p+=d:s==="bottom"&&(h+=d),this._canvasRef.save(),l?this._canvasRef.setLineDash([4,4]):this._canvasRef.setLineDash([]),this._canvasRef.beginPath(),this._canvasRef.moveTo(t.x,t.y),this._canvasRef.bezierCurveTo(f,u,p,h,r.x,r.y),this._canvasRef.strokeStyle=i,this._canvasRef.lineWidth=a,this._canvasRef.stroke(),this._canvasRef.restore()}resizeCanvas(){if(!this._connectionsCanvas)return;const t=this._connectionsCanvas.parentElement;if(t){const r=t.getBoundingClientRect();this._connectionsCanvas.width=r.width,this._connectionsCanvas.height=r.height}}renderNodes(){if(!this._contentRef)return;const t=new Map;this._contentRef.querySelectorAll("tree-node").forEach(o=>{const s=o.getAttribute("id");s&&t.set(s,o)});const r=new Set;for(const o of this._nodeManager.getNodes()){r.add(o.id);let s=t.get(o.id);s||(s=document.createElement("tree-node"),s.data={nodeId:o.id,position:o.position,clickspots:o.clickspots},s.setCallbacks({onMove:a=>this.handleNodeMove(o.id,a),onConnectStart:a=>this.handleConnectStart(a),onConnectEnd:(a,l)=>this.handleConnectEnd(a,l),onDisconnect:a=>this.handleRemoveLines(a),onTempLine:a=>this.handleTempLine(a),isClickspotConnected:a=>this.isClickspotConnected(a),screenToWorld:a=>{var l;return((l=this._transformedViewRef)==null?void 0:l.screenToWorld(a))??a},worldToScreen:a=>{var l;return((l=this._transformedViewRef)==null?void 0:l.worldToScreen(a))??a}}),s.setAttribute("data-node-id",o.id),this._contentRef.appendChild(s));const i=s.querySelector(".node-content");i&&(i.textContent=o.label)}t.forEach((o,s)=>{r.has(s)||o.remove()})}render(){this.shadowRoot.innerHTML=`
            <transformed-view id="program-tree-transformed-view">
                <div id="transform-content" slot="transformed-view-slot">
                    <canvas id="connections-canvas"></canvas>
                </div>
            </transformed-view>
        `,this._transformedViewRef=this.shadowRoot.querySelector("#program-tree-transformed-view"),this._contentRef=this._transformedViewRef.querySelector("#transform-content"),this._connectionsCanvas=this._contentRef.querySelector("#connections-canvas"),this._canvasRef=this._connectionsCanvas.getContext("2d"),window.addEventListener("resize",()=>{this.resizeCanvas(),this.renderLines()}),this.resizeCanvas(),this.renderLines(),this.renderNodes()}}g(Or,"observedAttributes",[]);customElements.define("program-tree",Or);class is extends HTMLElement{constructor(){super(...arguments);g(this,"tabsContent");g(this,"pages",[])}connectedCallback(){this.render(),window.addEventListener("popstate",r=>{var s;const o=((s=r.state)==null?void 0:s.tab)??this.getTabIndexFromUrl();typeof o=="number"&&o>=0&&o<this.pages.length&&this.activatePage(o,!1)}),window.addEventListener("hashchange",()=>{const r=this.getTabIndexFromUrl();typeof r=="number"&&r>=0&&r<this.pages.length&&this.activatePage(r,!1)});const t=this.getTabIndexFromUrl();typeof t=="number"&&t>=0&&t<this.pages.length&&this.activatePage(t,!1)}getTabIndexFromUrl(){let t=window.location.hash;const r=Array.from(this.querySelectorAll("my-tab"));for(let o=0;o<r.length;o++){const s=r[o].getAttribute("route");if(s&&t.includes(s))return o}return 0}activatePage(t,r=!0){if(this.pages.forEach((o,s)=>{const i=this.tabsContent.querySelectorAll("input"),a=s===t;o.classList.toggle("active",a),i[s]&&(i[s].checked=a)}),r){const s=Array.from(this.querySelectorAll("my-tab"))[t].getAttribute("route")||"";window.location.hash=s}}render(){const t=this.querySelector("my-header");if(t){const s=t.children[0];if(s){let i=document.createElement("div");i.className="tabs-bar",s.classList.add("tabs-header"),i.appendChild(s),this.prepend(i)}t.remove()}this.tabsContent=document.createElement("div"),this.tabsContent.className="tabs-content";const r=this.querySelector(".tabs-bar");r?r.append(this.tabsContent):this.prepend(this.tabsContent),Array.from(this.querySelectorAll("my-tab")).forEach((s,i)=>{const a=s.getAttribute("label")||`Tab ${i+1}`,l=`tab-${i}`,c=`tabpanel-${i}`,d=document.createElement("input");d.type="radio",d.id=l,d.checked=i===0,d.addEventListener("change",()=>this.activatePage(i,!0));const f=document.createElement("label");f.htmlFor=l,f.textContent=a;const u=document.createElement("span");u.className="tab-radio-wrapper",u.appendChild(d),u.appendChild(f),this.tabsContent.appendChild(u),s.classList.add("page"),s.setAttribute("id",c),i===0&&s.classList.add("active"),this.pages.push(s)})}}customElements.define("my-tabview",is);class as extends HTMLElement{}customElements.define("my-tab",as);class ls extends HTMLElement{}customElements.define("my-header",ls);const Dr=`
    :host {
        display: block;
        width: 100%;
        height: 100%;
    }
    
    :host *, :host *::before, :host *::after {
        box-sizing: border-box;
    }

    pane-view {
        overflow-x: hidden;
    }

    .pane-row {
        display: grid;
        grid-template-rows: 1fr;
        will-change: grid-template-columns;
        height: 100%;
        width: 100%;
    }

    .pane-column {
        width: 100%;
        position: relative;
        background: var(--dark-background-d);
        z-index: 1;
    }
        .pane-column.hidden {
            display: none;
        }
    
    .handle {
        width: 1px;
        cursor: col-resize;
        background: var(--node-border);
        z-index: 3;
        height: 100%;
        transition: background-color 100ms ease-in-out;
    }
        .handle:hover {
            background: var(--accent-hovered);
            width: 2px;
        }
        .handle.dragging {
            background: var(--accent-selected);
        }

    .pane-descriptor {
        padding: 0.5rem;
        background: var(--dark-background-e);
        border-top: 1px solid var(--node-border);
        border-bottom: 1px solid var(--node-border);
        width: 100%;
        position: relative;
        z-index: 2;
    }
`,cs=new CSSStyleSheet;cs.replaceSync(Dr);const gr="resizable-pane-widths";class ds extends HTMLElement{constructor(){super();g(this,"columns",[]);g(this,"handles",[]);g(this,"widths",[]);g(this,"draggingIndex",null);g(this,"startX",0);g(this,"startWidths",[]);g(this,"visible",[]);g(this,"originalPanes",[]);g(this,"onHandleMouseDown",t=>{const r=t.target;this.draggingIndex=parseInt(r.dataset.index),this.startX=t.clientX,this.startWidths=this.getCurrentWidths(),r.classList.add("dragging"),t.preventDefault()});g(this,"onMouseMove",t=>{if(this.draggingIndex===null)return;const r=t.clientX-this.startX,o=this.draggingIndex;let s=[...this.startWidths];const i=50;s[o]+=r,s[o+1]-=r;for(let l=o+1;l<s.length;l++)if(s[l]<i){const c=i-s[l];s[l]=i,l+1<s.length&&(s[l+1]-=c)}for(let l=o;l>=0;l--)if(s[l]<i){const c=i-s[l];s[l]=i,l-1>=0&&(s[l-1]-=c)}for(let l=s.length-1;l>=0;l--)s[l]<i&&(s[l]=i);for(let l=0;l<s.length;l++)s[l]<i&&(s[l]=i);const a=s.reduce((l,c)=>l+c,0);this.widths=s.map(l=>l/a),this.applyWidths(),this.startWidths=s,this.startX=t.clientX});g(this,"onMouseUp",t=>{this.draggingIndex!==null&&(this.handles[this.draggingIndex].classList.remove("dragging"),this.saveWidths(),this.draggingIndex=null)})}connectedCallback(){this.originalPanes.length===0&&(this.originalPanes=Array.from(this.querySelectorAll(".pane-column"))),this.loadWidths(),this.render(),this.applyWidths(),this.addHandleEvents()}disconnectedCallback(){this.removeHandleEvents()}setVisiblePanes(t){this.visible=t,this.render(),this.applyWidths(),this.addHandleEvents()}render(){this.innerHTML=`<style>${Dr}</style>`;const t=document.createElement("div");t.className="pane-row",this.columns=[],this.handles=[],this.originalPanes.forEach((r,o)=>{if(Array.from(r.querySelectorAll(".handle")).forEach(s=>s.remove()),this.visible[o]&&(t.appendChild(r),this.columns.push(r),this.columns.length-1<this.visible.filter(Boolean).length-1)){const s=document.createElement("div");s.className="handle",s.dataset.index=(this.columns.length-1).toString(),t.appendChild(s),this.handles.push(s)}}),this.appendChild(t)}addHandleEvents(){this.handles.forEach(t=>{t.addEventListener("mousedown",this.onHandleMouseDown)}),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)}removeHandleEvents(){this.handles.forEach(t=>{t.removeEventListener("mousedown",this.onHandleMouseDown)}),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)}getCurrentWidths(){return this.columns.map(t=>t.getBoundingClientRect().width)}applyWidths(){this.widths.length!==this.columns.length&&(this.widths=Array(this.columns.length).fill(1/this.columns.length));const t=this.querySelector(".pane-row");if(!t)return;let r="";for(let s=0;s<this.columns.length;s++)r+=`${this.widths[s]*100}% `,s<this.columns.length-1&&(r+="1px ");t.style.gridTemplateColumns=r.trim();let o=1;this.columns.forEach(s=>{s.classList.contains("hidden")||(s.style.gridColumn=`${o}`,o+=2)}),this.handles.forEach((s,i)=>{s.style.gridColumn=`${2*(i+1)}`})}saveWidths(){localStorage.setItem(gr,JSON.stringify(this.widths))}loadWidths(){const t=localStorage.getItem(gr);if(t)try{const r=JSON.parse(t);Array.isArray(r)&&r.length===this.columns.length&&(this.widths=r)}catch{}}}customElements.define("pane-view",ds);const Br=!1;var mn=Array.isArray,us=Array.prototype.indexOf,Wn=Array.from,cn=Object.keys,wt=Object.defineProperty,Te=Object.getOwnPropertyDescriptor,Wr=Object.getOwnPropertyDescriptors,fs=Object.prototype,hs=Array.prototype,Hn=Object.getPrototypeOf,mr=Object.isExtensible;function Mt(e){return typeof e=="function"}function vs(e){return e()}function dn(e){for(var n=0;n<e.length;n++)e[n]()}function ps(){var e,n,t=new Promise((r,o)=>{e=r,n=o});return{promise:t,resolve:e,reject:n}}const fe=2,jn=4,_n=8,Xt=16,De=32,ot=64,Hr=128,ge=256,un=512,J=1024,ae=2048,Xe=4096,ye=8192,st=16384,Fn=32768,Un=65536,_r=1<<17,gs=1<<18,Vn=1<<19,Yn=1<<20,$n=1<<21,Xn=1<<22,Qe=1<<23,Ue=Symbol("$state"),Gn=Symbol("legacy props"),ms=Symbol(""),Zn=new class extends Error{constructor(){super(...arguments);g(this,"name","StaleReactionError");g(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}},jr=3,kt=8;function _s(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Fr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function bs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ys(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ws(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ks(e){throw new Error("https://svelte.dev/e/effect_orphan")}function xs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Cs(){throw new Error("https://svelte.dev/e/hydration_failed")}function Es(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ts(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ss(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ls(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const bn=1,yn=2,Ur=4,$s=8,Rs=16,Is=1,Ms=2,Ps=4,As=8,Ns=16,qs=1,zs=2,Vr="[",Jn="[!",Qn="]",Ke={},ee=Symbol(),Os="http://www.w3.org/1999/xhtml";function Gt(e){console.warn("https://svelte.dev/e/hydration_mismatch")}let A=!1;function be(e){A=e}let D;function me(e){if(e===null)throw Gt(),Ke;return D=e}function nt(){return me(Me(D))}function x(e){if(A){if(Me(D)!==null)throw Gt(),Ke;D=e}}function X(e=1){if(A){for(var n=e,t=D;n--;)t=Me(t);D=t}}function Rn(){for(var e=0,n=D;;){if(n.nodeType===kt){var t=n.data;if(t===Qn){if(e===0)return n;e-=1}else(t===Vr||t===Jn)&&(e+=1)}var r=Me(n);n.remove(),n=r}}function Yr(e){if(!e||e.nodeType!==kt)throw Gt(),Ke;return e.data}function Xr(e){return e===this.v}function Ds(e,n){return e!=e?n==n:e!==n||e!==null&&typeof e=="object"||typeof e=="function"}function Gr(e){return!Ds(e,this.v)}let Et=!1,Bs=!1;function Ws(){Et=!0}let H=null;function fn(e){H=e}function Re(e,n=!1,t){H={p:H,c:null,e:null,s:e,x:null,l:Et&&!n?{s:null,u:null,$:[]}:null}}function Ie(e){var n=H,t=n.e;if(t!==null){n.e=null;for(var r of t)vo(r)}return e!==void 0&&(n.x=e),H=n.p,e??{}}function Zt(){return!Et||H!==null&&H.l===null}const Hs=new WeakMap;function js(e){var n=I;if(n===null)return P.f|=Qe,e;if((n.f&Fn)===0){if((n.f&Hr)===0)throw!n.parent&&e instanceof Error&&Zr(e),e;n.b.error(e)}else Kn(e,n)}function Kn(e,n){for(;n!==null;){if((n.f&Hr)!==0)try{n.b.error(e);return}catch(t){e=t}n=n.parent}throw e instanceof Error&&Zr(e),e}function Zr(e){const n=Hs.get(e);n&&(wt(e,"message",{value:n.message}),wt(e,"stack",{value:n.stack}))}const Fs=typeof requestIdleCallback>"u"?e=>setTimeout(e,1):requestIdleCallback;let Bt=[],Wt=[];function Jr(){var e=Bt;Bt=[],dn(e)}function Qr(){var e=Wt;Wt=[],dn(e)}function wn(e){Bt.length===0&&queueMicrotask(Jr),Bt.push(e)}function Us(e){Wt.length===0&&Fs(Qr),Wt.push(e)}function Vs(){Bt.length>0&&Jr(),Wt.length>0&&Qr()}function Ys(){for(var e=I.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&_s(),e}function kn(e){var n=fe|ae,t=P!==null&&(P.f&fe)!==0?P:null;return I===null||t!==null&&(t.f&ge)!==0?n|=ge:I.f|=Vn,{ctx:H,deps:null,effects:null,equals:Xr,f:n,fn:e,reactions:null,rv:0,v:ee,wv:0,parent:t??I,ac:null}}function Xs(e,n){let t=I;t===null&&bs();var r=t.b,o=void 0,s=Ht(ee),i=null,a=!P;return oi(()=>{try{var l=e()}catch(p){l=Promise.reject(p)}var c=()=>l;o=(i==null?void 0:i.then(c,c))??Promise.resolve(l),i=o;var d=ie,f=r.pending;a&&(r.update_pending_count(1),f||d.increment());const u=(p,h=void 0)=>{i=null,f||d.activate(),h?h!==Zn&&(s.f|=Qe,jt(s,h)):((s.f&Qe)!==0&&(s.f^=Qe),jt(s,p)),a&&(r.update_pending_count(-1),f||d.decrement()),to()};if(o.then(u,p=>u(null,p||"unknown")),d)return()=>{queueMicrotask(()=>d.neuter())}}),new Promise(l=>{function c(d){function f(){d===o?l(s):c(o)}d.then(f,f)}c(o)})}function er(e){const n=kn(e);return n.equals=Gr,n}function Kr(e){var n=e.effects;if(n!==null){e.effects=null;for(var t=0;t<n.length;t+=1)Le(n[t])}}function Gs(e){for(var n=e.parent;n!==null;){if((n.f&fe)===0)return n;n=n.parent}return null}function tr(e){var n,t=I;$e(Gs(e));try{Kr(e),n=To(e)}finally{$e(t)}return n}function eo(e){var n=tr(e);if(e.equals(n)||(e.v=n,e.wv=Co()),!it)if(je!==null)je.set(e,e.v);else{var t=(Fe||(e.f&ge)!==0)&&e.deps!==null?Xe:J;Q(e,t)}}function Zs(e,n,t){const r=Zt()?kn:er;if(n.length===0){t(e.map(r));return}var o=ie,s=I,i=Js(),a=Ys();Promise.all(n.map(l=>Xs(l))).then(l=>{o==null||o.activate(),i();try{t([...e.map(r),...l])}catch(c){(s.f&st)===0&&Kn(c,s)}o==null||o.deactivate(),to()}).catch(l=>{a.error(l)})}function Js(){var e=I,n=P,t=H;return function(){$e(e),_e(n),fn(t)}}function to(){$e(null),_e(null),fn(null)}const nn=new Set;let ie=null,je=null,br=new Set,hn=[];function no(){const e=hn.shift();hn.length>0&&queueMicrotask(no),e()}let dt=[],xn=null,In=!1;var Ut,_t,bt,We,Vt,Yt,Ze,yt,He,qe,Je,Oe,ro,oo,Mn;const gn=class gn{constructor(){ne(this,Oe);ne(this,Ut,new Map);ne(this,_t,new Map);ne(this,bt,new Set);ne(this,We,0);ne(this,Vt,null);ne(this,Yt,!1);ne(this,Ze,[]);ne(this,yt,[]);ne(this,He,[]);ne(this,qe,[]);ne(this,Je,[]);g(this,"skipped_effects",new Set)}capture(n,t){L(this,_t).has(n)||L(this,_t).set(n,t),L(this,Ut).set(n,n.v)}activate(){ie=this}deactivate(){ie=null;for(const n of br)if(br.delete(n),n(),ie!==null)break}neuter(){se(this,Yt,!0)}flush(){dt.length>0?this.flush_effects():It(this,Oe,Mn).call(this),ie===this&&(L(this,We)===0&&nn.delete(this),this.deactivate())}flush_effects(){var n=vt;In=!0;try{var t=0;for(kr(!0);dt.length>0;){if(t++>1e3){var r,o;Qs()}It(this,Oe,ro).call(this,dt),et.clear()}}finally{In=!1,kr(n),xn=null}}increment(){se(this,We,L(this,We)+1)}decrement(){if(se(this,We,L(this,We)-1),L(this,We)===0){for(const n of L(this,He))Q(n,ae),Ve(n);for(const n of L(this,qe))Q(n,ae),Ve(n);for(const n of L(this,Je))Q(n,ae),Ve(n);se(this,He,[]),se(this,qe,[]),this.flush()}else this.deactivate()}add_callback(n){L(this,bt).add(n)}settled(){return(L(this,Vt)??se(this,Vt,ps())).promise}static ensure(n=!0){if(ie===null){const t=ie=new gn;nn.add(ie),n&&gn.enqueue(()=>{ie===t&&t.flush()})}return ie}static enqueue(n){hn.length===0&&queueMicrotask(no),hn.unshift(n)}};Ut=new WeakMap,_t=new WeakMap,bt=new WeakMap,We=new WeakMap,Vt=new WeakMap,Yt=new WeakMap,Ze=new WeakMap,yt=new WeakMap,He=new WeakMap,qe=new WeakMap,Je=new WeakMap,Oe=new WeakSet,ro=function(n){var s;dt=[];var t=null;if(nn.size>1){t=new Map,je=new Map;for(const[i,a]of L(this,Ut))t.set(i,{v:i.v,wv:i.wv}),i.v=a;for(const i of nn)if(i!==this)for(const[a,l]of L(i,_t))t.has(a)||(t.set(a,{v:a.v,wv:a.wv}),a.v=l)}for(const i of n)It(this,Oe,oo).call(this,i);if(L(this,Ze).length===0&&L(this,We)===0){var r=L(this,He),o=L(this,qe);se(this,He,[]),se(this,qe,[]),se(this,Je,[]),It(this,Oe,Mn).call(this),yr(r),yr(o),(s=L(this,Vt))==null||s.resolve()}else{for(const i of L(this,He))Q(i,J);for(const i of L(this,qe))Q(i,J);for(const i of L(this,Je))Q(i,J)}if(t){for(const[i,{v:a,wv:l}]of t)i.wv<=l&&(i.v=a);je=null}for(const i of L(this,Ze))pt(i);for(const i of L(this,yt))pt(i);se(this,Ze,[]),se(this,yt,[])},oo=function(n){var d;n.f^=J;for(var t=n.first;t!==null;){var r=t.f,o=(r&(De|ot))!==0,s=o&&(r&J)!==0,i=s||(r&ye)!==0||this.skipped_effects.has(t);if(!i&&t.fn!==null){if(o)t.f^=J;else if((r&jn)!==0)L(this,qe).push(t);else if(Qt(t))if((r&Xn)!==0){var a=(d=t.b)!=null&&d.pending?L(this,yt):L(this,Ze);a.push(t)}else(t.f&Xt)!==0&&L(this,Je).push(t),pt(t);var l=t.first;if(l!==null){t=l;continue}}var c=t.parent;for(t=t.next;t===null&&c!==null;)t=c.next,c=c.parent}},Mn=function(){if(!L(this,Yt))for(const n of L(this,bt))n();L(this,bt).clear()};let xt=gn;function N(e){var n;const t=xt.ensure(!1);for(;;){if(Vs(),dt.length===0)return t===ie&&t.flush(),xn=null,n;t.flush_effects()}}function Qs(){try{xs()}catch(e){Kn(e,xn)}}function yr(e){var n=e.length;if(n!==0){for(var t=0;t<n;t++){var r=e[t];if((r.f&(st|ye))===0&&Qt(r)){var o=vn;if(pt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?wo(r):r.fn=null),vn>o&&(r.f&Yn)!==0)break}}for(;t<n;t+=1)Ve(e[t])}}function Ve(e){for(var n=xn=e;n.parent!==null;){n=n.parent;var t=n.f;if(In&&n===I&&(t&Xt)!==0)return;if((t&(ot|De))!==0){if((t&J)===0)return;n.f^=J}}dt.push(n)}const et=new Map;function Ht(e,n){var t={f:0,v:e,reactions:null,equals:Xr,rv:0,wv:0};return t}function Be(e,n){const t=Ht(e);return ii(t),t}function Se(e,n=!1,t=!0){var o;const r=Ht(e);return n||(r.equals=Gr),Et&&t&&H!==null&&H.l!==null&&((o=H.l).s??(o.s=[])).push(r),r}function F(e,n,t=!1){P!==null&&(!Ee||(P.f&_r)!==0)&&Zt()&&(P.f&(fe|Xt|Xn|_r))!==0&&!(oe!=null&&oe.includes(e))&&Ls();let r=t?ut(n):n;return jt(e,r)}function jt(e,n){if(!e.equals(n)){var t=e.v;it?et.set(e,n):et.set(e,t),e.v=n,xt.ensure().capture(e,t),(e.f&fe)!==0&&((e.f&ae)!==0&&tr(e),Q(e,(e.f&ge)===0?J:Xe)),e.wv=Co(),so(e,ae),Zt()&&I!==null&&(I.f&J)!==0&&(I.f&(De|ot))===0&&(he===null?ai([e]):he.push(e))}return n}function Tn(e){F(e,e.v+1)}function so(e,n){var t=e.reactions;if(t!==null)for(var r=Zt(),o=t.length,s=0;s<o;s++){var i=t[s],a=i.f;!r&&i===I||((a&ae)===0&&Q(i,n),(a&fe)!==0?so(i,Xe):(a&ae)===0&&Ve(i))}}function ut(e){if(typeof e!="object"||e===null||Ue in e)return e;const n=Hn(e);if(n!==fs&&n!==hs)return e;var t=new Map,r=mn(e),o=Be(0),s=tt,i=a=>{if(tt===s)return a();var l=P,c=tt;_e(null),Cr(s);var d=a();return _e(l),Cr(c),d};return r&&t.set("length",Be(e.length)),new Proxy(e,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Ts();var d=t.get(l);return d===void 0?d=i(()=>{var f=Be(c.value);return t.set(l,f),f}):F(d,c.value,!0),!0},deleteProperty(a,l){var c=t.get(l);if(c===void 0){if(l in a){const d=i(()=>Be(ee));t.set(l,d),Tn(o)}}else F(c,ee),Tn(o);return!0},get(a,l,c){var p;if(l===Ue)return e;var d=t.get(l),f=l in a;if(d===void 0&&(!f||(p=Te(a,l))!=null&&p.writable)&&(d=i(()=>{var h=ut(f?a[l]:ee),v=Be(h);return v}),t.set(l,d)),d!==void 0){var u=y(d);return u===ee?void 0:u}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var d=t.get(l);d&&(c.value=y(d))}else if(c===void 0){var f=t.get(l),u=f==null?void 0:f.v;if(f!==void 0&&u!==ee)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return c},has(a,l){var u;if(l===Ue)return!0;var c=t.get(l),d=c!==void 0&&c.v!==ee||Reflect.has(a,l);if(c!==void 0||I!==null&&(!d||(u=Te(a,l))!=null&&u.writable)){c===void 0&&(c=i(()=>{var p=d?ut(a[l]):ee,h=Be(p);return h}),t.set(l,c));var f=y(c);if(f===ee)return!1}return d},set(a,l,c,d){var S;var f=t.get(l),u=l in a;if(r&&l==="length")for(var p=c;p<f.v;p+=1){var h=t.get(p+"");h!==void 0?F(h,ee):p in a&&(h=i(()=>Be(ee)),t.set(p+"",h))}if(f===void 0)(!u||(S=Te(a,l))!=null&&S.writable)&&(f=i(()=>Be(void 0)),F(f,ut(c)),t.set(l,f));else{u=f.v!==ee;var v=i(()=>ut(c));F(f,v)}var _=Reflect.getOwnPropertyDescriptor(a,l);if(_!=null&&_.set&&_.set.call(d,c),!u){if(r&&typeof l=="string"){var b=t.get("length"),m=Number(l);Number.isInteger(m)&&m>=b.v&&F(b,m+1)}Tn(o)}return!0},ownKeys(a){y(o);var l=Reflect.ownKeys(a).filter(f=>{var u=t.get(f);return u===void 0||u.v!==ee});for(var[c,d]of t)d.v!==ee&&!(c in a)&&l.push(c);return l},setPrototypeOf(){Ss()}})}var wr,io,ao,lo;function Pn(){if(wr===void 0){wr=window,io=/Firefox/.test(navigator.userAgent);var e=Element.prototype,n=Node.prototype,t=Text.prototype;ao=Te(n,"firstChild").get,lo=Te(n,"nextSibling").get,mr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),mr(t)&&(t.__t=void 0)}}function rt(e=""){return document.createTextNode(e)}function ue(e){return ao.call(e)}function Me(e){return lo.call(e)}function C(e,n){if(!A)return ue(e);var t=ue(D);if(t===null)t=D.appendChild(rt());else if(n&&t.nodeType!==jr){var r=rt();return t==null||t.before(r),me(r),r}return me(t),t}function Pt(e,n){if(!A){var t=ue(e);return t instanceof Comment&&t.data===""?Me(t):t}return D}function R(e,n=1,t=!1){let r=A?D:e;for(var o;n--;)o=r,r=Me(r);if(!A)return r;if(t&&(r==null?void 0:r.nodeType)!==jr){var s=rt();return r===null?o==null||o.after(s):r.before(s),me(s),s}return me(r),r}function co(e){e.textContent=""}function uo(){return!1}function fo(e){I===null&&P===null&&ks(),P!==null&&(P.f&ge)!==0&&I===null&&ws(),it&&ys()}function Ks(e,n){var t=n.last;t===null?n.last=n.first=e:(t.next=e,e.prev=t,n.last=e)}function we(e,n,t,r=!0){var o=I;o!==null&&(o.f&ye)!==0&&(e|=ye);var s={ctx:H,deps:null,nodes_start:null,nodes_end:null,f:e|ae,first:null,fn:n,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{pt(s),s.f|=Fn}catch(l){throw Le(s),l}else n!==null&&Ve(s);var i=t&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&Vn)===0;if(!i&&r&&(o!==null&&Ks(s,o),P!==null&&(P.f&fe)!==0)){var a=P;(a.effects??(a.effects=[])).push(s)}return s}function ho(e){const n=we(_n,null,!1);return Q(n,J),n.teardown=e,n}function An(e){fo();var n=I.f,t=!P&&(n&De)!==0&&(n&Fn)===0;if(t){var r=H;(r.e??(r.e=[])).push(e)}else return vo(e)}function vo(e){return we(jn|Yn,e,!1)}function ei(e){return fo(),we(_n|Yn,e,!0)}function ti(e){xt.ensure();const n=we(ot,e,!0);return()=>{Le(n)}}function ni(e){xt.ensure();const n=we(ot,e,!0);return(t={})=>new Promise(r=>{t.outro?nr(n,()=>{Le(n),r(void 0)}):(Le(n),r(void 0))})}function ri(e){return we(jn,e,!1)}function po(e,n){var t=H,r={effect:null,ran:!1,deps:e};t.l.$.push(r),r.effect=Jt(()=>{e(),!r.ran&&(r.ran=!0,G(n))})}function go(){var e=H;Jt(()=>{for(var n of e.l.$){n.deps();var t=n.effect;(t.f&J)!==0&&Q(t,Xe),Qt(t)&&pt(t),n.ran=!1}})}function oi(e){return we(Xn|Vn,e,!0)}function Jt(e,n=0){return we(_n|n,e,!0)}function j(e,n=[],t=[]){Zs(n,t,r=>{we(_n,()=>e(...r.map(y)),!0)})}function mo(e,n=0){var t=we(Xt|n,e,!0);return t}function Ct(e,n=!0){return we(De,e,!0,n)}function _o(e){var n=e.teardown;if(n!==null){const t=it,r=P;xr(!0),_e(null);try{n.call(null)}finally{xr(t),_e(r)}}}function bo(e,n=!1){var o;var t=e.first;for(e.first=e.last=null;t!==null;){(o=t.ac)==null||o.abort(Zn);var r=t.next;(t.f&ot)!==0?t.parent=null:Le(t,n),t=r}}function si(e){for(var n=e.first;n!==null;){var t=n.next;(n.f&De)===0&&Le(n),n=t}}function Le(e,n=!0){var t=!1;(n||(e.f&gs)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(yo(e.nodes_start,e.nodes_end),t=!0),bo(e,n&&!t),pn(e,0),Q(e,st);var r=e.transitions;if(r!==null)for(const s of r)s.stop();_o(e);var o=e.parent;o!==null&&o.first!==null&&wo(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function yo(e,n){for(;e!==null;){var t=e===n?null:Me(e);e.remove(),e=t}}function wo(e){var n=e.parent,t=e.prev,r=e.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),n!==null&&(n.first===e&&(n.first=r),n.last===e&&(n.last=t))}function nr(e,n){var t=[];rr(e,t,!0),ko(t,()=>{Le(e),n&&n()})}function ko(e,n){var t=e.length;if(t>0){var r=()=>--t||n();for(var o of e)o.out(r)}else n()}function rr(e,n,t){if((e.f&ye)===0){if(e.f^=ye,e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&n.push(i);for(var r=e.first;r!==null;){var o=r.next,s=(r.f&Un)!==0||(r.f&De)!==0;rr(r,n,s?t:!1),r=o}}}function or(e){xo(e,!0)}function xo(e,n){if((e.f&ye)!==0){e.f^=ye,(e.f&J)===0&&(Q(e,ae),Ve(e));for(var t=e.first;t!==null;){var r=t.next,o=(t.f&Un)!==0||(t.f&De)!==0;xo(t,o?n:!1),t=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&s.in()}}let vt=!1;function kr(e){vt=e}let it=!1;function xr(e){it=e}let P=null,Ee=!1;function _e(e){P=e}let I=null;function $e(e){I=e}let oe=null;function ii(e){P!==null&&(oe===null?oe=[e]:oe.push(e))}let re=null,ce=0,he=null;function ai(e){he=e}let vn=1,Ft=0,tt=Ft;function Cr(e){tt=e}let Fe=!1;function Co(){return++vn}function Qt(e){var f;var n=e.f;if((n&ae)!==0)return!0;if((n&Xe)!==0){var t=e.deps,r=(n&ge)!==0;if(t!==null){var o,s,i=(n&un)!==0,a=r&&I!==null&&!Fe,l=t.length;if((i||a)&&(I===null||(I.f&st)===0)){var c=e,d=c.parent;for(o=0;o<l;o++)s=t[o],(i||!((f=s==null?void 0:s.reactions)!=null&&f.includes(c)))&&(s.reactions??(s.reactions=[])).push(c);i&&(c.f^=un),a&&d!==null&&(d.f&ge)===0&&(c.f^=ge)}for(o=0;o<l;o++)if(s=t[o],Qt(s)&&eo(s),s.wv>e.wv)return!0}(!r||I!==null&&!Fe)&&Q(e,J)}return!1}function Eo(e,n,t=!0){var r=e.reactions;if(r!==null&&!(oe!=null&&oe.includes(e)))for(var o=0;o<r.length;o++){var s=r[o];(s.f&fe)!==0?Eo(s,n,!1):n===s&&(t?Q(s,ae):(s.f&J)!==0&&Q(s,Xe),Ve(s))}}function To(e){var h;var n=re,t=ce,r=he,o=P,s=Fe,i=oe,a=H,l=Ee,c=tt,d=e.f;re=null,ce=0,he=null,Fe=(d&ge)!==0&&(Ee||!vt||P===null),P=(d&(De|ot))===0?e:null,oe=null,fn(e.ctx),Ee=!1,tt=++Ft,e.ac!==null&&(e.ac.abort(Zn),e.ac=null);try{e.f|=$n;var f=(0,e.fn)(),u=e.deps;if(re!==null){var p;if(pn(e,ce),u!==null&&ce>0)for(u.length=ce+re.length,p=0;p<re.length;p++)u[ce+p]=re[p];else e.deps=u=re;if(!Fe||(d&fe)!==0&&e.reactions!==null)for(p=ce;p<u.length;p++)((h=u[p]).reactions??(h.reactions=[])).push(e)}else u!==null&&ce<u.length&&(pn(e,ce),u.length=ce);if(Zt()&&he!==null&&!Ee&&u!==null&&(e.f&(fe|Xe|ae))===0)for(p=0;p<he.length;p++)Eo(he[p],e);return o!==null&&o!==e&&(Ft++,he!==null&&(r===null?r=he:r.push(...he))),(e.f&Qe)!==0&&(e.f^=Qe),f}catch(v){return js(v)}finally{e.f^=$n,re=n,ce=t,he=r,P=o,Fe=s,oe=i,fn(a),Ee=l,tt=c}}function li(e,n){let t=n.reactions;if(t!==null){var r=us.call(t,e);if(r!==-1){var o=t.length-1;o===0?t=n.reactions=null:(t[r]=t[o],t.pop())}}t===null&&(n.f&fe)!==0&&(re===null||!re.includes(n))&&(Q(n,Xe),(n.f&(ge|un))===0&&(n.f^=un),Kr(n),pn(n,0))}function pn(e,n){var t=e.deps;if(t!==null)for(var r=n;r<t.length;r++)li(e,t[r])}function pt(e){var n=e.f;if((n&st)===0){Q(e,J);var t=I,r=vt;I=e,vt=!0;try{(n&Xt)!==0?si(e):bo(e),_o(e);var o=To(e);e.teardown=typeof o=="function"?o:null,e.wv=vn;var s;Br&&Bs&&(e.f&ae)!==0&&e.deps}finally{vt=r,I=t}}}function y(e){var n=e.f,t=(n&fe)!==0;if(P!==null&&!Ee){var r=I!==null&&(I.f&st)!==0;if(!r&&!(oe!=null&&oe.includes(e))){var o=P.deps;if((P.f&$n)!==0)e.rv<Ft&&(e.rv=Ft,re===null&&o!==null&&o[ce]===e?ce++:re===null?re=[e]:(!Fe||!re.includes(e))&&re.push(e));else{(P.deps??(P.deps=[])).push(e);var s=e.reactions;s===null?e.reactions=[P]:s.includes(P)||s.push(P)}}}else if(t&&e.deps===null&&e.effects===null){var i=e,a=i.parent;a!==null&&(a.f&ge)===0&&(i.f^=ge)}if(it){if(et.has(e))return et.get(e);if(t){i=e;var l=i.v;return((i.f&J)===0&&i.reactions!==null||So(i))&&(l=tr(i)),et.set(i,l),l}}else if(t){if(i=e,je!=null&&je.has(i))return je.get(i);Qt(i)&&eo(i)}if((e.f&Qe)!==0)throw e.v;return e.v}function So(e){if(e.v===ee)return!0;if(e.deps===null)return!1;for(const n of e.deps)if(et.has(n)||(n.f&fe)!==0&&So(n))return!0;return!1}function G(e){var n=Ee;try{return Ee=!0,e()}finally{Ee=n}}const ci=-7169;function Q(e,n){e.f=e.f&ci|n}function te(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ue in e)Nn(e);else if(!Array.isArray(e))for(let n in e){const t=e[n];typeof t=="object"&&t&&Ue in t&&Nn(t)}}}function Nn(e,n=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!n.has(e)){n.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Nn(e[r],n)}catch{}const t=Hn(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=Wr(t);for(let o in r){const s=r[o].get;if(s)try{s.call(e)}catch{}}}}}const di=["touchstart","touchmove"];function ui(e){return di.includes(e)}let Er=!1;function Lo(){Er||(Er=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var n;if(!e.defaultPrevented)for(const t of e.target.elements)(n=t.__on_r)==null||n.call(t)})},{capture:!0}))}function $o(e){var n=P,t=I;_e(null),$e(null);try{return e()}finally{_e(n),$e(t)}}function fi(e,n,t,r=t){e.addEventListener(n,()=>$o(t));const o=e.__on_r;o?e.__on_r=()=>{o(),r(!0)}:e.__on_r=()=>r(!0),Lo()}const hi=new Set,Tr=new Set;function vi(e,n,t,r={}){function o(s){if(r.capture||At.call(n,s),!s.cancelBubble)return $o(()=>t==null?void 0:t.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?wn(()=>{n.addEventListener(e,o,r)}):n.addEventListener(e,o,r),o}function de(e,n,t,r,o){var s={capture:r,passive:o},i=vi(e,n,t,s);(n===document.body||n===window||n===document||n instanceof HTMLMediaElement)&&ho(()=>{n.removeEventListener(e,i,s)})}function At(e){var m;var n=this,t=n.ownerDocument,r=e.type,o=((m=e.composedPath)==null?void 0:m.call(e))||[],s=o[0]||e.target,i=0,a=e.__root;if(a){var l=o.indexOf(a);if(l!==-1&&(n===document||n===window)){e.__root=n;return}var c=o.indexOf(n);if(c===-1)return;l<=c&&(i=l)}if(s=o[i]||e.target,s!==n){wt(e,"currentTarget",{configurable:!0,get(){return s||t}});var d=P,f=I;_e(null),$e(null);try{for(var u,p=[];s!==null;){var h=s.assignedSlot||s.parentNode||s.host||null;try{var v=s["__"+r];if(v!=null&&(!s.disabled||e.target===s))if(mn(v)){var[_,...b]=v;_.apply(s,[e,...b])}else v.call(s,e)}catch(S){u?p.push(S):u=S}if(e.cancelBubble||h===n||h===null)break;s=h}if(u){for(let S of p)queueMicrotask(()=>{throw S});throw u}}finally{e.__root=n,delete e.currentTarget,_e(d),$e(f)}}}function sr(e){var n=document.createElement("template");return n.innerHTML=e.replaceAll("<!>","<!---->"),n.content}function Ye(e,n){var t=I;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=n)}function W(e,n){var t=(n&qs)!==0,r=(n&zs)!==0,o,s=!e.startsWith("<!>");return()=>{if(A)return Ye(D,null),D;o===void 0&&(o=sr(s?e:"<!>"+e),t||(o=ue(o)));var i=r||io?document.importNode(o,!0):o.cloneNode(!0);if(t){var a=ue(i),l=i.lastChild;Ye(a,l)}else Ye(i,i);return i}}function pi(e,n,t="svg"){var r=!e.startsWith("<!>"),o=`<${t}>${r?e:"<!>"+e}</${t}>`,s;return()=>{if(A)return Ye(D,null),D;if(!s){var i=sr(o),a=ue(i);s=ue(a)}var l=s.cloneNode(!0);return Ye(l,l),l}}function gi(e,n){return pi(e,n,"svg")}function B(e,n){if(A){I.nodes_end=D,nt();return}e!==null&&e.before(n)}function pe(e,n){var t=n==null?"":typeof n=="object"?n+"":n;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function Cn(e,n){return Ro(e,n)}function mi(e,n){Pn(),n.intro=n.intro??!1;const t=n.target,r=A,o=D;try{for(var s=ue(t);s&&(s.nodeType!==kt||s.data!==Vr);)s=Me(s);if(!s)throw Ke;be(!0),me(s),nt();const i=Ro(e,{...n,anchor:s});if(D===null||D.nodeType!==kt||D.data!==Qn)throw Gt(),Ke;return be(!1),i}catch(i){if(i===Ke)return n.recover===!1&&Cs(),Pn(),co(t),be(!1),Cn(e,n);throw i}finally{be(r),me(o)}}const ct=new Map;function Ro(e,{target:n,anchor:t,props:r={},events:o,context:s,intro:i=!0}){Pn();var a=new Set,l=f=>{for(var u=0;u<f.length;u++){var p=f[u];if(!a.has(p)){a.add(p);var h=ui(p);n.addEventListener(p,At,{passive:h});var v=ct.get(p);v===void 0?(document.addEventListener(p,At,{passive:h}),ct.set(p,1)):ct.set(p,v+1)}}};l(Wn(hi)),Tr.add(l);var c=void 0,d=ni(()=>{var f=t??n.appendChild(rt());return Ct(()=>{if(s){Re({});var u=H;u.c=s}o&&(r.$$events=o),A&&Ye(f,null),c=e(f,r)||{},A&&(I.nodes_end=D),s&&Ie()}),()=>{var h;for(var u of a){n.removeEventListener(u,At);var p=ct.get(u);--p===0?(document.removeEventListener(u,At),ct.delete(u)):ct.set(u,p)}Tr.delete(l),f!==t&&((h=f.parentNode)==null||h.removeChild(f))}});return qn.set(c,d),c}let qn=new WeakMap;function _i(e,n){const t=qn.get(e);return t?(qn.delete(e),t(n)):Promise.resolve()}function Ot(e,n,t=!1){A&&nt();var r=e,o=null,s=null,i=ee,a=t?Un:0,l=!1;const c=(p,h=!0)=>{l=!0,u(h,p)};var d=null;function f(){d!==null&&(d.lastChild.remove(),r.before(d),d=null);var p=i?o:s,h=i?s:o;p&&or(p),h&&nr(h,()=>{i?s=null:o=null})}const u=(p,h)=>{if(i===(i=p))return;let v=!1;if(A){const M=Yr(r)===Jn;!!i===M&&(r=Rn(),me(r),be(!1),v=!0)}var _=uo(),b=r;if(_&&(d=document.createDocumentFragment(),d.append(b=rt())),i?o??(o=h&&Ct(()=>h(b))):s??(s=h&&Ct(()=>h(b))),_){var m=ie,S=i?o:s,E=i?s:o;S&&m.skipped_effects.delete(S),E&&m.skipped_effects.add(E),m.add_callback(f)}else f();v&&be(!0)};mo(()=>{l=!1,n(c),l||u(null,null)},a),A&&(r=D)}function sn(e,n){return n}function bi(e,n,t){for(var r=e.items,o=[],s=n.length,i=0;i<s;i++)rr(n[i].e,o,!0);var a=s>0&&o.length===0&&t!==null;if(a){var l=t.parentNode;co(l),l.append(t),r.clear(),Ce(e,n[0].prev,n[s-1].next)}ko(o,()=>{for(var c=0;c<s;c++){var d=n[c];a||(r.delete(d.k),Ce(e,d.prev,d.next)),Le(d.e,!a)}})}function Dt(e,n,t,r,o,s=null){var i=e,a={flags:n,items:new Map,first:null},l=(n&Ur)!==0;if(l){var c=e;i=A?me(ue(c)):c.appendChild(rt())}A&&nt();var d=null,f=!1,u=new Map,p=er(()=>{var b=t();return mn(b)?b:b==null?[]:Wn(b)}),h,v;function _(){yi(v,h,a,u,i,o,n,r,t),s!==null&&(h.length===0?d?or(d):d=Ct(()=>s(i)):d!==null&&nr(d,()=>{d=null}))}mo(()=>{v??(v=I),h=y(p);var b=h.length;if(f&&b===0)return;f=b===0;let m=!1;if(A){var S=Yr(i)===Jn;S!==(b===0)&&(i=Rn(),me(i),be(!1),m=!0)}if(A){for(var E=null,M,w=0;w<b;w++){if(D.nodeType===kt&&D.data===Qn){i=D,m=!0,be(!1);break}var $=h[w],O=r($,w);M=zn(D,a,E,null,$,O,w,o,n,t),a.items.set(O,M),E=M}b>0&&me(Rn())}if(A)b===0&&s&&(d=Ct(()=>s(i)));else if(uo()){var Y=new Set,xe=ie;for(w=0;w<b;w+=1){$=h[w],O=r($,w);var Z=a.items.get(O)??u.get(O);Z?(n&(bn|yn))!==0&&Io(Z,$,w,n):(M=zn(null,a,null,null,$,O,w,o,n,t,!0),u.set(O,M)),Y.add(O)}for(const[K,k]of a.items)Y.has(K)||xe.skipped_effects.add(k.e);xe.add_callback(_)}else _();m&&be(!0),y(p)}),A&&(i=D)}function yi(e,n,t,r,o,s,i,a,l){var Ne,St,Lt,Kt;var c=(i&$s)!==0,d=(i&(bn|yn))!==0,f=n.length,u=t.items,p=t.first,h=p,v,_=null,b,m=[],S=[],E,M,w,$;if(c)for($=0;$<f;$+=1)E=n[$],M=a(E,$),w=u.get(M),w!==void 0&&((Ne=w.a)==null||Ne.measure(),(b??(b=new Set)).add(w));for($=0;$<f;$+=1){if(E=n[$],M=a(E,$),w=u.get(M),w===void 0){var O=r.get(M);if(O!==void 0){r.delete(M),u.set(M,O);var Y=_?_.next:h;Ce(t,_,O),Ce(t,O,Y),Sn(O,Y,o),_=O}else{var xe=h?h.e.nodes_start:o;_=zn(xe,t,_,_===null?t.first:_.next,E,M,$,s,i,l)}u.set(M,_),m=[],S=[],h=_.next;continue}if(d&&Io(w,E,$,i),(w.e.f&ye)!==0&&(or(w.e),c&&((St=w.a)==null||St.unfix(),(b??(b=new Set)).delete(w))),w!==h){if(v!==void 0&&v.has(w)){if(m.length<S.length){var Z=S[0],K;_=Z.prev;var k=m[0],z=m[m.length-1];for(K=0;K<m.length;K+=1)Sn(m[K],Z,o);for(K=0;K<S.length;K+=1)v.delete(S[K]);Ce(t,k.prev,z.next),Ce(t,_,k),Ce(t,z,Z),h=Z,_=z,$-=1,m=[],S=[]}else v.delete(w),Sn(w,h,o),Ce(t,w.prev,w.next),Ce(t,w,_===null?t.first:_.next),Ce(t,_,w),_=w;continue}for(m=[],S=[];h!==null&&h.k!==M;)(h.e.f&ye)===0&&(v??(v=new Set)).add(h),S.push(h),h=h.next;if(h===null)continue;w=h}m.push(w),_=w,h=w.next}if(h!==null||v!==void 0){for(var T=v===void 0?[]:Wn(v);h!==null;)(h.e.f&ye)===0&&T.push(h),h=h.next;var V=T.length;if(V>0){var le=(i&Ur)!==0&&f===0?o:null;if(c){for($=0;$<V;$+=1)(Lt=T[$].a)==null||Lt.measure();for($=0;$<V;$+=1)(Kt=T[$].a)==null||Kt.fix()}bi(t,T,le)}}c&&wn(()=>{var at;if(b!==void 0)for(w of b)(at=w.a)==null||at.apply()}),e.first=t.first&&t.first.e,e.last=_&&_.e;for(var Ae of r.values())Le(Ae.e);r.clear()}function Io(e,n,t,r){(r&bn)!==0&&jt(e.v,n),(r&yn)!==0?jt(e.i,t):e.i=t}function zn(e,n,t,r,o,s,i,a,l,c,d){var f=(l&bn)!==0,u=(l&Rs)===0,p=f?u?Se(o,!1,!1):Ht(o):o,h=(l&yn)===0?i:Ht(i),v={i:h,v:p,k:s,a:null,e:null,prev:t,next:r};try{if(e===null){var _=document.createDocumentFragment();_.append(e=rt())}return v.e=Ct(()=>a(e,p,h,c),A),v.e.prev=t&&t.e,v.e.next=r&&r.e,t===null?d||(n.first=v):(t.next=v,t.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function Sn(e,n,t){for(var r=e.next?e.next.e.nodes_start:t,o=n?n.e.nodes_start:t,s=e.e.nodes_start;s!==null&&s!==r;){var i=Me(s);o.before(s),s=i}}function Ce(e,n,t){n===null?e.first=t:(n.next=t,n.e.next=t&&t.e),t!==null&&(t.prev=n,t.e.prev=n&&n.e)}function wi(e,n,t=!1,r=!1,o=!1){var s=e,i="";j(()=>{var a=I;if(i===(i=n()??"")){A&&nt();return}if(a.nodes_start!==null&&(yo(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),i!==""){if(A){D.data;for(var l=nt(),c=l;l!==null&&(l.nodeType!==kt||l.data!=="");)c=l,l=Me(l);if(l===null)throw Gt(),Ke;Ye(D,c),s=me(l);return}var d=i+"";t?d=`<svg>${d}</svg>`:r&&(d=`<math>${d}</math>`);var f=sr(d);if((t||r)&&(f=ue(f)),Ye(ue(f),f.lastChild),t||r)for(;ue(f);)s.before(ue(f));else s.before(f)}})}function gt(e,n,t,r,o){var a;A&&nt();var s=(a=n.$$slots)==null?void 0:a[t],i=!1;s===!0&&(s=n[t==="default"?"children":t],i=!0),s===void 0||s(e,i?()=>r:r)}function Pe(e,n){wn(()=>{var t=e.getRootNode(),r=t.host?t:t.head??t.ownerDocument.head;if(!r.querySelector("#"+n.hash)){const o=document.createElement("style");o.id=n.hash,o.textContent=n.code,r.appendChild(o)}})}const Sr=[...` 	
\r\f \v\uFEFF`];function ki(e,n,t){var r=e==null?"":""+e;if(n&&(r=r?r+" "+n:n),t){for(var o in t)if(t[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var a=i+s;(i===0||Sr.includes(r[i-1]))&&(a===r.length||Sr.includes(r[a]))?r=(i===0?"":r.substring(0,i))+r.substring(a+1):i=a}}return r===""?null:r}function xi(e,n){return e==null?null:String(e)}function mt(e,n,t,r,o,s){var i=e.__className;if(A||i!==t||i===void 0){var a=ki(t,r,s);(!A||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):e.className=a),e.__className=t}else if(s&&o!==s)for(var l in s){var c=!!s[l];(o==null||c!==!!o[l])&&e.classList.toggle(l,c)}return s}function Mo(e,n,t,r){var o=e.__style;if(A||o!==n){var s=xi(n);(!A||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=n}return r}const Ci=Symbol("is custom element"),Ei=Symbol("is html");function Ti(e){if(A){var n=!1,t=()=>{if(!n){if(n=!0,e.hasAttribute("value")){var r=e.value;U(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var o=e.checked;U(e,"checked",null),e.checked=o}}};e.__on_r=t,Us(t),Lo()}}function U(e,n,t,r){var o=Si(e);A&&(o[n]=e.getAttribute(n),n==="src"||n==="srcset"||n==="href"&&e.nodeName==="LINK")||o[n]!==(o[n]=t)&&(n==="loading"&&(e[ms]=t),t==null?e.removeAttribute(n):typeof t!="string"&&Po(e).includes(n)?e[n]=t:e.setAttribute(n,t))}function Ge(e,n,t){var r=P,o=I;let s=A;A&&be(!1),_e(null),$e(null);try{n!=="style"&&(On.has(e.nodeName)||!customElements||customElements.get(e.tagName.toLowerCase())?Po(e).includes(n):t&&typeof t=="object")?e[n]=t:U(e,n,t==null?t:String(t))}finally{_e(r),$e(o),s&&be(!0)}}function Si(e){return e.__attributes??(e.__attributes={[Ci]:e.nodeName.includes("-"),[Ei]:e.namespaceURI===Os})}var On=new Map;function Po(e){var n=On.get(e.nodeName);if(n)return n;On.set(e.nodeName,n=[]);for(var t,r=e,o=Element.prototype;o!==r;){t=Wr(r);for(var s in t)t[s].set&&n.push(s);r=Hn(r)}return n}function Li(e,n,t=n){fi(e,"change",r=>{var o=r?e.defaultChecked:e.checked;t(o)}),(A&&e.defaultChecked!==e.checked||G(n)==null)&&t(e.checked),Jt(()=>{var r=n();e.checked=!!r})}function ft(e,n,t){var r=Te(e,n);r&&r.set&&(e[n]=t,ho(()=>{e[n]=null}))}function Lr(e,n){return e===n||(e==null?void 0:e[Ue])===n}function Ao(e={},n,t,r){return ri(()=>{var o,s;return Jt(()=>{o=s,s=[],G(()=>{e!==t(...s)&&(n(e,...s),o&&Lr(t(...o),e)&&n(null,...o))})}),()=>{wn(()=>{s&&Lr(t(...s),e)&&n(null,...s)})}}),e}function $i(e){return function(...n){var t=n[0];return t.stopPropagation(),e==null?void 0:e.apply(this,n)}}function Tt(e=!1){const n=H,t=n.l.u;if(!t)return;let r=()=>te(n.s);if(e){let o=0,s={};const i=kn(()=>{let a=!1;const l=n.s;for(const c in l)l[c]!==s[c]&&(s[c]=l[c],a=!0);return a&&o++,o});r=()=>y(i)}t.b.length&&ei(()=>{$r(n,r),dn(t.b)}),An(()=>{const o=G(()=>t.m.map(vs));return()=>{for(const s of o)typeof s=="function"&&s()}}),t.a.length&&An(()=>{$r(n,r),dn(t.a)})}function $r(e,n){if(e.l.s)for(const t of e.l.s)y(t);n()}let rn=!1;function Ri(e){var n=rn;try{return rn=!1,[e(),rn]}finally{rn=n}}const Ii={get(e,n){let t=e.props.length;for(;t--;){let r=e.props[t];if(Mt(r)&&(r=r()),typeof r=="object"&&r!==null&&n in r)return r[n]}},set(e,n,t){let r=e.props.length;for(;r--;){let o=e.props[r];Mt(o)&&(o=o());const s=Te(o,n);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(e,n){let t=e.props.length;for(;t--;){let r=e.props[t];if(Mt(r)&&(r=r()),typeof r=="object"&&r!==null&&n in r){const o=Te(r,n);return o&&!o.configurable&&(o.configurable=!0),o}}},has(e,n){if(n===Ue||n===Gn)return!1;for(let t of e.props)if(Mt(t)&&(t=t()),t!=null&&n in t)return!0;return!1},ownKeys(e){const n=[];for(let t of e.props)if(Mt(t)&&(t=t()),!!t){for(const r in t)n.includes(r)||n.push(r);for(const r of Object.getOwnPropertySymbols(t))n.includes(r)||n.push(r)}return n}};function on(...e){return new Proxy({props:e},Ii)}function q(e,n,t,r){var S;var o=!Et||(t&Ms)!==0,s=(t&As)!==0,i=(t&Ns)!==0,a=r,l=!0,c=()=>(l&&(l=!1,a=i?G(r):r),a),d;if(s){var f=Ue in e||Gn in e;d=((S=Te(e,n))==null?void 0:S.set)??(f&&n in e?E=>e[n]=E:void 0)}var u,p=!1;s?[u,p]=Ri(()=>e[n]):u=e[n],u===void 0&&r!==void 0&&(u=c(),d&&(o&&Es(),d(u)));var h;if(o?h=()=>{var E=e[n];return E===void 0?c():(l=!0,E)}:h=()=>{var E=e[n];return E!==void 0&&(a=void 0),E===void 0?a:E},o&&(t&Ps)===0)return h;if(d){var v=e.$$legacy;return function(E,M){return arguments.length>0?((!o||!M||v||p)&&d(M?h():E),E):h()}}var _=!1,b=((t&Is)!==0?kn:er)(()=>(_=!1,h()));s&&y(b);var m=I;return function(E,M){if(arguments.length>0){const w=M?y(b):o&&s?ut(E):E;return F(b,w),_=!0,a!==void 0&&(a=w),E}return it&&_||(m.f&st)!==0?b.v:y(b)}}function Mi(e){return new Pi(e)}var ze,ve;class Pi{constructor(n){ne(this,ze);ne(this,ve);var s;var t=new Map,r=(i,a)=>{var l=Se(a,!1,!1);return t.set(i,l),l};const o=new Proxy({...n.props||{},$$events:{}},{get(i,a){return y(t.get(a)??r(a,Reflect.get(i,a)))},has(i,a){return a===Gn?!0:(y(t.get(a)??r(a,Reflect.get(i,a))),Reflect.has(i,a))},set(i,a,l){return F(t.get(a)??r(a,l),l),Reflect.set(i,a,l)}});se(this,ve,(n.hydrate?mi:Cn)(n.component,{target:n.target,anchor:n.anchor,props:o,context:n.context,intro:n.intro??!1,recover:n.recover})),(!((s=n==null?void 0:n.props)!=null&&s.$$host)||n.sync===!1)&&N(),se(this,ze,o.$$events);for(const i of Object.keys(L(this,ve)))i==="$set"||i==="$destroy"||i==="$on"||wt(this,i,{get(){return L(this,ve)[i]},set(a){L(this,ve)[i]=a},enumerable:!0});L(this,ve).$set=i=>{Object.assign(o,i)},L(this,ve).$destroy=()=>{_i(L(this,ve))}}$set(n){L(this,ve).$set(n)}$on(n,t){L(this,ze)[n]=L(this,ze)[n]||[];const r=(...o)=>t.call(this,...o);return L(this,ze)[n].push(r),()=>{L(this,ze)[n]=L(this,ze)[n].filter(o=>o!==r)}}$destroy(){L(this,ve).$destroy()}}ze=new WeakMap,ve=new WeakMap;let No;typeof HTMLElement=="function"&&(No=class extends HTMLElement{constructor(n,t,r){super();g(this,"$$ctor");g(this,"$$s");g(this,"$$c");g(this,"$$cn",!1);g(this,"$$d",{});g(this,"$$r",!1);g(this,"$$p_d",{});g(this,"$$l",{});g(this,"$$l_u",new Map);g(this,"$$me");this.$$ctor=n,this.$$s=t,r&&this.attachShadow({mode:"open"})}addEventListener(n,t,r){if(this.$$l[n]=this.$$l[n]||[],this.$$l[n].push(t),this.$$c){const o=this.$$c.$on(n,t);this.$$l_u.set(t,o)}super.addEventListener(n,t,r)}removeEventListener(n,t,r){if(super.removeEventListener(n,t,r),this.$$c){const o=this.$$l_u.get(t);o&&(o(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let n=function(o){return s=>{const i=document.createElement("slot");o!=="default"&&(i.name=o),B(s,i)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const t={},r=Ai(this);for(const o of this.$$s)o in r&&(o==="default"&&!this.$$d.children?(this.$$d.children=n(o),t.default=!0):t[o]=n(o));for(const o of this.attributes){const s=this.$$g_p(o.name);s in this.$$d||(this.$$d[s]=an(s,o.value,this.$$p_d,"toProp"))}for(const o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=Mi({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$host:this}}),this.$$me=ti(()=>{Jt(()=>{var o;this.$$r=!0;for(const s of cn(this.$$c)){if(!((o=this.$$p_d[s])!=null&&o.reflect))continue;this.$$d[s]=this.$$c[s];const i=an(s,this.$$d[s],this.$$p_d,"toAttribute");i==null?this.removeAttribute(this.$$p_d[s].attribute||s):this.setAttribute(this.$$p_d[s].attribute||s,i)}this.$$r=!1})});for(const o in this.$$l)for(const s of this.$$l[o]){const i=this.$$c.$on(o,s);this.$$l_u.set(s,i)}this.$$l={}}}attributeChangedCallback(n,t,r){var o;this.$$r||(n=this.$$g_p(n),this.$$d[n]=an(n,r,this.$$p_d,"toProp"),(o=this.$$c)==null||o.$set({[n]:this.$$d[n]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(n){return cn(this.$$p_d).find(t=>this.$$p_d[t].attribute===n||!this.$$p_d[t].attribute&&t.toLowerCase()===n)||n}});function an(e,n,t,r){var s;const o=(s=t[e])==null?void 0:s.type;if(n=o==="Boolean"&&typeof n!="boolean"?n!=null:n,!r||!t[e])return n;if(r==="toAttribute")switch(o){case"Object":case"Array":return n==null?null:JSON.stringify(n);case"Boolean":return n?"":null;case"Number":return n??null;default:return n}else switch(o){case"Object":case"Array":return n&&JSON.parse(n);case"Boolean":return n;case"Number":return n!=null?+n:n;default:return n}}function Ai(e){const n={};return e.childNodes.forEach(t=>{n[t.slot||"default"]=!0}),n}function ke(e,n,t,r,o,s){let i=class extends No{constructor(){super(e,t,o),this.$$p_d=n}static get observedAttributes(){return cn(n).map(a=>(n[a].attribute||a).toLowerCase())}};return cn(n).forEach(a=>{wt(i.prototype,a,{get(){return this.$$c&&a in this.$$c?this.$$c[a]:this.$$d[a]},set(l){var f;l=an(a,l,n),this.$$d[a]=l;var c=this.$$c;if(c){var d=(f=Te(c,a))==null?void 0:f.get;d?c[a]=l:c.$set({[a]:l})}}})}),r.forEach(a=>{wt(i.prototype,a,{get(){var l;return(l=this.$$c)==null?void 0:l[a]}})}),e.element=i,i}function Ni(e){H===null&&Fr(),Et&&H.l!==null?zi(H).m.push(e):An(()=>{const n=G(e);if(typeof n=="function")return n})}function qi(e,n,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:n,bubbles:t,cancelable:r})}function qo(){const e=H;return e===null&&Fr(),(n,t,r)=>{var s;const o=(s=e.s.$$events)==null?void 0:s[n];if(o){const i=mn(o)?o.slice():[o],a=qi(n,t,r);for(const l of i)l.call(e.x,a);return!a.defaultPrevented}return!0}}function zi(e){var n=e.l;return n.u??(n.u={a:[],b:[],m:[]})}const Oi="5";var Pr;typeof window<"u"&&((Pr=window.__svelte??(window.__svelte={})).v??(Pr.v=new Set)).add(Oi);Ws();var Di=W('<div class="pane-descriptor svelte-1dhzk6q"> <span class="grow svelte-1dhzk6q"> </span></div>');const Bi={hash:"svelte-1dhzk6q",code:".svelte-1dhzk6q, .svelte-1dhzk6q::before, .svelte-1dhzk6q::after {box-sizing:border-box;}.pane-descriptor.svelte-1dhzk6q {display:flex;padding:0.5rem;background:var(--dark-background-e);border-top:1px solid var(--node-border);border-bottom:1px solid var(--node-border);width:100%;position:relative;z-index:2;}.pane-descriptor.svelte-1dhzk6q .grow:where(.svelte-1dhzk6q) {flex:1;text-align:right;color:var(--dark-foreground-ll);}"};function Wi(e,n){Re(n,!1),Pe(e,Bi);let t=q(n,"dataHeader",12,""),r=q(n,"dataPlugin",12,"");var o=Di(),s=C(o),i=R(s),a=C(i,!0);return x(i),x(o),j(()=>{pe(s,`${t()??""} `),pe(a,r())}),B(e,o),Ie({get dataHeader(){return t()},set dataHeader(l){t(l),N()},get dataPlugin(){return r()},set dataPlugin(l){r(l),N()}})}customElements.define("pane-status",ke(Wi,{dataHeader:{},dataPlugin:{}},[],[],!0));var Hi=W('<div><button class="header svelte-8uqyfe"><span><svg viewBox="0 0 16 16" fill="none" width="16" height="16"><path d="M5 6l3 3 3-3" stroke="#aaa" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></span> <span class="header-text"> </span></button> <div><!></div></div>');const ji={hash:"svelte-8uqyfe",code:".collapse-view.svelte-8uqyfe {display:block;border:1px solid var(--dark-background-l);border-radius:0.5rem;overflow:hidden;background:var(--dark-background);}.header.svelte-8uqyfe {display:flex;align-items:center;cursor:pointer;padding:1rem;background:var(--dark-background-e);border:none;border-radius:0;font-family:var(--global-font);width:100%;}.collapse-view.expanded.svelte-8uqyfe .header:where(.svelte-8uqyfe) {border-bottom:1px solid var(--dark-background-l);}.caret.svelte-8uqyfe {transition:transform 0.2s;margin-right:1rem;width:1em;height:1em;display:inline-block;vertical-align:middle;transform:rotate(-90deg);}.caret.expanded.svelte-8uqyfe {transform:rotate(0deg);}.content.svelte-8uqyfe {padding:1rem;display:none;}.content.expanded.svelte-8uqyfe {display:block;}"};function Nt(e,n){Re(n,!1),Pe(e,ji);let t=q(n,"header",12,""),r=Se(!1);function o(){F(r,!y(r))}var s=Hi();let i;var a=C(s),l=C(a);let c;var d=R(l,2),f=C(d,!0);x(d),x(a);var u=R(a,2);let p;var h=C(u);return gt(h,n,"default",{}),x(u),x(s),j((v,_,b)=>{i=mt(s,1,"collapse-view shadowed svelte-8uqyfe",null,i,v),U(a,"aria-expanded",y(r)),c=mt(l,1,"caret svelte-8uqyfe",null,c,_),pe(f,t()),p=mt(u,1,"content svelte-8uqyfe",null,p,b)},[()=>({expanded:y(r)}),()=>({expanded:y(r)}),()=>({expanded:y(r)})]),de("click",a,o),de("keydown",a,v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),o())}),B(e,s),Ie({get header(){return t()},set header(v){t(v),N()}})}ke(Nt,{header:{}},["default"],[],!0);var Fi=gi('<svg viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg" class="svelte-z14osc"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%"></stop><stop offset="100%"></stop></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%"></stop><stop offset="100%"></stop></linearGradient><filter x="-20%" y="-20%" width="140%" height="140%"><feDropShadow dx="5" dy="5" stdDeviation="10" flood-color="rgba(0,0,0,0.5)"></feDropShadow></filter><filter x="-50%" y="-50%" width="200%" height="200%"><feDropShadow dx="25" dy="25" stdDeviation="25" flood-color="rgba(0,0,0,0.75)"></feDropShadow></filter></defs><g><rect x="0" y="0" width="300" height="300"></rect></g><text x="155" y="170" text-anchor="middle" dominant-baseline="middle" font-size="180" opacity="1.0"> </text><text x="150" y="165" text-anchor="middle" dominant-baseline="middle" font-size="180" stroke="rgba(255,255,255,0.3)" stroke-width="1"> </text></svg>');const Ui={hash:"svelte-z14osc",code:":host {display:inline-block;}svg.svelte-z14osc {filter:none;}"};function Vi(e,n){Re(n,!1),Pe(e,Ui);let t=q(n,"text",12,"Hz"),r=q(n,"size",12,300),o=q(n,"radius",12,"0.5rem"),s=q(n,"shadowColor",12,"var(--haze-color-shadow)"),i=q(n,"foregroundTopColor",12,"var(--haze-color-foreground-top)"),a=q(n,"foregroundBottomColor",12,"var(--haze-color-foreground-bottom)"),l=q(n,"backgroundTopColor",12,"var(--haze-color-background-top)"),c=q(n,"backgroundBottomColor",12,"var(--haze-color-background-bottom)");const d=Math.random().toString(36).substring(2,9),f=`bgGradient-${d}`,u=`textGradient-${d}`,p=`dropShadow-${d}`,h=`richShadow-${d}`;Tt();var v=Fi(),_=C(v),b=C(_),m=C(b),S=R(m);x(b);var E=R(b),M=C(E),w=R(M);x(E);var $=R(E),O=R($);x(_);var Y=R(_),xe=C(Y);x(Y);var Z=R(Y),K=C(Z,!0);x(Z);var k=R(Z),z=C(k,!0);return x(k),x(v),j(()=>{Mo(v,o()?`border-radius: ${o()};`:""),U(v,"width",r()),U(v,"height",r()),U(b,"id",f),U(m,"stop-color",l()),U(S,"stop-color",c()),U(E,"id",u),U(M,"stop-color",i()),U(w,"stop-color",a()),U($,"id",p),U(O,"id",h),U(xe,"fill",`url(#${f})`),U(Z,"fill",s()),pe(K,t()),U(k,"fill",`url(#${u})`),U(k,"filter",`url(#${p}) url(#${h})`),pe(z,t())}),B(e,v),Ie({get text(){return t()},set text(T){t(T),N()},get size(){return r()},set size(T){r(T),N()},get radius(){return o()},set radius(T){o(T),N()},get shadowColor(){return s()},set shadowColor(T){s(T),N()},get foregroundTopColor(){return i()},set foregroundTopColor(T){i(T),N()},get foregroundBottomColor(){return a()},set foregroundBottomColor(T){a(T),N()},get backgroundTopColor(){return l()},set backgroundTopColor(T){l(T),N()},get backgroundBottomColor(){return c()},set backgroundBottomColor(T){c(T),N()}})}customElements.define("symbol-icon",ke(Vi,{text:{},size:{},radius:{},shadowColor:{},foregroundTopColor:{},foregroundBottomColor:{},backgroundTopColor:{},backgroundBottomColor:{}},[],[],!0));var Yi=W(`
                        <th class="hex-offset svelte-ye6ex2"> </th>
                    `,1),Xi=W(`
                                <td> </td>
                            `,1),Gi=W(`
                                <td class="svelte-ye6ex2"></td>
                            `,1),Zi=W(`
                            <!>
                        `,1),Ji=W(`
                    <tr class="svelte-ye6ex2">
                        <td class="hex-address svelte-ye6ex2"> </td>
                        <!>
                        <td class="hex-ascii svelte-ye6ex2"> </td>
                    </tr>
                `,1),Qi=W(`<div class="hex-shell svelte-ye6ex2"><pre class="hex-highlight-layer svelte-ye6ex2">
        <table class="hex-table svelte-ye6ex2">
            <thead class="svelte-ye6ex2">
                <tr class="svelte-ye6ex2">
                    <th class="hex-address svelte-ye6ex2">Address</th>
                    <th class="svelte-ye6ex2">Offset</th>
                    <th class="hex-ascii svelte-ye6ex2">ASCII</th>
                </tr>
                <tr class="header-spacer-row svelte-ye6ex2"></tr>
                <tr class="hex-offset-row svelte-ye6ex2">
                    <th class="svelte-ye6ex2"></th>
                    <!>
                    <th class="svelte-ye6ex2"></th>
                </tr>
                <tr class="header-spacer-row svelte-ye6ex2"></tr>
            </thead>
            <tbody class="svelte-ye6ex2">
                <!>
            </tbody>
        </table>
    </pre></div>`);const Ki={hash:"svelte-ye6ex2",code:".svelte-ye6ex2, .svelte-ye6ex2::before, .svelte-ye6ex2::after {box-sizing:border-box;}.hex-shell.svelte-ye6ex2 {color:var(--light-foreground);padding:1rem;overflow-x:hidden;overflow-y:auto;height:100%;width:100%;}.hex-table.svelte-ye6ex2 {font-family:var(--global-font);border-collapse:collapse;width:100%;}.hex-table.svelte-ye6ex2 th:where(.svelte-ye6ex2), .hex-table.svelte-ye6ex2 td:where(.svelte-ye6ex2) {width:3ch;min-width:3ch;text-align:center;white-space:nowrap;}.hex-table.svelte-ye6ex2 th:where(.svelte-ye6ex2) {color:var(--dark-foreground-l);}.header-spacer-row.svelte-ye6ex2 {height:0.5rem;}.hex-offset.svelte-ye6ex2 {font-weight:normal;}th.hex-offset.svelte-ye6ex2 {color:var(--accent);}.hex-address.svelte-ye6ex2 {font-weight:bold;color:var(--light-foreground-l);padding-right:1rem;}.hex-ascii.svelte-ye6ex2 {color:var(--secondary);padding-left:1rem;}.hex-byte.selected.svelte-ye6ex2 {outline:1px solid var(--accent);background:var(--dark-background);border-radius:0.25rem;}.hex-highlight-layer.svelte-ye6ex2 {margin:0;}"};function ea(e,n){Re(n,!1),Pe(e,Ki);const t=Se();let r=q(n,"data",28,()=>new Uint8Array),o=q(n,"columns",12,16),s=q(n,"symbols",28,()=>[]),i=q(n,"client",12,null),a=q(n,"sourceUri",12,""),l=q(n,"autoColumns",12,!0),c=null,d=Se(),f=Se(null);function u(k){for(const z of s())if(k>=z.address&&k<z.address+z.length)return z;return null}function p(k){let z="";for(let T=0;T<o();T++){const V=k+T;if(V<r().length){const le=r()[V];z+=le>=32&&le<=126?String.fromCharCode(le):"."}else z+=" "}return z}function h(){if(!l()||!y(d))return;const k=getComputedStyle(y(d)),z=parseInt(k.fontSize.replace("px",""))||16,T=z*8,V=o()*8,le=z*4,Ae=y(d).getBoundingClientRect().width-T-V-le,Ne=Math.max(1,Ae/24);Math.abs(Ne-o())>.5&&o(Math.floor(Ne))}function v(){const k=document.querySelector("#exe-hex-plugin");if(k)if(y(f)!==null){const z=y(f).toString(16).toUpperCase();k.setAttribute("dataPlugin",`$${z} ${y(f)+1}/${r().length} B`)}else k.setAttribute("dataPlugin",`${r().length} B`)}function _(k){F(f,k),v()}Ni(()=>(l()&&(c=new ResizeObserver(h),c.observe(y(d))),i()&&a()&&r().length>0&&(i().addEventListener("message",b),i().postMessage({type:"execute",method:"openDocument",params:{uri:a(),sourceCode:Array.from(r()).map(k=>k.toString(16).padStart(2,"0")).join(" ")}})),()=>{c==null||c.disconnect(),i()&&a()&&(i().postMessage({type:"execute",method:"closeDocument",params:{uri:a()}}),i().removeEventListener("message",b))}));function b(k){k.data.type==="symbolInfo"&&k.data.uri===a()&&s(k.data.symbols)}function m(k,z,T=null){a(k),r(z),i(T),i()&&a()&&r().length>0&&i().postMessage({type:"execute",method:"openDocument",params:{uri:a(),sourceCode:Array.from(r()).map(V=>V.toString(16).padStart(2,"0")).join(" ")}}),v()}po(()=>(te(r()),te(o())),()=>{F(t,Math.ceil(r().length/o()))}),go(),Tt();var S=Qi(),E=C(S),M=R(C(E)),w=R(C(M)),$=R(C(w)),O=R(C($),3);X(3),x($);var Y=R($,4),xe=R(C(Y),3);Dt(xe,1,()=>(te(o()),G(()=>Array(o()))),sn,(k,z,T)=>{X();var V=Yi(),le=R(Pt(V)),Ae=C(le);x(le),X(),j(Ne=>pe(Ae,`+${Ne??""}`),[()=>G(()=>T.toString(16).toUpperCase())]),B(k,V)}),X(3),x(Y),X(3),x(w);var Z=R(w,2),K=R(C(Z));return Dt(K,1,()=>(y(t),G(()=>Array(y(t)))),sn,(k,z,T)=>{X();var V=Ji(),le=R(Pt(V)),Ae=R(C(le)),Ne=C(Ae,!0);x(Ae);var St=R(Ae,2);Dt(St,1,()=>(te(o()),G(()=>Array(o()))),sn,(at,ir,$t,$a)=>{X();var ar=Zi(),Ho=R(Pt(ar));{var jo=lt=>{var en=Xi(),Rt=R(Pt(en)),Uo=C(Rt);x(Rt),X(),j((tn,Vo)=>{mt(Rt,1,`hex-byte ${y(f)===T*o()+$t?"selected":""}`,"svelte-ye6ex2"),Mo(Rt,`color: ${tn??""}`),pe(Uo,`
                                    ${Vo??""}
                                `)},[()=>(te(o()),G(()=>{var tn;return((tn=u(T*o()+$t))==null?void 0:tn.color)||"#ccc"})),()=>(te(r()),te(o()),G(()=>r()[T*o()+$t].toString(16).padStart(2,"0")))]),de("click",Rt,$i(()=>_(T*o()+$t))),B(lt,en)},Fo=lt=>{var en=Gi();X(2),B(lt,en)};Ot(Ho,lt=>{te(o()),te(r()),G(()=>T*o()+$t<r().length)?lt(jo):lt(Fo,!1)})}X(),B(at,ar)});var Lt=R(St,2),Kt=C(Lt,!0);x(Lt),X(),x(le),X(),j((at,ir)=>{pe(Ne,at),pe(Kt,ir)},[()=>(te(o()),G(()=>(T*o()).toString(16).padStart(8,"0"))),()=>(te(o()),G(()=>p(T*o())))]),B(k,V)}),X(),x(Z),X(),x(M),X(),x(E),x(S),Ao(S,k=>F(d,k),()=>y(d)),j(()=>U(O,"colspan",o())),B(e,S),ft(n,"initialize",m),Ie({initialize:m,get data(){return r()},set data(k){r(k),N()},get columns(){return o()},set columns(k){o(k),N()},get symbols(){return s()},set symbols(k){s(k),N()},get client(){return i()},set client(k){i(k),N()},get sourceUri(){return a()},set sourceUri(k){a(k),N()},get autoColumns(){return l()},set autoColumns(k){l(k),N()}})}customElements.define("hex-viewer",ke(ea,{data:{},columns:{},symbols:{},client:{},sourceUri:{},autoColumns:{}},[],["initialize"],!0));var ta=W('<div class="container svelte-frylje"><input type="checkbox" class="svelte-frylje"/> <span class="icon on-icon svelte-frylje"><!></span> <span class="icon off-icon svelte-frylje"><!></span></div>');const na={hash:"svelte-frylje",code:'.container.svelte-frylje {cursor:pointer;user-select:none;width:fit-content;position:relative;}input[type="checkbox"].svelte-frylje {position:absolute;height:1rem;width:1rem;opacity:0;margin:0;z-index:100;cursor:pointer;}.icon.svelte-frylje {display:none;align-items:center;justify-content:center;width:1rem;height:1rem;}input[type="checkbox"].svelte-frylje:checked ~ .on-icon:where(.svelte-frylje) {display:flex;}input[type="checkbox"].svelte-frylje:not(:checked) ~ .off-icon:where(.svelte-frylje) {display:flex;}'};function ra(e,n){Re(n,!1),Pe(e,na);let t=q(n,"checked",12,!0),r=q(n,"title",12,"");const o=qo();function s(u){t(u.target.checked),o("toggle-change",{checked:t()})}Tt();var i=ta(),a=C(i);Ti(a);var l=R(a,2),c=C(l);gt(c,n,"on-icon",{}),x(l);var d=R(l,2),f=C(d);return gt(f,n,"off-icon",{}),x(d),x(i),j(()=>U(i,"title",r())),Li(a,t),de("change",a,s),B(e,i),Ie({get checked(){return t()},set checked(u){t(u),N()},get title(){return r()},set title(u){r(u),N()}})}customElements.define("symbol-toggle",ke(ra,{checked:{},title:{}},["on-icon","off-icon"],[],!0));var oa=W('<button type="button"><span class="icon state0 svelte-s9af09"><!></span> <span class="icon state1 svelte-s9af09"><!></span> <span class="icon state2 svelte-s9af09"><!></span></button>');const sa={hash:"svelte-s9af09",code:`.container.svelte-s9af09 {cursor:pointer;user-select:none;width:fit-content;position:relative;display:inline-block;}.icon.svelte-s9af09 {display:none;align-items:center;justify-content:center;width:1rem;height:1rem;}.state0.svelte-s9af09 .state0:where(.svelte-s9af09),\r
    .state1.svelte-s9af09 .state1:where(.svelte-s9af09),\r
    .state2.svelte-s9af09 .state2:where(.svelte-s9af09) {display:flex;}.state0.svelte-s9af09 .state1:where(.svelte-s9af09),\r
    .state0.svelte-s9af09 .state2:where(.svelte-s9af09),\r
    .state1.svelte-s9af09 .state0:where(.svelte-s9af09),\r
    .state1.svelte-s9af09 .state2:where(.svelte-s9af09),\r
    .state2.svelte-s9af09 .state0:where(.svelte-s9af09),\r
    .state2.svelte-s9af09 .state1:where(.svelte-s9af09) {display:none;}button.svelte-s9af09 {appearance:none;outline:none;border:none;background:none;padding:0;}`};function ia(e,n){Re(n,!1),Pe(e,sa);let t=q(n,"state",12,0),r=q(n,"title",12,"");const o=qo();function s(){t((t()+1)%3),o("tristate-change",{state:t()})}function i(h,v,_){h==="state"&&t(parseInt(_))}Tt();var a=oa(),l=C(a),c=C(l);gt(c,n,"state0-icon",{}),x(l);var d=R(l,2),f=C(d);gt(f,n,"state1-icon",{}),x(d);var u=R(d,2),p=C(u);return gt(p,n,"state2-icon",{}),x(u),x(a),j(()=>{mt(a,1,`container state${t()??""}`,"svelte-s9af09"),U(a,"title",r())}),de("click",a,s),B(e,a),ft(n,"attributeChangedCallback",i),Ie({attributeChangedCallback:i,get state(){return t()},set state(h){t(h),N()},get title(){return r()},set title(h){r(h),N()}})}customElements.define("symbol-tristate",ke(ia,{state:{},title:{}},["state0-icon","state1-icon","state2-icon"],["attributeChangedCallback"],!0));var aa=W('<div class="console-line svelte-qs1bhk"> </div>'),la=W('<div><!> <div id="end"></div></div>');const ca={hash:"svelte-qs1bhk",code:".console.svelte-qs1bhk {background:var(--dark-background-e);color:#e0e0e0;max-height:150px;overflow-y:auto;z-index:1000;padding:0.5rem 1rem;box-shadow:0 -2px 8px rgba(0,0,0,0.3);pointer-events:auto;display:block;transition:opacity 0.3s ease-in-out;opacity:1;}.console.fade-out.svelte-qs1bhk {opacity:0;display:none;pointer-events:none;}.console-line.svelte-qs1bhk {white-space:pre-wrap;word-break:break-all;}"};function da(e,n){Re(n,!1),Pe(e,ca);let t=q(n,"messages",28,()=>[]),r=q(n,"visible",12,!0),o=Se(null),s=0,i="auto";function a(v){if(t().length>0&&t()[t().length-1].rawText===v){const _={...t()[t().length-1]},b=_.text.match(/\[x(\d+)\]$/);let m=b?parseInt(b[1])+1:2;_.text=`${v} [x${m}]`,t([...t().slice(0,-1),_])}else t([...t(),{id:(++s).toString(),text:v,rawText:v,visible:!0}]);i==="auto"?d():i==="show"?l():i==="hide"&&c()}function l(){r(!0),i="show",clearTimeout(f)}function c(){r(!1),i="hide",clearTimeout(f)}function d(){r(!0),clearTimeout(f),f=setTimeout(()=>{r(!1)},3e3),i="auto"}let f;po(()=>(y(o),te(t())),()=>{y(o)&&t().length&&y(o).scrollIntoView({behavior:"smooth"})}),go(),Tt();var u=la(),p=C(u);Dt(p,1,t,v=>v.id,(v,_)=>{var b=aa(),m=C(b,!0);x(b),j(()=>pe(m,(y(_),G(()=>y(_).text)))),B(v,b)});var h=R(p,2);return Ao(h,v=>F(o,v),()=>y(o)),x(u),j(()=>mt(u,1,`console ${r()?"":"fade-out"}`,"svelte-qs1bhk")),B(e,u),ft(n,"addMessage",a),ft(n,"show",l),ft(n,"hide",c),ft(n,"auto",d),Ie({addMessage:a,show:l,hide:c,auto:d,get messages(){return t()},set messages(v){t(v),N()},get visible(){return r()},set visible(v){r(v),N()}})}customElements.define("output-window",ke(da,{messages:{},visible:{}},[],["addMessage","show","hide","auto"],!0));var ua=W('<p class="svelte-kfsn1b"> </p>'),fa=W('<header class="svelte-kfsn1b"><symbol-icon></symbol-icon> <div><h2 class="svelte-kfsn1b"> </h2> <!></div></header>',2);const ha={hash:"svelte-kfsn1b",code:"header.svelte-kfsn1b {display:flex;flex-direction:row;gap:1rem;align-items:center;font-family:var(--global-font);}h2.svelte-kfsn1b {margin:0;}p.svelte-kfsn1b {margin:0;color:var(--dark-foreground-l);}"};function qt(e,n){Re(n,!1),Pe(e,ha);let t=q(n,"text",12,""),r=q(n,"size",12,"64"),o=q(n,"shadowColor",12,""),s=q(n,"foregroundTopColor",12,""),i=q(n,"foregroundBottomColor",12,""),a=q(n,"backgroundTopColor",12,""),l=q(n,"backgroundBottomColor",12,""),c=q(n,"title",12,"Default Title"),d=q(n,"subtitle",12,"");var f=fa(),u=C(f);j(()=>Ge(u,"text",t())),j(()=>Ge(u,"size",r())),j(()=>Ge(u,"shadowColor",o())),j(()=>Ge(u,"foregroundTopColor",s())),j(()=>Ge(u,"foregroundBottomColor",i())),j(()=>Ge(u,"backgroundTopColor",a())),j(()=>Ge(u,"backgroundBottomColor",l()));var p=R(u,2),h=C(p),v=C(h,!0);x(h);var _=R(h,2);{var b=m=>{var S=ua(),E=C(S,!0);x(S),j(()=>pe(E,d())),B(m,S)};Ot(_,m=>{d()&&m(b)})}return x(p),x(f),j(()=>pe(v,c())),B(e,f),Ie({get text(){return t()},set text(m){t(m),N()},get size(){return r()},set size(m){r(m),N()},get shadowColor(){return o()},set shadowColor(m){o(m),N()},get foregroundTopColor(){return s()},set foregroundTopColor(m){s(m),N()},get foregroundBottomColor(){return i()},set foregroundBottomColor(m){i(m),N()},get backgroundTopColor(){return a()},set backgroundTopColor(m){a(m),N()},get backgroundBottomColor(){return l()},set backgroundBottomColor(m){l(m),N()},get title(){return c()},set title(m){c(m),N()},get subtitle(){return d()},set subtitle(m){d(m),N()}})}ke(qt,{text:{},size:{},shadowColor:{},foregroundTopColor:{},foregroundBottomColor:{},backgroundTopColor:{},backgroundBottomColor:{},title:{},subtitle:{}},[],[],!0);var va=W('<button class="article-item shadowed hoverable svelte-skpq23"><!></button>'),pa=W('<div class="article-list svelte-skpq23"></div>'),ga=W('<div class="preview-callout shadowed svelte-skpq23"><!></div>'),ma=W('<div class="preview-callout shadowed right svelte-skpq23"><!></div>'),_a=W('<div class="nav-buttons svelte-skpq23"><div style="position: relative;"><button class="nav-button shadowed svelte-skpq23">&larr; Previous</button> <!></div> <div style="position: relative;"><button class="nav-button shadowed svelte-skpq23">&uparrow; Back to List</button></div> <div style="position: relative;"><button class="nav-button shadowed svelte-skpq23">Next &rarr;</button> <!></div></div> <div class="article-content-container svelte-skpq23"><!> <!></div>',1),ba=W('<div class="wrapper svelte-skpq23" style="display: contents;"><!></div>');const ya={hash:"svelte-skpq23",code:".article-list.svelte-skpq23 {display:flex;flex-direction:column;align-items:center;gap:1rem;margin-top:1rem;width:100%;}.article-item.svelte-skpq23 {cursor:pointer;background:var(--dark-background);border:1px solid var(--dark-background-l);padding:1rem;border-radius:1rem;display:flex;align-items:center;gap:1rem;max-width:700px;width:50%;transition:all 100ms ease-in-out;text-align:left;}.article-item.svelte-skpq23:hover {background:var(--dark-background-e);border-color:var(--dark-background-ll);}.wrapper.svelte-skpq23 {position:absolute;}.article-content-container.svelte-skpq23 {display:flex;flex-direction:column;justify-content:center;font-family:Georgia;width:700px;max-width:50%;margin:auto;}.article-content-container hr {border:none;border-top:1px solid var(--dark-background-e);margin:2rem 0;width:100%;}.article-content-container p {line-height:1.5rem;}.article-content-container code {white-space:nowrap;}.article-content-container header {align-items:center;justify-content:center;font-family:var(--global-font);margin:1rem auto;}.nav-buttons.svelte-skpq23 {display:flex;justify-content:space-between;margin:1rem 0;width:700px;max-width:50%;margin-left:auto;margin-right:auto;position:relative;}.nav-button.svelte-skpq23 {position:relative;background:var(--dark-background);border:1px solid var(--dark-background-l);border-radius:0.5rem;padding:0.5rem 1rem;cursor:pointer;font-size:1rem;z-index:1;transition:background-color 0.1s;}.nav-button.svelte-skpq23:disabled {opacity:0.5;cursor:not-allowed;}.nav-button.svelte-skpq23:hover:not(:disabled) {background:var(--dark-background-e);border-color:var(--dark-background-ll);}.preview-callout.svelte-skpq23 {position:absolute;top:110%;left:0;z-index:10;background:var(--dark-background);border:1px solid var(--dark-background-l);border-radius:0.5rem;padding:0.5rem 1rem;pointer-events:none;width:700px;transform:scale(0.75);transform-origin:top left;}.preview-callout.right.svelte-skpq23 {left:auto;right:0;transform-origin:top right;}"};function zo(e,n){Re(n,!1),Pe(e,ya);let t=q(n,"articles",28,()=>[]),r=Se(null),o=Se(!1),s=Se(!1);function i(h){F(r,h)}function a(){F(r,null)}function l(){y(r)!==null&&y(r)>0&&F(r,y(r)-1)}function c(){y(r)!==null&&y(r)<t().length-1&&F(r,y(r)+1)}Tt();var d=ba(),f=C(d);{var u=h=>{var v=pa();Dt(v,5,t,sn,(_,b,m)=>{var S=va(),E=C(S);qt(E,on(()=>y(b).header)),x(S),de("click",S,()=>i(m)),B(_,S)}),x(v),B(h,v)},p=h=>{var v=_a(),_=Pt(v),b=C(_),m=C(b),S=R(m,2);{var E=z=>{var T=ga(),V=C(T);qt(V,on(()=>t()[y(r)-1].header)),x(T),B(z,T)};Ot(S,z=>{y(o)&&y(r)>0&&z(E)})}x(b);var M=R(b,2),w=C(M);x(M);var $=R(M,2),O=C($),Y=R(O,2);{var xe=z=>{var T=ma(),V=C(T);qt(V,on(()=>t()[y(r)+1].header)),x(T),B(z,T)};Ot(Y,z=>{y(s),y(r),te(t()),G(()=>y(s)&&y(r)<t().length-1)&&z(xe)})}x($),x(_);var Z=R(_,2),K=C(Z);qt(K,on(()=>t()[y(r)].header));var k=R(K,2);wi(k,()=>(te(t()),y(r),G(()=>t()[y(r)].content))),x(Z),j(()=>{m.disabled=y(r)===0,O.disabled=(y(r),te(t()),G(()=>y(r)===t().length-1))}),de("click",m,l),de("mouseenter",m,()=>F(o,!0)),de("mouseleave",m,()=>F(o,!1)),de("click",w,a),de("click",O,c),de("mouseenter",O,()=>F(s,!0)),de("mouseleave",O,()=>F(s,!1)),B(h,v)};Ot(f,h=>{y(r)===null?h(u):h(p,!1)})}return x(d),B(e,d),Ie({get articles(){return t()},set articles(h){t(h),N()}})}ke(zo,{articles:{}},[],[],!0);function Oo(e){const n=[{header:{title:"Preprocessor",subtitle:"The definition of micro-managing macros",text:"Pp",size:"64",shadowColor:"var(--preprocessor-color-shadow)",foregroundTopColor:"var(--preprocessor-color-foreground-top)",foregroundBottomColor:"var(--preprocessor-color-foreground-bottom)",backgroundTopColor:"var(--preprocessor-color-background-top)",backgroundBottomColor:"var(--preprocessor-color-background-bottom)"},content:`
                <p>Example preprocessor article content.</p>
            `},{header:{title:"Lexical Analysis",subtitle:"Read it and reap: scanning between the lines.",text:"Lx",size:"64",shadowColor:"var(--lexer-color-shadow)",foregroundTopColor:"var(--lexer-color-foreground-top)",foregroundBottomColor:"var(--lexer-color-foreground-bottom)",backgroundTopColor:"var(--lexer-color-background-top)",backgroundBottomColor:"var(--lexer-color-background-bottom)"},content:`
                <p>Example lexer article content.</p>
            `},{header:{title:"Parsing",subtitle:"A spiraling descent into where things began.",text:"Pa",size:"64",shadowColor:"var(--parser-color-shadow)",foregroundTopColor:"var(--parser-color-foreground-top)",foregroundBottomColor:"var(--parser-color-foreground-bottom)",backgroundTopColor:"var(--parser-color-background-top)",backgroundBottomColor:"var(--parser-color-background-bottom)"},content:`
                <p>Example parsing article content.</p>
            `},{header:{title:"Abstract Syntax Tree Optimization",subtitle:"Miss the forest for the trees no more.",text:"As",size:"64",shadowColor:"var(--ast-color-shadow)",foregroundTopColor:"var(--ast-color-foreground-top)",foregroundBottomColor:"var(--ast-color-foreground-bottom)",backgroundTopColor:"var(--ast-color-background-top)",backgroundBottomColor:"var(--ast-color-background-bottom)"},content:`
                <p>Example AST article content.</p>
            `},{header:{title:"IR Code Generation",subtitle:"Distilled semantics. 200 proof(s).",text:"Ir",size:"64",shadowColor:"var(--ir-color-shadow)",foregroundTopColor:"var(--ir-color-foreground-top)",foregroundBottomColor:"var(--ir-color-foreground-bottom)",backgroundTopColor:"var(--ir-color-background-top)",backgroundBottomColor:"var(--ir-color-background-bottom)"},content:`
                <p>Example IR article content.</p>
            `},{header:{title:"Three-Address Code Optimization",subtitle:"Less is more.",text:"To",size:"64",shadowColor:"var(--tac-color-shadow)",foregroundTopColor:"var(--tac-color-foreground-top)",foregroundBottomColor:"var(--tac-color-foreground-bottom)",backgroundTopColor:"var(--tac-color-background-top)",backgroundBottomColor:"var(--tac-color-background-bottom)"},content:`
                <p>Example TAC article content.</p>
            `},{header:{title:"x86 Code Generation",subtitle:"An unspoken archaic dialect understood only by pedants.",text:"Cg",size:"64",shadowColor:"var(--codegen-color-shadow)",foregroundTopColor:"var(--codegen-color-foreground-top)",foregroundBottomColor:"var(--codegen-color-foreground-bottom)",backgroundTopColor:"var(--codegen-color-background-top)",backgroundBottomColor:"var(--codegen-color-background-bottom)"},content:`
                <p>Example x86 code generation article content.</p>
            `},{header:{title:"Peephole Optimization",subtitle:"Seeing the bigger picture through a tiny window.",text:"Po",size:"64",shadowColor:"var(--peephole-color-shadow)",foregroundTopColor:"var(--peephole-color-foreground-top)",foregroundBottomColor:"var(--peephole-color-foreground-bottom)",backgroundTopColor:"var(--peephole-color-background-top)",backgroundBottomColor:"var(--peephole-color-background-bottom)"},content:`
                <p>Example peephole optimization article content.</p>
            `},{header:{title:"Translation Unit Linking",subtitle:"Here's my address, so call me, maybe.",text:"Tu",size:"64",shadowColor:"var(--link-color-shadow)",foregroundTopColor:"var(--link-color-foreground-top)",foregroundBottomColor:"var(--link-color-foreground-bottom)",backgroundTopColor:"var(--link-color-background-top)",backgroundBottomColor:"var(--link-color-background-bottom)"},content:`
                <p>Example translation unit linking article content.</p>
            `},{header:{title:"Link-Time Optimization",subtitle:"Caching in on visibility without bound.",text:"Li",size:"64",shadowColor:"var(--lto-color-shadow)",foregroundTopColor:"var(--lto-color-foreground-top)",foregroundBottomColor:"var(--lto-color-foreground-bottom)",backgroundTopColor:"var(--lto-color-background-top)",backgroundBottomColor:"var(--lto-color-background-bottom)"},content:`
                <p>Example LTO article content.</p>
            `},{header:{title:"Executable Exporting",subtitle:"Fossilizing fresh code in the sediment of antiquity.",text:"Ex",size:"64",shadowColor:"var(--executable-color-shadow)",foregroundTopColor:"var(--executable-color-foreground-top)",foregroundBottomColor:"var(--executable-color-foreground-bottom)",backgroundTopColor:"var(--executable-color-background-top)",backgroundBottomColor:"var(--executable-color-background-bottom)"},content:`
                <h2>Section 0</h2>
                <blockquote>
                    <p>Please mind the gap between the code and the platform.</p>
                </blockquote>
                <p>Although generating object code and linking translation units are rather complex, operating system authors seem to have consipired to make the last step, exporting an executable, even more complicated and infuriating. Not only does it require targeting a platform far narrower than processor architecture, but also it involves cryptic sigils that summon back the days of hex-editor debugging. Executable formats, be they ELF, PE, Mach-O or even the archaic a.out, are data structures that require a deep understanding of the program at hand, the operating system's loader, and&mdash;especially for Windows&mdash;the dynamic linker. For time limitations and brevity purposes, I focus solely on x86 Windows development for this series and the Haze compiler.</p>
                <hr>

                <h2>Section 1</h2>
                <blockquote>
                    <p>This program cannot be run in DOS mode.</p>
                </blockquote>
                <p>Windows PE&mdash;that's <i>Portable Executable</i>, not to be confused with <a href="https://en.wikipedia.org/wiki/Windows_Preinstallation_Environment"><i>Pre-installation Environment</i></a>&mdash;suffers many shortfalls inherent to an API designed in the early '90s, which itself was more or less a bolt-on addition to the <a href="https://en.wikipedia.org/wiki/New_Executable"><i>New Exectuable</i></a> format pioneered by Windows 1.0 hailing from the mid-'80s. PE has aged remarkably well, no doubt owing to the original designer's ingenuity and forward thinking, but by now, the cracks have surfaced en masse and now mar the otherwise silky smooth surface of modern programs with indellible reminders of yesteryear's technology: MIPS compatibility, bound imports, and the deprecated COFF symbol table, among others.</p>

                <p>Moreover, software needs, usage, and especially build tools have changed over time, but Microsoft's commitment to backwards compatibility has created a spaghetti bowl worthy of Italy's finest. Take for example the <code>TimeDateStamp</code> field: it seems a reasonable guess that the executable uses it to store a build (or perhaps link in the case of dynamic loading?) timestamp. Wrong. Indeed, as Raymond Chen helpfully explains <a href="https://devblogs.microsoft.com/oldnewthing/20240815-00/?p=110131">here</a>, build reproducibility issues mean this field now typically stores a compile hash. Because of course it does. Likewise, investigate the <code>COM Descriptor Directory</code> field: why is it typically omitted? The answer lay within the origins of .NET, the CLR for which continues to use it as metadata storage, though it remains now only a forlorn relic of forgotten times in native code.</p>
                <hr>

                <h2>Section 2</h2>
                <blockquote>
                    <p>Some assembly required.</p>                                
                </blockquote>
                <hr>

                <h2>Section 3</h2>
                <blockquote>
                    <p>You wouldn't steal a function...</p>                                
                </blockquote>   
            `}];zo(e,{get articles(){return n}})}ke(Oo,{},[],[],!0);var wa=W('<h2>A High-Level Overview of <i>Clarity</i></h2> <p>Clarity is a browser-native, vanilla-TypeScript&ndash;composed, fully custom web-based source code editor and from-scratch LSP-compliant language server for my own compiled programming language, <a href="https://github.com/connorjlink/haze"><i>Haze</i></a>. Clarity includes several powerful tools to inspect and explore compilation results and learn more about the compiler and the theory of compiling.</p> <p>Clarity provides simultaneously a visual complement for the diagnostic environment of and promotes future development for the Haze compiler, <em>and</em> offers robust learning material for aspiring compiler engineers. The educuation material in question largely diverts attention away from abstract theory and instead focuses in on practical application questions concerning the implementation of a functional compiler.</p>',1),ka=W(`<h2>A Technical Summary of <i>Clarity</i></h2> <p>Clarity serves as a static site over GitHub pages, but uses elements (literally) of dynamicity to create a responsive experience. The presentation models run as registered web components, but typically use the "Light" DOM for efficient injection of global page styles to easily enable cohesive deeply nested content.</p> <p>Clarity's source code comprises non-erasable TypeScript compiled with <i>tsc</i> and bundled with <a href="https://vite.dev">Vite</a> for efficient client delivery. Clarity originated in ReactJS, but experienced enough performance issues concerning Virtual DOM updates and component re-renders for some elements&mdash;the syntax tree component in particular&mdash;that I elected to re-implement the frontend with vanilla TypeScript to take full manual control of DOM updates. The transition roughly halved the first contentful paint time at the cost of lengthening the source code by about 30%.</p>`,1),xa=W("<h2>A Functional Breakdown of <i>Clarity</i></h2> <p>Clarity's language server architecture revolves around responsiveness and deep vertical integration with the Haze compiler. The language server client and language server server operate as independent web workers concurrently with the main thread and use standard messaging browser APIs to communicate over channels via JSON-RPC. The client and server shake hands at startup and exchange capabilities to intersect a common feature set.</p> <p>The server manually routes incoming requests for maximal control and efficiency by enabling truly asynchronous interaction. Apart from the message channel to the client, the server establishes a persistent WebSocket connection to the compiler, whenceforth running in daemon mode using a threaded architecture to minimize request latency and maximize data throughput. The compiler uses a custom WebSocket-standard-compliant host built atop Winsock for both high messaging performance and compatibility.</p> <p>Meanwhile, the client orchestrates markup generation and prompts DOM updates as needed by relaying messages to the source code editor running on the main thread. The editor synchronizes document data with the client using minimal JSON state deltas, thereby saving on both latency and messaging overhead. The server, however, always transmits the full source code for the active document to the compiler for processing, ensuring that semantic analysis runs on the latest&mdash;and most complete&mdash;document version.</p>",1),Ca=W("<h2>A Bitwise Dissection of <i>Clarity</i></h2> <p>The Haze compiler maintains a comprehensive symbol database, exporting syntactic and semantic tokens via a custom reflective JSON serializer. It transmits information using the WebSocket connection back to the language server, which in turn transforms and enriches the data before storage as mapped LSP-compliant workspace symbols. This process, while complex, ensures that the language server can efficiently retrieve and update symbols in real-time as the user edits source code without the need to recompile the document per keystroke. The language server, hence, must apply editor deltas for document positional information per request to recycle previous data.</p> <p>Clarity's source code editor leverages differential synchronization with the client and, through extension, official LSP-specified incremental synchronization with the server. The server asynchronously services requests, throttling update rates to match the compiler's ingestion capacity using a custom dynamic backpressure metric. All told, the compiler can process, serialize, and export about 10,000 tokens per second running on a single thread with the potential for embarrasingly parallel scaling using the built-in concurrency-safe service injection subsystem.</p>",1),Ea=W('<div class="about-page svelte-dzi0tj"><!> <!> <!> <!></div>');const Ta={hash:"svelte-dzi0tj",code:".about-page.svelte-dzi0tj {display:flex;flex-direction:column;gap:1rem;width:50%;max-width:700px;margin:auto;padding-top:1rem;}"};function Do(e){Pe(e,Ta);var n=Ea(),t=C(n);Nt(t,{header:"I Loathe Technical Details",children:(i,a)=>{var l=wa();X(4),B(i,l)},$$slots:{default:!0}});var r=R(t,2);Nt(r,{header:"I Like Technical Details",children:(i,a)=>{var l=ka();X(4),B(i,l)},$$slots:{default:!0}});var o=R(r,2);Nt(o,{header:"I Love Technical Details",children:(i,a)=>{var l=xa();X(6),B(i,l)},$$slots:{default:!0}});var s=R(o,2);Nt(s,{header:"I Live for Technical Details",children:(i,a)=>{var l=Ca();X(4),B(i,l)},$$slots:{default:!0}}),x(n),B(e,n)}ke(Do,{},[],[],!0);const Bo="pane-visibility";function Sa(){const e=localStorage.getItem(Bo);if(e)try{const n=JSON.parse(e);if(Array.isArray(n))return n}catch{}return null}function Rr(e){localStorage.setItem(Bo,JSON.stringify(e))}customElements.whenDefined("output-window").then(()=>{const e=document.querySelector("output-window"),n={notify:t=>{console.log(t),e.addMessage(t)}};window.addEventListener("DOMContentLoaded",()=>{const t=Array.from(document.querySelectorAll("symbol-toggle")),r=document.querySelector("pane-view");let o=Sa();(!o||o.length!==t.length)&&(o=Array(t.length).fill(!0),Rr(o)),t.forEach((f,u)=>{f.checked=o[u]??!0,f.addEventListener("toggle-change",p=>{o[u]=p.detail.checked,Rr(o),r.setVisiblePanes(o)})}),r.setVisiblePanes(o);const s=r.querySelector("#source-pane source-editor");s&&(s.attachEventListeners(),s.initialize("file:///C:/source.hz",n,zt)),r.querySelector("program-tree");const i=r.querySelector("#ir-pane source-editor");i&&(i.attachEventListeners(),i.initialize("file:///C:/ir.hzi",n,zt));const a=r.querySelector("#asm-pane source-editor");a&&(a.attachEventListeners(),a.initialize("file:///C:/asm.hzs",n,zt));const l=new Uint8Array([72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33]),c=r.querySelector("hex-viewer");c&&customElements.whenDefined("hex-viewer").then(()=>{c.initialize("file:///program.exe",l,zt)});const d=document.querySelector("symbol-tristate");d&&(d.state=0,d.addEventListener("tristate-change",f=>{const u=f.detail.state;console.log(`Output window state changed to: ${u}`),u===0?e.auto():u===1?e.show():u===2&&e.hide()}))})});const Ir=document.querySelector("#learn-page");Ir&&Cn(Oo,{target:Ir,props:{}});const Mr=document.querySelector("#about-page");Mr&&Cn(Do,{target:Mr,props:{}});const La=new Worker(new URL("/assets/LSPServerWorker-BOXhEwlU.js",import.meta.url),{type:"module"}),zt=new Worker(new URL("/assets/LSPClientWorker-2arvf2PA.js",import.meta.url),{type:"module"}),Wo=new MessageChannel,Dn=Wo.port1,Bn=Wo.port2;La.postMessage({type:"connect",port:Dn},[Dn]);zt.postMessage({type:"connect",port:Bn},[Bn]);Dn.start();Bn.start();
