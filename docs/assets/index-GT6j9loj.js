var P=Object.defineProperty;var U=(t,l,e)=>l in t?P(t,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[l]=e;var c=(t,l,e)=>U(t,typeof l!="symbol"?l+"":l,e);(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();class q extends HTMLElement{constructor(){super();c(this,"_messages",[]);c(this,"_visible",!0);c(this,"_endRef",null)}static get observedAttributes(){return["visible"]}get messages(){return this._messages}set messages(e){this._messages=e,this.render(),this.scrollToEnd()}get visible(){return this._visible}set visible(e){this._visible=e,this.render()}scrollToEnd(){this._endRef&&this._endRef.scrollIntoView({behavior:"smooth"})}attributeChangedCallback(e,n,i){e==="visible"&&(this.visible=i!=="false")}connectedCallback(){this.render()}render(){this.innerHTML=`
            <div class="console${this.visible?"":" fade-out"}">
                ${this._messages.map(e=>`<div class="console-line">${e.text}</div>`).join("")}
                <div id="end"></div>
            </div>
        `,this._endRef=this.querySelector("#end"),this.scrollToEnd()}}customElements.define("output-window",q);class B{constructor(l){c(this,"original");c(this,"addBuffer");c(this,"pieces");this.original=l,this.addBuffer="",this.pieces=[{buffer:"original",start:0,length:l.length}]}insert(l,e){if(e.length===0)return;const n=this.addBuffer.length;this.addBuffer+=e;let i=0,s=0;for(;s<this.pieces.length;s++){const h=this.pieces[s];if(i+h.length>=l)break;i+=h.length}if(s===this.pieces.length){this.pieces.push({buffer:"add",start:n,length:e.length});return}const r=this.pieces[s],a=l-i,o=[];a>0&&o.push({buffer:r.buffer,start:r.start,length:a}),o.push({buffer:"add",start:n,length:e.length}),a<r.length&&o.push({buffer:r.buffer,start:r.start+a,length:r.length-a}),this.pieces.splice(s,1,...o)}delete(l,e){let n=0,i=0;for(;i<this.pieces.length&&n+this.pieces[i].length<=l;)n+=this.pieces[i].length,i++;const s=i,r=l-n;let a=e;const o=[];for(;a>0&&i<this.pieces.length;){const h=this.pieces[i],d=i===s?r:0,u=h.length-d;Math.max(0,h.length-u),d>0&&o.push({buffer:h.buffer,start:h.start,length:d}),u<h.length&&o.push({buffer:h.buffer,start:h.start+d+a,length:h.length-(d+a)}),a-=u,i++}this.pieces.splice(s,i-s,...o)}getText(){let l="";for(const e of this.pieces){const n=e.buffer==="original"?this.original:this.addBuffer;l+=n.substr(e.start,e.length)}return l}}var k;(t=>{t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(k||(k={}));var A;(t=>{t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(A||(A={}));var M;(t=>{t.None=0,t.Full=1,t.Incremental=2})(M||(M={}));var R;(t=>{t.Text=1,t.Read=2,t.Write=3})(R||(R={}));var $;(t=>{t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})($||($={}));var S;(t=>{t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(S||(S={}));function v(t){let l="";return t.childNodes.forEach((e,n,i)=>{e.nodeType===Node.TEXT_NODE?l+=e.data:e.tagName==="BR"?l+=`
`:e.tagName==="DIV"?(l+=v(e),n<i.length-1&&(l+=`
`)):e.nodeType===Node.ELEMENT_NODE&&(l+=v(e))}),l}function I(t){let l=0;const e=window.getSelection();if(e&&e.rangeCount>0){const n=e.getRangeAt(0),i=n.cloneRange();i.selectNodeContents(t),i.setEnd(n.endContainer,n.endOffset),l=i.toString().length}return l}function F(t,l){const e=window.getSelection();if(!e)return;let n=0,i=[t],s,r=!1;for(;i.length&&!r&&(s=i.pop(),!!s);)if(s.nodeType===Node.TEXT_NODE){const a=s.length;if(n+a>=l){const o=document.createRange();o.setStart(s,l-n),o.collapse(!0),e.removeAllRanges(),e.addRange(o),r=!0}else n+=a}else{let a=Array.from(s.childNodes);for(let o=a.length-1;o>=0;o--)i.push(a[o])}}class W extends HTMLElement{constructor(){super();c(this,"_pieceTable");c(this,"_consoleListener",null);c(this,"_inputRef",null);c(this,"_highlightRef",null);c(this,"_sourceUri","");c(this,"_lastText","");c(this,"_client",null);c(this,"_hasInitialized",!1);c(this,"_boundInputCallback",this.inputCallback.bind(this));c(this,"_boundScrollCallback",this.scrollCallback.bind(this));c(this,"_boundKeydownCallback",this.keydownCallback.bind(this));this._pieceTable=new B("function nvr main = () {}")}connectedCallback(){}disconnectedCallback(){var e;(e=this._client)==null||e.postMessage({type:"execute",method:"closeDocument",params:{uri:this._sourceUri}})}initialize(e,n,i){var s;this._hasInitialized=!0,this._consoleListener||(this._consoleListener=n),i&&(this._client=i,this._client.addEventListener("message",r=>{var a,o,h;r.data.type==="log"?(a=this._consoleListener)==null||a.notify(r.data.message):r.data.type==="error"?(o=this._consoleListener)==null||o.notify(r.data.message):r.data.type==="compileResult"&&((h=this._consoleListener)==null||h.notify(JSON.stringify(r.data.result)))}),this._client.addEventListener("messageerror",r=>{var a;(a=this._consoleListener)==null||a.notify(r.data)}),this._sourceUri=e),(s=this._client)==null||s.postMessage({type:"execute",method:"openDocument",params:{uri:this._sourceUri,sourceCode:this._pieceTable.getText()}}),this.render()}inputCallback(e){this.handleInputChange(e)}scrollCallback(e){this.syncScroll()}keydownCallback(e){this.handleKeyDown(e)}attachEventListeners(){var e,n,i;(e=this._inputRef)==null||e.addEventListener("input",this._boundInputCallback),(n=this._inputRef)==null||n.addEventListener("scroll",this._boundScrollCallback),(i=this._inputRef)==null||i.addEventListener("keydown",this._boundKeydownCallback)}detachEventListeners(){var e,n,i;(e=this._inputRef)==null||e.removeEventListener("input",this._boundInputCallback),(n=this._inputRef)==null||n.removeEventListener("scroll",this._boundScrollCallback),(i=this._inputRef)==null||i.removeEventListener("keydown",this._boundKeydownCallback)}handleInputChange(e){if(!this._inputRef)return;const n=v(this._inputRef),i=I(this._inputRef);let s=0;for(;s<this._lastText.length&&s<n.length&&this._lastText[s]===n[s];)s++;let r=this._lastText.length-1,a=n.length-1;for(;r>=s&&a>=s&&this._lastText[r]===n[a];)r--,a--;r>=s&&this._pieceTable.delete(s,r-s+1),a>=s&&this._pieceTable.insert(s,n.slice(s,a+1)),this._lastText=n,this.renderHighlight([]),F(this._inputRef,i)}handleKeyDown(e){e.key==="Tab"&&(e.preventDefault(),document.execCommand("insertText",!1,"    ")),e.key==="Enter"&&(e.preventDefault(),document.execCommand("insertLineBreak"))}renderHighlight(e){var n;this._highlightRef&&(this._pieceTable.getText(),(n=this._client)==null||n.postMessage({type:"execute",method:"recycle",params:{uri:this._sourceUri,deltas:e}}))}syncScroll(){this._inputRef&&this._highlightRef&&(this._highlightRef.scrollTop=this._inputRef.scrollTop,this._highlightRef.scrollLeft=this._inputRef.scrollLeft)}render(){if(!this._hasInitialized)throw new Error("call initialize() on SourceEditorElement before rendering.");const e=this._pieceTable.getText();this.innerHTML=`
            <div class="editor-shell">
                <pre class="highlight-layer"></pre>
                <div class="input-layer" contenteditable="true" spellcheck="false"></div>
            </div>
        `,this._highlightRef=this.querySelector(".highlight-layer"),this._inputRef=this.querySelector(".input-layer"),this._inputRef&&(this._inputRef.textContent=e,this._lastText=e),this.attachEventListeners(),this.renderHighlight([])}}customElements.define("source-editor",W);class G extends HTMLElement{constructor(){super();c(this,"_data",new Uint8Array);c(this,"_columns",16);c(this,"_highlightRef",null);c(this,"_client",null);c(this,"_symbols",[]);c(this,"_sourceUri","");c(this,"_hasInitialized",!1)}connectedCallback(){}disconnectedCallback(){var e;(e=this._client)==null||e.postMessage({type:"execute",method:"closeDocument",params:{uri:this._sourceUri}})}initialize(e,n,i,s=16){this._hasInitialized=!0,this._client=n,this._sourceUri=e,this._data=i,this._columns=s,this._client.addEventListener("message",r=>{r.data.type==="symbolInfo"&&r.data.uri===this._sourceUri&&(this._symbols=r.data.symbols,this.render())}),this._client.postMessage({type:"execute",method:"openDocument",params:{uri:this._sourceUri,sourceCode:Array.from(this._data).map(r=>r.toString(16).padStart(2,"0")).join(" ")}}),this.render()}setColumns(e){e!==this._columns&&(this._columns=e,this.render())}getSymbolAt(e){for(const n of this._symbols)if(e>=n.address&&e<n.address+n.length)return n;return null}render(){if(!this._hasInitialized)throw new Error("call initialize() on HexViewerElement before rendering.");this.innerHTML=`
            <div class="hex-shell">
                <pre class="hex-highlight-layer"></pre>
            </div>
        `,this._highlightRef=this.querySelector(".hex-highlight-layer"),this._highlightRef&&(this._highlightRef.innerHTML=this.renderHex())}renderHex(){let e="";for(let n=0;n<Math.ceil(this._data.length/this._columns);n++){const i=n*this._columns;e+=`<span class="hex-address">${i.toString(16).padStart(8,"0")}</span>  `;let s="",r="";for(let o=0;o<this._columns;o++){const h=i+o;if(h<this._data.length){const d=this.getSymbolAt(h),u=d?d.color:"#ccc",p=this._data[h].toString(16).padStart(2,"0")+" ";u!==s&&r?(e+=`<span style="color:${s}">${r}</span>`,r=p,s=u):(r+=p,s=u)}else r&&(e+=`<span style="color:${s}">${r}</span>`,r=""),e+="   "}r&&(e+=`<span style="color:${s}">${r}</span>`),e+=" ";let a="";for(let o=0;o<this._columns;o++){const h=i+o;if(h<this._data.length){const d=this._data[h];a+=d>=32&&d<=126?String.fromCharCode(d):"."}else a+=" "}e+=`<span class="hex-ascii">${a}</span>
`}return e}}customElements.define("hex-viewer",G);class V extends HTMLElement{constructor(){super(...arguments);c(this,"tabsContent");c(this,"pages",[])}connectedCallback(){this.render(),window.addEventListener("popstate",n=>{var s;const i=((s=n.state)==null?void 0:s.tab)??this.getTabIndexFromUrl();typeof i=="number"&&i>=0&&i<this.pages.length&&this.activatePage(i,!1)});const e=this.getTabIndexFromUrl();typeof e=="number"&&e>=0&&e<this.pages.length&&this.activatePage(e,!1)}getTabIndexFromUrl(){let e=window.location.pathname.replace(/^\//,"");e.startsWith("clarity/")&&(e=e.substring(8));const n=Array.from(this.querySelectorAll("my-tab"));for(let i=0;i<n.length;i++)if(n[i].getAttribute("route")===e)return i;return 0}activatePage(e,n=!0){if(this.pages.forEach((i,s)=>{const r=this.tabsContent.querySelectorAll("input"),a=s===e;i.classList.toggle("active",a),r[s]&&(r[s].checked=a)}),n){const s=Array.from(this.querySelectorAll("my-tab"))[e].getAttribute("route")||"",a=`${window.location.origin}/clarity/${s}`;history.pushState({tab:e},"",a)}}render(){const e=this.querySelector("my-header");if(e){const s=e.children[0];if(s){let r=document.createElement("div");r.className="tabs-bar",s.classList.add("tabs-header"),r.appendChild(s),this.prepend(r)}e.remove()}this.tabsContent=document.createElement("div"),this.tabsContent.className="tabs-content";const n=this.querySelector(".tabs-bar");n?n.append(this.tabsContent):this.prepend(this.tabsContent),Array.from(this.querySelectorAll("my-tab")).forEach((s,r)=>{const a=s.getAttribute("label")||`Tab ${r+1}`,o=`tab-${r}`,h=`tabpanel-${r}`,d=document.createElement("input");d.type="radio",d.id=o,d.checked=r===0,d.addEventListener("change",()=>this.activatePage(r,!0));const u=document.createElement("label");u.htmlFor=o,u.textContent=a;const p=document.createElement("span");p.className="tab-radio-wrapper",p.appendChild(d),p.appendChild(u),this.tabsContent.appendChild(p),s.classList.add("page"),s.setAttribute("id",h),r===0&&s.classList.add("active"),this.pages.push(s)})}}customElements.define("my-tabview",V);class j extends HTMLElement{}customElements.define("my-tab",j);class X extends HTMLElement{}customElements.define("my-header",X);class J extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){const l=document.createElement("div");l.className="article-list";const e=this.querySelectorAll("my-article");for(let i=0;i<e.length;i++){const s=e[i],r=s.querySelector("my-article-header");if(!r){console.warn(`Article ${i} does not have a header.`);continue}s.getAttribute("article-route");const a=document.createElement("div");a.className="article-item shadowed hoverable",a.innerHTML=r.outerHTML,a.addEventListener("click",()=>{const o=this.querySelector(".article-content-container");o&&(l.style.display="none",o.style.display="flex",o.innerHTML=s.innerHTML)}),l.appendChild(a)}this.innerHTML="";let n=document.createElement("div");n.className="article-content-container",n.style.display="none",this.appendChild(l),this.appendChild(n)}}class Q extends HTMLElement{constructor(){super(...arguments);c(this,"_rendered",!1)}connectedCallback(){this.render()}render(){if(this._rendered)return;this._rendered=!0;const e=this.getAttribute("article-title")||"Untitled Article",n=this.getAttribute("article-description")||"",i=document.createElement("header"),s=document.createElement("div"),r=document.createElement("h1");r.textContent=e;const a=document.createElement("p");a.className="article-desc",a.textContent=n,s.appendChild(r),s.appendChild(a),i.appendChild(s);const o=this.querySelector("my-custom-icon");o&&i.prepend(o);const h=document.createElement("section"),d=document.createElement("main"),u=document.createElement("article"),p=this.querySelector("my-article-content");p&&u.appendChild(p),d.appendChild(u);const f=document.createElement("aside"),m=document.createElement("span");m.textContent="More Articles";const b=document.createElement("nav");b.className="article-nav",f.appendChild(m),f.appendChild(b),h.appendChild(d),h.appendChild(f);const C=document.createElement("footer"),T=document.createElement("div");T.innerHTML=`
            <span>Source code available at <a href="https://github.com/connorjlink/clarity">https://github.com/connorjlink/clarity</a>.</span>
            <br>
            <span>&copy; 2025 Connor J. Link. All Rights Reserved.</span>
        `,C.appendChild(T),this.textContent="",this.appendChild(i),this.appendChild(h),this.appendChild(C);const z=Array.from(document.querySelectorAll("my-article-header my-custom-icon"));let L=[];for(const O of z){const y=O;y.getAttribute("article-title")===e&&y.classList.add("active"),L.push(y)}b.append(...L)}}class Y extends HTMLElement{connectedCallback(){this.render()}render(){const l=this.getAttribute("article-title")||"Untitled Article",e=this.getAttribute("article-description")||"No description provided.",n=this.querySelector("my-custom-icon");this.innerHTML=`
            <div class="article-header">
                ${n?n.outerHTML:""}
                <div>
                    <h2 class="article-title">${l}</h2>
                    <p class="article-desc">${e}</p>
                </div>
            </div>
        `}}customElements.define("my-articleselector",J);customElements.define("my-article-header",Y);customElements.define("my-article",Q);class Z extends HTMLElement{connectedCallback(){this.render()}render(){const l=this.getAttribute("text")||"Hz",e=this.getAttribute("size")||"300",n=this.getAttribute("radius"),i=n?`border-radius: ${n};`:"",s=this.getAttribute("shadow-color")||"var(--haze-color-shadow)",r=this.getAttribute("foreground-top-color")||"var(--haze-color-foreground-top)",a=this.getAttribute("foreground-bottom-color")||"var(--haze-color-foreground-bottom)",o=this.getAttribute("background-top-color")||"var(--haze-color-background-top)",h=this.getAttribute("background-bottom-color")||"var(--haze-color-background-bottom)",d=(Math.random()+1).toString(36).substring(7),u=`bgGradient-${d}`,p=`highlight-${d}`,f=`textGradient-${d}`,m=`dropShadow-${d}`;this.innerHTML=`
            <svg class="my-custom-icon" style="${i}" width="${e}" height="${e}" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
            	<defs>
            		<linearGradient id="${u}" x1="0%" y1="0%" x2="0%" y2="100%">
            			<stop offset="0%" stop-color="${o}" />
            			<stop offset="100%" stop-color="${h}" />
            		</linearGradient>

            		<linearGradient id="${f}" x1="0%" y1="0%" x2="0%" y2="100%">
            			<stop offset="0%" stop-color="${r}" />
            			<stop offset="100%" stop-color="${a}" />
            		</linearGradient>

            		<linearGradient id="highlight" x1="0%" y1="0%" x2="100%" y2="100%">
            			<stop offset="0%" stop-color="white" stop-opacity="0" />
            			<stop offset="100%" stop-color="white" stop-opacity="0.4" />
            		</linearGradient>

            		<filter id="${m}" x="-20%" y="-20%" width="140%" height="140%">
            			<feDropShadow dx="5" dy="5" stdDeviation="10" flood-color="rgba(0,0,0,0.5)" />
            		</filter>
            	</defs>

            	<g>
            		<rect x="0" y="0" width="300" height="300" fill="url(#${u})" />
            		<rect x="0" y="0" width="300" height="300" fill="url(#${p})" />
            	</g>

            	<text x="155" y="170" text-anchor="middle" dominant-baseline="middle"
            		  font-size="180"
            		  fill="${s}" opacity="1.0">
            		${l}
            	</text>

            	<text x="150" y="165" text-anchor="middle" dominant-baseline="middle"
            		  font-size="180"
            		  fill="url(#${f})" filter="url(#${m})"
            		  stroke="rgba(255,255,255,0.3)" stroke-width="1">
            		${l}
            	</text>
            </svg>
        `}}customElements.define("my-custom-icon",Z);class K extends HTMLElement{constructor(){super();c(this,"isExpanded",!1);c(this,"headerDivElement",null);c(this,"caretSpanElement",null);c(this,"contentDivElement",null)}static get observedAttributes(){return["header"]}connectedCallback(){if(this.querySelector(".my-collapsible-header"))return;this.headerDivElement=document.createElement("div"),this.headerDivElement.className="my-collapsible-header",this.headerDivElement.tabIndex=0,this.caretSpanElement=document.createElement("span"),this.caretSpanElement.className="my-collapsible-caret",this.caretSpanElement.innerHTML=`
            <svg viewBox="0 0 16 16" fill="none" width="16" height="16">
                <path d="M5 6l3 3 3-3" stroke="#aaa" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        `;const e=document.createElement("span");for(e.className="my-collapsible-header-text",e.textContent=this.getAttribute("header")||"",this.headerDivElement.appendChild(this.caretSpanElement),this.headerDivElement.appendChild(e),this.contentDivElement=document.createElement("div"),this.contentDivElement.className="my-collapsible-content";this.firstChild&&(this.firstChild!==this.headerDivElement&&this.firstChild!==this.contentDivElement);)this.contentDivElement.appendChild(this.firstChild);this.appendChild(this.headerDivElement),this.appendChild(this.contentDivElement),this.headerDivElement.addEventListener("click",()=>this.toggle()),this.headerDivElement.addEventListener("keydown",n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),this.toggle())})}attributeChangedCallback(e,n,i){if(e==="header"&&this.headerDivElement){const s=this.headerDivElement.querySelector(".my-collapsible-header-text");s&&(s.textContent=i||"")}}toggle(){this.isExpanded=!this.isExpanded,this.isExpanded?this.setAttribute("expanded",""):this.removeAttribute("expanded")}}customElements.define("my-collapsible",K);const g=document.getElementById("output-window");g.messages=[];g.visible=!1;var E;const ee=()=>{g.visible=!0,E&&clearTimeout(E.current),E=setTimeout(()=>g.visible=!1,1e4)},te={notify:t=>{console.log(t),g.messages=[...g.messages,{id:Date.now().toString(),text:t,visible:!0}],ee()}},se=new Worker(new URL("/clarity/assets/language_server_worker-BOXhEwlU.js",import.meta.url),{type:"module"}),w=new Worker(new URL("/clarity/assets/language_client_worker-2arvf2PA.js",import.meta.url),{type:"module"}),H=new MessageChannel,_=H.port1,x=H.port2;se.postMessage({type:"connect",port:_},[_]);w.postMessage({type:"connect",port:x},[x]);_.start();x.start();const N=document.querySelector("#main-editor");N.attachEventListeners();N.initialize("file:///c:/Users/Connor/Desktop/clarity/src/index.ts",te,w);const ie=new Uint8Array([72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33,72,101,120,32,86,105,101,119,101,114,33]),D=document.createElement("hex-viewer");document.body.appendChild(D);D.initialize("file:///mock.bin",w,ie,16);
