var O=Object.defineProperty;var P=(t,l,e)=>l in t?O(t,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[l]=e;var h=(t,l,e)=>P(t,typeof l!="symbol"?l+"":l,e);(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();class H extends HTMLElement{constructor(){super();h(this,"_messages",[]);h(this,"_visible",!0);h(this,"_endRef",null)}static get observedAttributes(){return["visible"]}get messages(){return this._messages}set messages(e){this._messages=e,this.render(),this.scrollToEnd()}get visible(){return this._visible}set visible(e){this._visible=e,this.render()}scrollToEnd(){this._endRef&&this._endRef.scrollIntoView({behavior:"smooth"})}attributeChangedCallback(e,r,s){e==="visible"&&(this.visible=s!=="false")}connectedCallback(){this.render()}render(){this.innerHTML=`
            <div class="console${this.visible?"":" fade-out"}">
                ${this._messages.map(e=>`<div class="console-line">${e.text}</div>`).join("")}
                <div id="end"></div>
            </div>
        `,this._endRef=this.querySelector("#end"),this.scrollToEnd()}}customElements.define("output-window",H);class S{constructor(l){h(this,"original");h(this,"addBuffer");h(this,"pieces");this.original=l,this.addBuffer="",this.pieces=[{buffer:"original",start:0,length:l.length}]}insert(l,e){if(e.length===0)return;const r=this.addBuffer.length;this.addBuffer+=e;let s=0,i=0;for(;i<this.pieces.length;i++){const c=this.pieces[i];if(s+c.length>=l)break;s+=c.length}if(i===this.pieces.length){this.pieces.push({buffer:"add",start:r,length:e.length});return}const n=this.pieces[i],o=l-s,a=[];o>0&&a.push({buffer:n.buffer,start:n.start,length:o}),a.push({buffer:"add",start:r,length:e.length}),o<n.length&&a.push({buffer:n.buffer,start:n.start+o,length:n.length-o}),this.pieces.splice(i,1,...a)}delete(l,e){let r=0,s=0;for(;s<this.pieces.length&&r+this.pieces[s].length<=l;)r+=this.pieces[s].length,s++;const i=s,n=l-r;let o=e;const a=[];for(;o>0&&s<this.pieces.length;){const c=this.pieces[s],d=s===i?n:0,u=c.length-d;Math.max(0,c.length-u),d>0&&a.push({buffer:c.buffer,start:c.start,length:d}),u<c.length&&a.push({buffer:c.buffer,start:c.start+d+o,length:c.length-(d+o)}),o-=u,s++}this.pieces.splice(i,s-i,...a)}getText(){let l="";for(const e of this.pieces){const r=e.buffer==="original"?this.original:this.addBuffer;l+=r.substr(e.start,e.length)}return l}}var T;(t=>{t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(T||(T={}));var L;(t=>{t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(L||(L={}));var C;(t=>{t.None=0,t.Full=1,t.Incremental=2})(C||(C={}));var A;(t=>{t.Text=1,t.Read=2,t.Write=3})(A||(A={}));var R;(t=>{t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(R||(R={}));var k;(t=>{t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(k||(k={}));function v(t){let l="";return t.childNodes.forEach((e,r,s)=>{e.nodeType===Node.TEXT_NODE?l+=e.data:e.tagName==="BR"?l+=`
`:e.tagName==="DIV"?(l+=v(e),r<s.length-1&&(l+=`
`)):e.nodeType===Node.ELEMENT_NODE&&(l+=v(e))}),l}function z(t){let l=0;const e=window.getSelection();if(e&&e.rangeCount>0){const r=e.getRangeAt(0),s=r.cloneRange();s.selectNodeContents(t),s.setEnd(r.endContainer,r.endOffset),l=s.toString().length}return l}function F(t,l){const e=window.getSelection();if(!e)return;let r=0,s=[t],i,n=!1;for(;s.length&&!n&&(i=s.pop(),!!i);)if(i.nodeType===Node.TEXT_NODE){const o=i.length;if(r+o>=l){const a=document.createRange();a.setStart(i,l-r),a.collapse(!0),e.removeAllRanges(),e.addRange(a),n=!0}else r+=o}else{let o=Array.from(i.childNodes);for(let a=o.length-1;a>=0;a--)s.push(o[a])}}class U extends HTMLElement{constructor(){super();h(this,"_pieceTable");h(this,"_consoleListener",null);h(this,"_inputRef",null);h(this,"_highlightRef",null);h(this,"_sourceUri","");h(this,"_lastText","");h(this,"_client",null);h(this,"_hasInitialized",!1);h(this,"_boundInputCallback",this.inputCallback.bind(this));h(this,"_boundScrollCallback",this.scrollCallback.bind(this));h(this,"_boundKeydownCallback",this.keydownCallback.bind(this));this._pieceTable=new S("function nvr main = () {}")}connectedCallback(){}disconnectedCallback(){var e;(e=this._client)==null||e.postMessage({type:"execute",method:"closeDocument",params:{uri:this._sourceUri}})}initialize(e,r,s){var i;this._hasInitialized=!0,this._consoleListener||(this._consoleListener=r),s&&(this._client=s,this._client.addEventListener("message",n=>{var o,a,c;n.data.type==="log"?(o=this._consoleListener)==null||o.notify(n.data.message):n.data.type==="error"?(a=this._consoleListener)==null||a.notify(n.data.message):n.data.type==="compileResult"&&((c=this._consoleListener)==null||c.notify(JSON.stringify(n.data.result)))}),this._client.addEventListener("messageerror",n=>{var o;(o=this._consoleListener)==null||o.notify(n.data)}),this._sourceUri=e),(i=this._client)==null||i.postMessage({type:"execute",method:"openDocument",params:{uri:this._sourceUri,sourceCode:this._pieceTable.getText()}}),this.render()}inputCallback(e){this.handleInputChange(e)}scrollCallback(e){this.syncScroll()}keydownCallback(e){this.handleKeyDown(e)}attachEventListeners(){var e,r,s;(e=this._inputRef)==null||e.addEventListener("input",this._boundInputCallback),(r=this._inputRef)==null||r.addEventListener("scroll",this._boundScrollCallback),(s=this._inputRef)==null||s.addEventListener("keydown",this._boundKeydownCallback)}detachEventListeners(){var e,r,s;(e=this._inputRef)==null||e.removeEventListener("input",this._boundInputCallback),(r=this._inputRef)==null||r.removeEventListener("scroll",this._boundScrollCallback),(s=this._inputRef)==null||s.removeEventListener("keydown",this._boundKeydownCallback)}handleInputChange(e){if(!this._inputRef)return;const r=v(this._inputRef),s=z(this._inputRef);let i=0;for(;i<this._lastText.length&&i<r.length&&this._lastText[i]===r[i];)i++;let n=this._lastText.length-1,o=r.length-1;for(;n>=i&&o>=i&&this._lastText[n]===r[o];)n--,o--;n>=i&&this._pieceTable.delete(i,n-i+1),o>=i&&this._pieceTable.insert(i,r.slice(i,o+1)),this._lastText=r,this.renderHighlight([]),F(this._inputRef,s)}handleKeyDown(e){e.key==="Tab"&&(e.preventDefault(),document.execCommand("insertText",!1,"    ")),e.key==="Enter"&&(e.preventDefault(),document.execCommand("insertLineBreak"))}renderHighlight(e){var r;this._highlightRef&&(this._pieceTable.getText(),(r=this._client)==null||r.postMessage({type:"execute",method:"recycle",params:{uri:this._sourceUri,deltas:e}}))}syncScroll(){this._inputRef&&this._highlightRef&&(this._highlightRef.scrollTop=this._inputRef.scrollTop,this._highlightRef.scrollLeft=this._inputRef.scrollLeft)}render(){if(!this._hasInitialized)throw new Error("call initialize() on SourceEditorElement before rendering.");const e=this._pieceTable.getText();this.innerHTML=`
            <div class="editor-shell">
                <pre class="highlight-layer"></pre>
                <div class="input-layer" contenteditable="true" spellcheck="false"></div>
            </div>
        `,this._highlightRef=this.querySelector(".highlight-layer"),this._inputRef=this.querySelector(".input-layer"),this._inputRef&&(this._inputRef.textContent=e,this._lastText=e),this.attachEventListeners(),this.renderHighlight([])}}customElements.define("source-editor",U);class q extends HTMLElement{constructor(){super(...arguments);h(this,"tabsContent");h(this,"pages",[])}connectedCallback(){this.render(),window.addEventListener("popstate",r=>{var i;const s=((i=r.state)==null?void 0:i.tab)??this.getTabIndexFromUrl();typeof s=="number"&&s>=0&&s<this.pages.length&&this.activatePage(s,!1)});const e=this.getTabIndexFromUrl();typeof e=="number"&&e>=0&&e<this.pages.length&&this.activatePage(e,!1)}getTabIndexFromUrl(){let e=window.location.pathname.replace(/^\//,"");e.startsWith("clarity/")&&(e=e.substring(8));const r=Array.from(this.querySelectorAll("my-tab"));for(let s=0;s<r.length;s++)if(r[s].getAttribute("route")===e)return s;return 0}activatePage(e,r=!0){if(this.pages.forEach((s,i)=>{const n=this.tabsContent.querySelectorAll("input"),o=i===e;s.classList.toggle("active",o),n[i]&&(n[i].checked=o)}),r){const i=Array.from(this.querySelectorAll("my-tab"))[e].getAttribute("route")||"",o=`${window.location.origin}/clarity/${i}`;history.pushState({tab:e},"",o)}}render(){const e=this.querySelector("my-header");if(e){const i=e.children[0];if(i){let n=document.createElement("div");n.className="tabs-bar",i.classList.add("tabs-header"),n.appendChild(i),this.prepend(n)}e.remove()}this.tabsContent=document.createElement("div"),this.tabsContent.className="tabs-content";const r=this.querySelector(".tabs-bar");r?r.append(this.tabsContent):this.prepend(this.tabsContent),Array.from(this.querySelectorAll("my-tab")).forEach((i,n)=>{const o=i.getAttribute("label")||`Tab ${n+1}`,a=`tab-${n}`,c=`tabpanel-${n}`,d=document.createElement("input");d.type="radio",d.id=a,d.checked=n===0,d.addEventListener("change",()=>this.activatePage(n,!0));const u=document.createElement("label");u.htmlFor=a,u.textContent=o;const f=document.createElement("span");f.className="tab-radio-wrapper",f.appendChild(d),f.appendChild(u),this.tabsContent.appendChild(f),i.classList.add("page"),i.setAttribute("id",c),n===0&&i.classList.add("active"),this.pages.push(i)})}}customElements.define("my-tabview",q);class B extends HTMLElement{}customElements.define("my-tab",B);class W extends HTMLElement{}customElements.define("my-header",W);class D extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){const l=document.createElement("div");l.className="article-list",this.querySelectorAll("my-article").forEach(e=>{const r=e.getAttribute("article-title")||"",s=e.getAttribute("article-route")||"#",i=e.getAttribute("article-description")||"",n=document.createElement("div");n.className="article-item",n.addEventListener("click",()=>{window.location.hash=s});const o=document.createElement("custom-icon"),a=e.getAttribute("article-image-color-top-left");a&&o.setAttribute("top-left-color",a);const c=e.getAttribute("article-image-color-top-right");c&&o.setAttribute("top-right-color",c);const d=e.getAttribute("article-image-color-bottom-left");d&&o.setAttribute("bottom-left-color",d);const u=e.getAttribute("article-image-color-bottom-right");u&&o.setAttribute("bottom-right-color",u);const f=e.getAttribute("article-image-color-shadow");f&&o.setAttribute("shadow-color",f);const p=e.getAttribute("article-image-text");p&&o.setAttribute("text",p);const b=e.getAttribute("article-image-size");b&&o.setAttribute("size",b),o.className="article-img",n.appendChild(o);const m=document.createElement("div"),E=document.createElement("h3");E.textContent=r,E.className="article-title";const _=document.createElement("p");_.textContent=i,_.className="article-desc",m.appendChild(E),m.appendChild(_),n.appendChild(m),l.appendChild(n)}),this.innerHTML="",this.appendChild(l)}}class G extends HTMLElement{}customElements.define("my-articleselector",D);customElements.define("my-article",G);class V extends HTMLElement{connectedCallback(){this.render()}render(){const l=this.getAttribute("text")||"Hz",e=this.getAttribute("size")||"300",r=this.getAttribute("radius"),s=r?`border-radius: ${r};`:"",i=this.getAttribute("top-right-color")||"rgb(103, 154, 209)",n=this.getAttribute("top-left-color")||"rgb(50, 100, 160)",o=this.getAttribute("bottom-left-color")||"rgb(143, 132, 213)",a=this.getAttribute("bottom-right-color")||"rgb(150, 197, 219)",c=this.getAttribute("shadow-color")||"rgb(40, 80, 130)",d=(Math.random()+1).toString(36).substring(7),u=`bgGradient-${d}`,f=`highlight-${d}`,p=`textGradient-${d}`,b=`dropShadow-${d}`;this.innerHTML=`
            <svg class="custom-icon" style="${s}" width="${e}" height="${e}" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
            	<defs>
            		<linearGradient id="${u}" x1="0%" y1="0%" x2="0%" y2="100%">
            			<stop offset="0%" stop-color="${i}" />
            			<stop offset="100%" stop-color="${o}" />
            		</linearGradient>

            		<linearGradient id="${p}" x1="0%" y1="0%" x2="0%" y2="100%">
            			<stop offset="0%" stop-color="${a}" />
            			<stop offset="100%" stop-color="${n}" />
            		</linearGradient>

            		<linearGradient id="highlight" x1="0%" y1="0%" x2="100%" y2="100%">
            			<stop offset="0%" stop-color="white" stop-opacity="0" />
            			<stop offset="100%" stop-color="white" stop-opacity="0.4" />
            		</linearGradient>

            		<filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
            			<feDropShadow dx="5" dy="5" stdDeviation="5" flood-color="rgba(0,0,0,0.5)" />
            		</filter>
            	</defs>

            	<g>
            		<rect x="0" y="0" width="300" height="300" fill="url(#${u})" />
            		<rect x="0" y="0" width="300" height="300" fill="url(#${f})" />
            	</g>

            	<text x="155" y="170" text-anchor="middle" dominant-baseline="middle"
            		  font-size="180"
            		  fill="${c}" opacity="1.0">
            		${l}
            	</text>

            	<text x="150" y="165" text-anchor="middle" dominant-baseline="middle"
            		  font-size="180"
            		  fill="url(#${p})" filter="url(#${b})"
            		  stroke="rgba(255,255,255,0.3)" stroke-width="1">
            		${l}
            	</text>
            </svg>
        `}}customElements.define("custom-icon",V);const g=document.getElementById("output-window");g.messages=[];g.visible=!1;var y;const I=()=>{g.visible=!0,y&&clearTimeout(y.current),y=setTimeout(()=>g.visible=!1,1e4)},j={notify:t=>{console.log(t),g.messages=[...g.messages,{id:Date.now().toString(),text:t,visible:!0}],I()}},X=new Worker(new URL("/clarity/assets/language_server_worker-BOXhEwlU.js",import.meta.url),{type:"module"}),M=new Worker(new URL("/clarity/assets/language_client_worker-2arvf2PA.js",import.meta.url),{type:"module"}),$=new MessageChannel,w=$.port1,x=$.port2;X.postMessage({type:"connect",port:w},[w]);M.postMessage({type:"connect",port:x},[x]);w.start();x.start();const N=document.querySelector("#main-editor");N.attachEventListeners();N.initialize("file:///c:/Users/Connor/Desktop/clarity/src/index.ts",j,M);
