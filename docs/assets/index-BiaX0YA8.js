var M=Object.defineProperty;var N=(t,r,e)=>r in t?M(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var h=(t,r,e)=>N(t,typeof r!="symbol"?r+"":r,e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();class $ extends HTMLElement{constructor(){super();h(this,"_messages",[]);h(this,"_visible",!0);h(this,"_endRef",null)}static get observedAttributes(){return["visible"]}get messages(){return this._messages}set messages(e){this._messages=e,this.render(),this.scrollToEnd()}get visible(){return this._visible}set visible(e){this._visible=e,this.render()}scrollToEnd(){this._endRef&&this._endRef.scrollIntoView({behavior:"smooth"})}attributeChangedCallback(e,n,i){e==="visible"&&(this.visible=i!=="false")}connectedCallback(){this.render()}render(){this.innerHTML=`
            <div class="console${this.visible?"":" fade-out"}">
                ${this._messages.map(e=>`<div class="console-line">${e.text}</div>`).join("")}
                <div id="end"></div>
            </div>
        `,this._endRef=this.querySelector("#end"),this.scrollToEnd()}}customElements.define("output-window",$);class D{constructor(r){h(this,"original");h(this,"addBuffer");h(this,"pieces");this.original=r,this.addBuffer="",this.pieces=[{buffer:"original",start:0,length:r.length}]}insert(r,e){if(e.length===0)return;const n=this.addBuffer.length;this.addBuffer+=e;let i=0,s=0;for(;s<this.pieces.length;s++){const c=this.pieces[s];if(i+c.length>=r)break;i+=c.length}if(s===this.pieces.length){this.pieces.push({buffer:"add",start:n,length:e.length});return}const l=this.pieces[s],a=r-i,o=[];a>0&&o.push({buffer:l.buffer,start:l.start,length:a}),o.push({buffer:"add",start:n,length:e.length}),a<l.length&&o.push({buffer:l.buffer,start:l.start+a,length:l.length-a}),this.pieces.splice(s,1,...o)}delete(r,e){let n=0,i=0;for(;i<this.pieces.length&&n+this.pieces[i].length<=r;)n+=this.pieces[i].length,i++;const s=i,l=r-n;let a=e;const o=[];for(;a>0&&i<this.pieces.length;){const c=this.pieces[i],d=i===s?l:0,u=c.length-d;Math.max(0,c.length-u),d>0&&o.push({buffer:c.buffer,start:c.start,length:d}),u<c.length&&o.push({buffer:c.buffer,start:c.start+d+a,length:c.length-(d+a)}),a-=u,i++}this.pieces.splice(s,i-s,...o)}getText(){let r="";for(const e of this.pieces){const n=e.buffer==="original"?this.original:this.addBuffer;r+=n.substr(e.start,e.length)}return r}}var _;(t=>{t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(_||(_={}));var w;(t=>{t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(w||(w={}));var C;(t=>{t.None=0,t.Full=1,t.Incremental=2})(C||(C={}));var x;(t=>{t.Text=1,t.Read=2,t.Write=3})(x||(x={}));var T;(t=>{t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(T||(T={}));var L;(t=>{t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(L||(L={}));function E(t){let r="";return t.childNodes.forEach((e,n,i)=>{e.nodeType===Node.TEXT_NODE?r+=e.data:e.tagName==="BR"?r+=`
`:e.tagName==="DIV"?(r+=E(e),n<i.length-1&&(r+=`
`)):e.nodeType===Node.ELEMENT_NODE&&(r+=E(e))}),r}function S(t){let r=0;const e=window.getSelection();if(e&&e.rangeCount>0){const n=e.getRangeAt(0),i=n.cloneRange();i.selectNodeContents(t),i.setEnd(n.endContainer,n.endOffset),r=i.toString().length}return r}function H(t,r){const e=window.getSelection();if(!e)return;let n=0,i=[t],s,l=!1;for(;i.length&&!l&&(s=i.pop(),!!s);)if(s.nodeType===Node.TEXT_NODE){const a=s.length;if(n+a>=r){const o=document.createRange();o.setStart(s,r-n),o.collapse(!0),e.removeAllRanges(),e.addRange(o),l=!0}else n+=a}else{let a=Array.from(s.childNodes);for(let o=a.length-1;o>=0;o--)i.push(a[o])}}class q extends HTMLElement{constructor(){super();h(this,"_pieceTable");h(this,"_consoleListener",null);h(this,"_inputRef",null);h(this,"_highlightRef",null);h(this,"_sourceUri","");h(this,"_lastText","");h(this,"_client",null);h(this,"_hasInitialized",!1);h(this,"_boundInputCallback",this.inputCallback.bind(this));h(this,"_boundScrollCallback",this.scrollCallback.bind(this));h(this,"_boundKeydownCallback",this.keydownCallback.bind(this));this._pieceTable=new D("function nvr main = () {}")}connectedCallback(){}disconnectedCallback(){var e;(e=this._client)==null||e.postMessage({type:"execute",method:"closeDocument",params:{uri:this._sourceUri}})}initialize(e,n,i){var s;this._hasInitialized=!0,this._consoleListener||(this._consoleListener=n),i&&(this._client=i,this._client.addEventListener("message",l=>{var a,o,c;l.data.type==="log"?(a=this._consoleListener)==null||a.notify(l.data.message):l.data.type==="error"?(o=this._consoleListener)==null||o.notify(l.data.message):l.data.type==="compileResult"&&((c=this._consoleListener)==null||c.notify(JSON.stringify(l.data.result)))}),this._client.addEventListener("messageerror",l=>{var a;(a=this._consoleListener)==null||a.notify(l.data)}),this._sourceUri=e),(s=this._client)==null||s.postMessage({type:"execute",method:"openDocument",params:{uri:this._sourceUri,sourceCode:this._pieceTable.getText()}}),this.render()}inputCallback(e){this.handleInputChange(e)}scrollCallback(e){this.syncScroll()}keydownCallback(e){this.handleKeyDown(e)}attachEventListeners(){var e,n,i;(e=this._inputRef)==null||e.addEventListener("input",this._boundInputCallback),(n=this._inputRef)==null||n.addEventListener("scroll",this._boundScrollCallback),(i=this._inputRef)==null||i.addEventListener("keydown",this._boundKeydownCallback)}detachEventListeners(){var e,n,i;(e=this._inputRef)==null||e.removeEventListener("input",this._boundInputCallback),(n=this._inputRef)==null||n.removeEventListener("scroll",this._boundScrollCallback),(i=this._inputRef)==null||i.removeEventListener("keydown",this._boundKeydownCallback)}handleInputChange(e){if(!this._inputRef)return;const n=E(this._inputRef),i=S(this._inputRef);let s=0;for(;s<this._lastText.length&&s<n.length&&this._lastText[s]===n[s];)s++;let l=this._lastText.length-1,a=n.length-1;for(;l>=s&&a>=s&&this._lastText[l]===n[a];)l--,a--;l>=s&&this._pieceTable.delete(s,l-s+1),a>=s&&this._pieceTable.insert(s,n.slice(s,a+1)),this._lastText=n,this.renderHighlight([]),H(this._inputRef,i)}handleKeyDown(e){e.key==="Tab"&&(e.preventDefault(),document.execCommand("insertText",!1,"    ")),e.key==="Enter"&&(e.preventDefault(),document.execCommand("insertLineBreak"))}renderHighlight(e){var n;this._highlightRef&&(this._pieceTable.getText(),(n=this._client)==null||n.postMessage({type:"execute",method:"recycle",params:{uri:this._sourceUri,deltas:e}}))}syncScroll(){this._inputRef&&this._highlightRef&&(this._highlightRef.scrollTop=this._inputRef.scrollTop,this._highlightRef.scrollLeft=this._inputRef.scrollLeft)}render(){if(!this._hasInitialized)throw new Error("call initialize() on SourceEditorElement before rendering.");const e=this._pieceTable.getText();this.innerHTML=`
            <div class="editor-shell">
                <pre class="highlight-layer"></pre>
                <div class="input-layer" contenteditable="true" spellcheck="false"></div>
            </div>
        `,this._highlightRef=this.querySelector(".highlight-layer"),this._inputRef=this.querySelector(".input-layer"),this._inputRef&&(this._inputRef.textContent=e,this._lastText=e),this.attachEventListeners(),this.renderHighlight([])}}customElements.define("source-editor",q);class O extends HTMLElement{constructor(){super(...arguments);h(this,"tabsContent");h(this,"pages",[])}connectedCallback(){this.render(),window.addEventListener("popstate",n=>{var s;const i=((s=n.state)==null?void 0:s.tab)??this.getTabIndexFromUrl();typeof i=="number"&&i>=0&&i<this.pages.length&&this.activatePage(i,!1)});const e=this.getTabIndexFromUrl();typeof e=="number"&&e>=0&&e<this.pages.length&&this.activatePage(e,!1)}getTabIndexFromUrl(){let e=window.location.pathname.replace(/^\//,"");e.startsWith("clarity/")&&(e=e.substring(8));const n=Array.from(this.querySelectorAll("my-tab"));for(let i=0;i<n.length;i++)if(n[i].getAttribute("route")===e)return i;return 0}activatePage(e,n=!0){if(this.pages.forEach((i,s)=>{const l=this.tabsContent.querySelectorAll("input"),a=s===e;i.classList.toggle("active",a),l[s]&&(l[s].checked=a)}),n){const s=Array.from(this.querySelectorAll("my-tab"))[e].getAttribute("route")||"",a=`${window.location.origin}/clarity/${s}`;history.pushState({tab:e},"",a)}}render(){const e=this.querySelector("my-header");if(e){const s=e.children[0];if(s){let l=document.createElement("div");l.className="tabs-bar",s.classList.add("tabs-header"),l.appendChild(s),this.prepend(l)}e.remove()}this.tabsContent=document.createElement("div"),this.tabsContent.className="tabs-content";const n=this.querySelector(".tabs-bar");n?n.append(this.tabsContent):this.prepend(this.tabsContent),Array.from(this.querySelectorAll("my-tab")).forEach((s,l)=>{const a=s.getAttribute("label")||`Tab ${l+1}`,o=`tab-${l}`,c=`tabpanel-${l}`,d=document.createElement("input");d.type="radio",d.id=o,d.checked=l===0,d.addEventListener("change",()=>this.activatePage(l,!0));const u=document.createElement("label");u.htmlFor=o,u.textContent=a;const f=document.createElement("span");f.className="tab-radio-wrapper",f.appendChild(d),f.appendChild(u),this.tabsContent.appendChild(f),s.classList.add("page"),s.setAttribute("id",c),l===0&&s.classList.add("active"),this.pages.push(s)})}}customElements.define("my-tabview",O);class P extends HTMLElement{}customElements.define("my-tab",P);class z extends HTMLElement{}customElements.define("my-header",z);class B extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){const r=document.createElement("div");r.className="article-list";const e=this.querySelectorAll("my-article");for(let i=0;i<e.length;i++){const s=e[i],l=s.getAttribute("article-title")||"",a=s.getAttribute("article-route")||"#",o=s.getAttribute("article-description")||"",c=document.createElement("div");c.className="article-item shadowed hoverable",c.addEventListener("click",()=>{const p=this.querySelector(".article-content-container");p&&(window.location.hash=a,r.style.display="none",p.style.display="flex",p.innerHTML=s.innerHTML)});const d=document.createElement("div"),u=document.createElement("h3");u.textContent=l,u.className="article-title";const f=document.createElement("p");f.textContent=o,f.className="article-desc",d.appendChild(u),d.appendChild(f);const m=this.querySelector("my-custom-icon");m&&c.prepend(m),c.appendChild(d),r.appendChild(c)}this.innerHTML="";let n=document.createElement("div");n.className="article-content-container",n.style.display="none",this.appendChild(r),this.appendChild(n)}}class U extends HTMLElement{connectedCallback(){this.render()}render(){const r=this.getAttribute("article-title")||"Untitled Article",e=this.getAttribute("article-description")||"",n=document.createElement("my-article-header"),i=this.querySelector("my-article-content")||document.createElement("my-article-content");n.setAttribute("article-title",r);const s=this.querySelector("my-custom-icon");s&&n.appendChild(s);const a=Array.from(document.querySelectorAll("my-article-header")).map(u=>{var f;return(f=u.querySelector("my-custom-icon"))==null?void 0:f.cloneNode(!0)});let o=[];for(const u of a){if(!u)continue;const f=u;f.getAttribute("article-title")===r&&f.classList.add("active"),o.push(f)}this.innerHTML=`
            <header>
                <h1>${r}</h1>
                <p class="article-desc">${e}</p>
            </header>
            <section>
                <main>
                    <article class="article-content">
                        <h2>Hello from the article</h2>
                    </article>
                </main>
                <aside>
                    <span>More Articles</span>
                    <nav class="article-nav"></nav>
                </aside>
            </section>
            <footer>
                <span>&copy; 2025 Connor J. Link. All Rights Reserved.</span>
            </footer>
        `;const c=this.querySelector(".article-content");c&&c.appendChild(i);const d=this.querySelector(".article-nav");d&&d.append(...o),this.appendChild(n),this.appendChild(i)}}customElements.define("my-articleselector",B);customElements.define("my-article",U);class F extends HTMLElement{connectedCallback(){this.render()}render(){const r=this.getAttribute("text")||"Hz",e=this.getAttribute("size")||"300",n=this.getAttribute("radius"),i=n?`border-radius: ${n};`:"",s=this.getAttribute("shadow-color")||"var(--haze-color-shadow)",l=this.getAttribute("foreground-top-color")||"var(--haze-color-foreground-top)",a=this.getAttribute("foreground-bottom-color")||"var(--haze-color-foreground-bottom)",o=this.getAttribute("background-top-color")||"var(--haze-color-background-top)",c=this.getAttribute("background-bottom-color")||"var(--haze-color-background-bottom)",d=(Math.random()+1).toString(36).substring(7),u=`bgGradient-${d}`,f=`highlight-${d}`,m=`textGradient-${d}`,p=`dropShadow-${d}`;this.innerHTML=`
            <svg class="my-custom-icon" style="${i}" width="${e}" height="${e}" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
            	<defs>
            		<linearGradient id="${u}" x1="0%" y1="0%" x2="0%" y2="100%">
            			<stop offset="0%" stop-color="${o}" />
            			<stop offset="100%" stop-color="${c}" />
            		</linearGradient>

            		<linearGradient id="${m}" x1="0%" y1="0%" x2="0%" y2="100%">
            			<stop offset="0%" stop-color="${l}" />
            			<stop offset="100%" stop-color="${a}" />
            		</linearGradient>

            		<linearGradient id="highlight" x1="0%" y1="0%" x2="100%" y2="100%">
            			<stop offset="0%" stop-color="white" stop-opacity="0" />
            			<stop offset="100%" stop-color="white" stop-opacity="0.4" />
            		</linearGradient>

            		<filter id="${p}" x="-20%" y="-20%" width="140%" height="140%">
            			<feDropShadow dx="5" dy="5" stdDeviation="10" flood-color="rgba(0,0,0,0.5)" />
            		</filter>
            	</defs>

            	<g>
            		<rect x="0" y="0" width="300" height="300" fill="url(#${u})" />
            		<rect x="0" y="0" width="300" height="300" fill="url(#${f})" />
            	</g>

            	<text x="155" y="170" text-anchor="middle" dominant-baseline="middle"
            		  font-size="180"
            		  fill="${s}" opacity="1.0">
            		${r}
            	</text>

            	<text x="150" y="165" text-anchor="middle" dominant-baseline="middle"
            		  font-size="180"
            		  fill="url(#${m})" filter="url(#${p})"
            		  stroke="rgba(255,255,255,0.3)" stroke-width="1">
            		${r}
            	</text>
            </svg>
        `}}customElements.define("my-custom-icon",F);class W extends HTMLElement{constructor(){super();h(this,"isExpanded",!1);h(this,"headerDivElement",null);h(this,"caretSpanElement",null);h(this,"contentDivElement",null)}static get observedAttributes(){return["header"]}connectedCallback(){if(this.querySelector(".my-collapsible-header"))return;this.headerDivElement=document.createElement("div"),this.headerDivElement.className="my-collapsible-header",this.headerDivElement.tabIndex=0,this.caretSpanElement=document.createElement("span"),this.caretSpanElement.className="my-collapsible-caret",this.caretSpanElement.innerHTML=`
            <svg viewBox="0 0 16 16" fill="none" width="16" height="16">
                <path d="M5 6l3 3 3-3" stroke="#aaa" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        `;const e=document.createElement("span");for(e.className="my-collapsible-header-text",e.textContent=this.getAttribute("header")||"",this.headerDivElement.appendChild(this.caretSpanElement),this.headerDivElement.appendChild(e),this.contentDivElement=document.createElement("div"),this.contentDivElement.className="my-collapsible-content";this.firstChild&&(this.firstChild!==this.headerDivElement&&this.firstChild!==this.contentDivElement);)this.contentDivElement.appendChild(this.firstChild);this.appendChild(this.headerDivElement),this.appendChild(this.contentDivElement),this.headerDivElement.addEventListener("click",()=>this.toggle()),this.headerDivElement.addEventListener("keydown",n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),this.toggle())})}attributeChangedCallback(e,n,i){if(e==="header"&&this.headerDivElement){const s=this.headerDivElement.querySelector(".my-collapsible-header-text");s&&(s.textContent=i||"")}}toggle(){this.isExpanded=!this.isExpanded,this.isExpanded?this.setAttribute("expanded",""):this.removeAttribute("expanded")}}customElements.define("my-collapsible",W);const g=document.getElementById("output-window");g.messages=[];g.visible=!1;var b;const G=()=>{g.visible=!0,b&&clearTimeout(b.current),b=setTimeout(()=>g.visible=!1,1e4)},I={notify:t=>{console.log(t),g.messages=[...g.messages,{id:Date.now().toString(),text:t,visible:!0}],G()}},V=new Worker(new URL("/clarity/assets/language_server_worker-BOXhEwlU.js",import.meta.url),{type:"module"}),k=new Worker(new URL("/clarity/assets/language_client_worker-2arvf2PA.js",import.meta.url),{type:"module"}),A=new MessageChannel,y=A.port1,v=A.port2;V.postMessage({type:"connect",port:y},[y]);k.postMessage({type:"connect",port:v},[v]);y.start();v.start();const R=document.querySelector("#main-editor");R.attachEventListeners();R.initialize("file:///c:/Users/Connor/Desktop/clarity/src/index.ts",I,k);
